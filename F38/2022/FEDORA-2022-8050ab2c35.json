{
	"alias": "FEDORA-2022-8050ab2c35",
	"autotime": true,
	"bugs": [
		{
			"bug_id": 2114766,
			"feedback": [
				{
					"bug_id": 2114766,
					"comment": {
						"id": 2804413,
						"karma": -1,
						"text": "this wasn't meant to be on mainline yet, per @ab .",
						"timestamp": "2022-12-01 17:20:53",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
							"email": "awilliam@redhat.com",
							"groups": [
								{
									"name": "proventesters"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "packager"
								},
								{
									"name": "qa-tools-sig"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "news"
								},
								{
									"name": "gittriage"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "gitgeneric-release"
								},
								{
									"name": "yak_farmers"
								},
								{
									"name": "triagers"
								},
								{
									"name": "qa"
								},
								{
									"name": "sysadmin-qa"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "gitmkinitrd"
								},
								{
									"name": "qa-admin"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "common-issues-triage"
								},
								{
									"name": "aws-qa"
								},
								{
									"name": "gitfedora-project-schedule"
								},
								{
									"name": "change-wranglers"
								},
								{
									"name": "fedora-ci-admins"
								},
								{
									"name": "program-management"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 302,
							"name": "adamwill",
							"openid": "adamwill.id.fedoraproject.org"
						},
						"user_id": 302
					},
					"comment_id": 2804413
				},
				{
					"bug_id": 2114766,
					"comment": {
						"id": 2804415,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:05",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
							"email": "klember@redhat.com",
							"groups": [
								{
									"name": "qa"
								},
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "gnome-sig"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "hosted-content"
								},
								{
									"name": "flatpak-sig"
								}
							],
							"id": 285,
							"name": "kalev",
							"openid": "kalev.id.fedoraproject.org"
						},
						"user_id": 285
					},
					"comment_id": 2804415
				},
				{
					"bug_id": 2114766,
					"comment": {
						"id": 2804418,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:19",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
							"email": "decathorpe@gmail.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "packaging-committee"
								},
								{
									"name": "libreoffice-sig"
								},
								{
									"name": "multimedia-sig"
								},
								{
									"name": "diversity-pride"
								},
								{
									"name": "pantheon-sig"
								}
							],
							"id": 388,
							"name": "decathorpe",
							"openid": "decathorpe.id.fedoraproject.org"
						},
						"user_id": 388
					},
					"comment_id": 2804418
				},
				{
					"bug_id": 2114766,
					"comment": {
						"id": 2804444,
						"karma": -1,
						"timestamp": "2022-12-01 17:34:34",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
							"email": "mboddu@bhujji.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "bodhiadmin"
								},
								{
									"name": "releng-team"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "sysadmin-web"
								},
								{
									"name": "sysadmin-releng"
								},
								{
									"name": "sysadmin-bodhi"
								},
								{
									"name": "cvsadmin"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "torrentadmin"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "epel-cabal"
								},
								{
									"name": "signers"
								},
								{
									"name": "sysadmin-cvs"
								}
							],
							"id": 2990,
							"name": "mohanboddu",
							"openid": "mohanboddu.id.fedoraproject.org"
						},
						"user_id": 2990
					},
					"comment_id": 2804444
				},
				{
					"bug_id": 2114766,
					"comment": {
						"id": 2804446,
						"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
						"timestamp": "2022-12-01 17:36:29",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2804446
				}
			],
			"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]",
			"bugzilla": {
				"bug_id": "2114766",
				"creation_ts": "2022-08-03 08:47:33 +0000",
				"short_desc": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]",
				"delta_ts": "2023-01-13 14:44:00 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Triaged",
				"priority": "unspecified",
				"bug_severity": "medium",
				"depends_on": [
					"2027125",
					"2068935"
				],
				"blocked": [
					{
						"bug_id": "2106296",
						"creation_ts": "2022-07-12 10:13:56 +0000",
						"short_desc": "PKINIT: Support of MODP group 2 for Diffie-Hellman key exchange",
						"delta_ts": "2023-09-18 20:00:56 +0000",
						"bug_status": "CLOSED",
						"resolution": "MIGRATED",
						"keywords": "MigratedToJIRA, Triaged",
						"priority": "unspecified",
						"bug_severity": "medium",
						"depends_on": [
							"2068935",
							"2114766"
						],
						"external_bugs": {
							"text": "openssl/openssl/issues/18981",
							"name": "Github"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "16450739",
								"comment_count": "0",
								"who": {
									"text": "fdvorak",
									"name": "Filip Dvorak"
								},
								"bug_when": "2022-07-12 10:13:56 +0000",
								"thetext": "Created attachment 1896290\nconf files for krb5 KDC+heimdal\n\nDescription of problem:\nHeimdal client fails to authenticate a user against MIT krb5 KDC.\n\nVersion-Release number of selected component (if applicable):\nkrb5-server-1.19.1-22.el9.x86_64\nheimdal-workstation-7.7.0-8.fc34.x86_64\ncrypto-policies=DEFAULT\nRHEL-9.1.0-20220708.0\n\nHow reproducible:\n\n\nSteps to Reproduce:\n1. Install MIT krb5 KDC and add user (with REQUIRES_PRE_AUTH attribute)\n   (conf file kdc.conf was attached)\n\n   Generate certificates for client and KDC with the help of this script:\n    https://gitlab.cee.redhat.com/identity-management/krb5-tests/-/blob/RHEL9.1/tests/Sanity/heimdal-sanity/make_pkinit_cert.sh\n   ./make_pkinit_cert.sh ca ca\n    server certs:\n   ./make_pkinit_cert.sh kdc kdc CA=ca CN=$HostName REALM=TEST.REDHAT.COM CLIENT=$HostName\n   client certs:\n   ./make_pkinit_cert.sh client $krb5User CA=ca CN=$krb5User\"\n   ./make_pkinit_cert.sh client-sign $krb5User CA=ca CN=$krb5User REALM=TEST.REDHAT.COM CLIENT=$krb5User\"\n  \n2. Set Heimdal client \n   (conf file heimdal-kdc.conf was attached)\n\n3. try kinit alice:\n   #KRB5_CONFIG=/tmp/heimdal_krb5.conf heimdal-kinit -C FILE:/tmp/alice.pem,/tmp/alicekey.pem alice@TEST.REDHAT.COM\n \n\nActual results:\n#KRB5_CONFIG=/tmp/tmp.i1QDKE5BV9/heimdal_krb5.conf heimdal-kinit -C FILE:/tmp/tmp.i1QDKE5BV9/alice.pem,/tmp/tmp.i1QDKE5BV9/alicekey.pem alice@TEST.REDHAT.COM\nheimdal-kinit: krb5_get_init_creds: PREAUTH_FAILED\n\nkrb5kdc log:\nJul 12 03:40:22 ci-vm-10-0-138-184.hosted.upshift.rdu2.redhat.com krb5kdc[18481](info): preauth (pkinit) verify failure: Key parameters not accepted\nJul 12 03:40:22 ci-vm-10-0-138-184.hosted.upshift.rdu2.redhat.com krb5kdc[18481](info): AS_REQ (2 etypes {aes256-cts-hmac-sha384-192(20), aes256-cts-hmac-sha1-96(18)}) 10.0.138.184: PREAUTH_FAILED: alice@TEST.REDHAT.COM for krbtgt/TEST.REDHAT.COM@TEST.REDHAT.COM, Key parameters not accepted\n\n\nExpected results:\nheimdal-kinit should passed with MIT krb5 KDC\n\nAdditional info:\nNOTE: Heimdal client can be authenticate without PKINIT against Heimdal KDC \nNOTE: the certificates should be correct because PKINIT works and user was authenticated when Heimdal client and Heimdal KDC was used.\n\n# KRB5_CONFIG=/tmp/tmp.DYLNOriJro/heimdal_krb5.conf heimdal-kinit -C FILE:/tmp/tmp.DYLNOriJro/alice.pem,/tmp/tmp.DYLNOriJro/alicekey.pem alice\n# KRB5_CONFIG=/tmp/tmp.DYLNOriJro/heimdal_krb5.conf heimdal-klist \nCredentials cache: FILE:/tmp/heimdal_ccache\n        Principal: alice@TEST.REDHAT.COM\n\n  Issued                Expires               Principal\nJul 12 04:11:31 2022  Jul 13 04:11:31 2022  krbtgt/TEST.REDHAT.COM@TEST.REDHAT.COM\n\nheimdal-kdc.log\n\n2022-07-12T04:11:01 KDC started master process pid=24225\n2022-07-12T04:11:01 KDC worker process started: 24226\n2022-07-12T04:11:31 AS-REQ alice@TEST.REDHAT.COM from IPv4:10.0.138.184 for krbtgt/TEST.REDHAT.COM@TEST.REDHAT.COM\n2022-07-12T04:11:31 Client sent patypes: PK-INIT(ietf), 132, REQ-ENC-PA-REP\n2022-07-12T04:11:31 Looking for PK-INIT(ietf) pa-data -- alice@TEST.REDHAT.COM\n2022-07-12T04:11:31 PK-INIT request of type PK-INIT-IETF\n2022-07-12T04:11:31 Trying to authorize PK-INIT subject DN CN=alice,OU=dummyunit,O=DummyCompany Ltd,L=Brno,S=Moravia,C=CZ\n2022-07-12T04:11:31 Found matching PK-INIT SAN in certificate\n2022-07-12T04:11:31 PKINIT pre-authentication succeeded -- alice@TEST.REDHAT.COM using CN=alice,OU=dummyunit,O=DummyCompany Ltd,L=Brno,S=Moravia,C=CZ\n2022-07-12T04:11:31 PK-INIT using dh RFC2412-MODP-group2\n2022-07-12T04:11:31 PK-INIT(ietf) pre-authentication succeeded -- alice@TEST.REDHAT.COM\n2022-07-12T04:11:31 AS-REQ authtime: 2022-07-12T04:11:31 starttime: unset endtime: 2022-07-13T04:11:31 renew till: unset\n2022-07-12T04:11:31 Client supported enctypes: aes256-cts-hmac-sha1-96, aes128-cts-hmac-sha1-96, aes256-cts-hmac-sha384-192, aes128-cts-hmac-sha256-128, des3-cbc-sha1, arcfour-hmac-md5, using aes256-cts-hmac-sha1-96/aes256-cts-hmac-sha1-96\n2022-07-12T04:11:31 Requested flags: forwardable\n2022-07-12T04:11:31 sending 2668 bytes to IPv4:10.0.138.184"
							},
							{
								"isprivate": "0",
								"commentid": "16456206",
								"comment_count": "1",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-13 16:11:46 +0000",
								"thetext": "There are actually 2 issues here:\n\nThe first one (which is causing the error in the description) is that Heimdal client is using a 1024-bit Diffie-Hellman key, which is rejected by MIT KDC[1] because it requires a minimum of 2048 bits by default[2].\n\nBut if we reduce the minimum size of the DH key to 1024 bits in the configuration of the KDC (\"[kdcdefaults] pkinit_dh_min_bits = 1024\"), then a different error occurs:\n\n  PKINIT: no freshness token received from alice@TEST.REDHAT.COM\n  AS_REQ (2 etypes {aes256-cts-hmac-sha384-192(20), aes256-cts-hmac-sha1-96(18)}) 10.0.139.148: KDC_RETURN_PADATA: alice@TEST.REDHAT.COM for krbtgt/TEST.REDHAT.COM@TEST.REDHAT.COM, Cannot allocate memory\n\nBut the memory allocation error is wrong. The actual error comes from the fact OpenSSL fails to generate the DH key because the q prime has a size of 1023 bits, which is invalid:\n\n#0  default_mdname (N=1023) at crypto/ffc/ffc_params_generate.c:448\n#1  ossl_ffc_params_FIPS186_2_gen_verify.constprop.0 (libctx=libctx@entry=0x0, params=params@entry=0x7ffd42c8bf40, mode=mode@entry=0, L=L@entry=1024, N=1023, res=res@entry=0x7ffd42c8bf3c, cb=0x0, type=<optimized out>) at crypto/ffc/ffc_params_generate.c:836\n#2  0x00007fb86c2bf5a3 in ossl_ffc_params_FIPS186_2_validate.constprop.0.isra.0 (libctx=0x0, params=0x7ffd42c8bf40, res=0x7ffd42c8bf3c, cb=0x0, type=<optimized out>) at crypto/ffc/ffc_params_validate.c:84\n#3  0x00007fb86c1db7e6 in ossl_ffc_params_simple_validate (libctx=0x0, params=0x560b5b820e28, paramstype=1, res=0x7ffd42c8bf3c) at crypto/ffc/ffc_params_validate.c:116\n#4  0x00007fb86c15c02f in generate_key (dh=0x560b5b820e20) at crypto/dh/dh_key.c:337\n#5  generate_key (dh=0x560b5b820e20) at crypto/dh/dh_key.c:256\n#6  0x00007fb86c29fae0 in dh_gen (genctx=0x560b5b92f8a0, osslcb=<optimized out>, cbarg=0x560b5b92f920) at providers/implementations/keymgmt/dh_kmgmt.c:763\n#7  0x00007fb86c1d3b99 in evp_keymgmt_gen (keymgmt=<optimized out>, keymgmt=<optimized out>, cb=0x7fb86c1d1f50 <ossl_callback_to_pkey_gencb>, cbarg=0x560b5b92f920, genctx=<optimized out>) at crypto/evp/keymgmt_meth.c:375\n#8  evp_keymgmt_util_gen (cb=0x7fb86c1d1f50 <ossl_callback_to_pkey_gencb>, cbarg=0x560b5b92f920, genctx=<optimized out>, keymgmt=<optimized out>, target=0x560b5b820360) at crypto/evp/keymgmt_lib.c:511\n#9  EVP_PKEY_generate (ctx=ctx@entry=0x560b5b92f920, ppkey=ppkey@entry=0x7ffd42c8c0c0) at crypto/evp/pmeth_gn.c:190\n#10 0x00007fb86c1d3e0e in EVP_PKEY_keygen (ctx=ctx@entry=0x560b5b92f920, ppkey=ppkey@entry=0x7ffd42c8c0c0) at crypto/evp/pmeth_gn.c:275\n#11 0x00007fb86bbfaebb in generate_dh_pkey (params=0x560b5b8160b0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c:723\n#12 0x00007fb86bbfb055 in server_process_dh (context=context@entry=0x560b5b81b6e0, plg_cryptoctx=<optimized out>, cryptoctx=0x560b5b821120, id_cryptoctx=<optimized out>, dh_pubkey_out=dh_pubkey_out@entry=0x7ffd42c8c1d0, dh_pubkey_len_out=dh_pubkey_len_out@entry=0x7ffd42c8c198, server_key_out=0x7ffd42c8c1c8, server_key_len_out=0x7ffd42c8c19c) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c:3095\n#13 0x00007fb86bc011d3 in pkinit_server_return_padata (context=0x560b5b81b6e0, padata=0x560b5b92b870, req_pkt=0x560b5b81d800, request=0x560b5b92e240, reply=<optimized out>, encrypting_key=<optimized out>, send_pa=0x7ffd42c8c2e0, cb=0x560b5a2f7040 <callbacks>, rock=0x560b5b81e418, moddata=0x560b5b81c6d0, modreq=0x560b5b7fc970) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/plugins/preauth/pkinit/pkinit_srv.c:832\n#14 0x0000560b5a2da8cf in return_padata (context=0x560b5b81b6e0, rock=rock@entry=0x560b5b81e418, req_pkt=0x560b5b81d800, request=request@entry=0x560b5b92e240, reply=reply@entry=0x560b5b81e488, encrypting_key=encrypting_key@entry=0x560b5b81e3d0, padata_context=0x560b5b81e520) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/kdc_preauth.c:1457\n#15 0x0000560b5a2db35e in finish_process_as_req (state=state@entry=0x560b5b81e290, errcode=errcode@entry=0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/do_as_req.c:250\n#16 0x0000560b5a2dba9a in finish_preauth (arg=arg@entry=0x560b5b81e290, code=0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/do_as_req.c:471\n#17 0x0000560b5a2dab41 in finish_check_padata (state=state@entry=0x560b5b82a1c0, code=0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/kdc_preauth.c:1206\n#18 0x0000560b5a2dae67 in finish_verify_padata (arg=0x560b5b82a1c0, code=0, modreq=<optimized out>, e_data=0x0, authz_data=0x0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/kdc_preauth.c:1281\n#19 0x00007fb86bc0031d in pkinit_server_verify_padata (context=0x560b5b81b6e0, req_pkt=<optimized out>, request=<optimized out>, enc_tkt_reply=0x560b5b81e2c8, data=<optimized out>, cb=0x560b5a2f7040 <callbacks>, rock=0x560b5b81e418, moddata=0x560b5b81c6d0, respond=0x560b5a2dacc9 <finish_verify_padata>, arg=0x560b5b82a1c0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/plugins/preauth/pkinit/pkinit_srv.c:643\n#20 0x0000560b5a2dacbb in next_padata (state=state@entry=0x560b5b82a1c0) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/kdc_preauth.c:1317\n#21 0x0000560b5a2dafa4 in check_padata (context=0x560b5b81b6e0, rock=rock@entry=0x560b5b81e418, req_pkt=0x560b5b81d800, request=0x560b5b92e240, enc_tkt_reply=enc_tkt_reply@entry=0x560b5b81e2c8, padata_context=padata_context@entry=0x560b5b81e520, e_data=0x560b5b81e478, typed_e_data=0x560b5b81e480, respond=0x560b5a2dba57 <finish_preauth>, arg=0x560b5b81e290) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/kdc_preauth.c:1376\n#22 0x0000560b5a2ddf3c in process_as_req (request=<optimized out>, req_pkt=req_pkt@entry=0x560b5b81d800, local_addr=local_addr@entry=0x560b5b81d7e8, remote_addr=remote_addr@entry=0x560b5b81d6c0, kdc_active_realm=0x560b5b73f220, vctx=vctx@entry=0x560b5b7dd7b0, respond=0x560b5a2d5d5d <finish_dispatch_cache>, arg=0x560b5b824b60) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/do_as_req.c:766\n#23 0x0000560b5a2e07e1 in dispatch (cb=0x560b5a2f7290 <shandle>, local_addr=0x560b5b81d7e8, remote_addr=0x560b5b81d6c0, pkt=0x560b5b81d800, is_tcp=1, vctx=0x560b5b7dd7b0, respond=0x560b5a2e6c62 <process_tcp_response>, arg=0x560b5b81d750) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/dispatch.c:170\n#24 0x0000560b5a2e7075 in process_tcp_connection_read (ctx=0x560b5b7dd7b0, ev=<optimized out>) at ../lib/apputils/net-server.c:1362\n#25 0x00007fb86c6cc7fc in verto_fire (ev=0x560b5b742700) at /usr/src/debug/libverto-0.3.2-3.el9.x86_64/src/verto.c:1020\n#26 0x00007fb86bcf5d83 in ev_invoke_pending (loop=0x7fb86bd01060 <default_loop_struct>) at /usr/src/debug/libev-4.33-5.el9.x86_64/ev.c:3770\n#27 0x00007fb86bcf9830 in ev_run (flags=0, loop=0x7fb86bd01060 <default_loop_struct>) at /usr/src/debug/libev-4.33-5.el9.x86_64/ev.c:4190\n#28 ev_run (loop=0x7fb86bd01060 <default_loop_struct>, flags=0) at /usr/src/debug/libev-4.33-5.el9.x86_64/ev.c:4021\n#29 0x0000560b5a2e9d34 in main (argc=3, argv=<optimized out>) at /usr/src/debug/krb5-1.99.0-1.20220712gitmaster.el9.x86_64/src/kdc/main.c:1039\n\nI don't know this in invalid q size is coming from the Heimdal client or MIT KDC/OpenSSL yet.\n\nVersions are:\nopenssl-3.0.1-36.el9_0\nheimdal-7.7.0-11.fc36\n\n\n[1] https://github.com/krb5/krb5/blob/krb5-1.19.1-final/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c#L2735\n[2] https://github.com/krb5/krb5/blob/krb5-1.19.1-final/src/plugins/preauth/pkinit/pkinit.h#L61"
							},
							{
								"isprivate": "0",
								"commentid": "16468994",
								"comment_count": "2",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-18 17:08:06 +0000",
								"thetext": "Heimdal supports 2 MODP groups by default:\n\n* RFC2412's well-known group 2[1]\n* RFC3526's well-known group 14[2] (surprisingly, the RFC mentions the size of this group is 2048, but in Heimdal the size is written to be 1760)\n\nThis issue seems related to the definition of the fits group[3]. This group is the second element of the builtin list[4], and is picked by default if the \"libdefaults.pkinit_dh_min_bits\" parameter is undefined equal to 0[5]. But if the parameter is set, then it will pick the first group with a size strictly larger.\n\nSince RFC3526's well-known group 14 is the larger and first group of the list, it will be selected if pkinit_dh_min_bits is between 1 and 1759. Any other value will result in a \"Did not find a DH group parameter matching requirement\" error[6]. This may be a bug, because it would make more sense to sort the list in ascending size order.\n\nTo summarize, the fix is to set the libdefaults.pkinit_dh_min_bits parameter in Heimdal client configuration to any value between 1 and 1759 (ideally >1024, to be sure the group 14 will be selected rather than the group 2). It is still unclear why OpenSSL read the q prime as being 1023 bits long when Heimdal is using the group 2.\n\n\n[1] https://datatracker.ietf.org/doc/html/rfc2412#appendix-E.2\n[2] https://datatracker.ietf.org/doc/html/rfc3526#section-3\n[3] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L2092-L2112\n[4] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L2171\n[5] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L118\n[6] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L128-L131"
							},
							{
								"isprivate": "0",
								"commentid": "16476944",
								"comment_count": "3",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-20 14:11:15 +0000",
								"thetext": "PKINIT RFC[1] mentions MODP groups 4[2] and 12[3] must be supported, and group 16[4] should be supported. MIT krb5 implements these 3 groups[5], while Heimdal supports the 2 first ones only[6].\n\nHowever OpenSSL only supports MODP groups from RFC3526[7], RFC5114[8], and RFC7919[9], which are not including MODP group 2. As a consequence, the Diffie-Hellman parameter is interpreted as a generated group (i.e. not one of the well-known group), and therefore goes through a verification process first.\n\nThere are 2 issues with this verification process:\n\n* There is a bug caused by a confusion between bit and byte size[10]: the default_mdname function is supposed to pick the appropriate message digest function based on the size of the q prime in bytes, but the size passed is in bits.\n* Fixing the previous bug is not enough because the byte size in this case is 128, which is not mapped to any MD function.\n\nOn Heimdal side, there are 2 points I find confusing: \n\n* A group is selected only if its size is strictly greater than the \"pkinit_dh_min_bits\" parameter[11], but the naming suggests that the configured value itself should be acceptable.\n* The Heimdal definition of MODP group 14 has size 1760[12], while its definition in the RFC has size 2048.\n\n\n[1] https://datatracker.ietf.org/doc/html/rfc4556#page-13\n[2] https://datatracker.ietf.org/doc/html/rfc2409#section-6.4\n[3] https://datatracker.ietf.org/doc/html/rfc3526#section-3\n[4] https://datatracker.ietf.org/doc/html/rfc3526#section-5\n[5] https://github.com/krb5/krb5/blob/krb5-1.20-final/src/plugins/preauth/pkinit/pkinit_constants.c#L294-L296\n[6] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L2092-L2144\n[7] https://datatracker.ietf.org/doc/html/rfc3526\n[8] https://datatracker.ietf.org/doc/html/rfc5114#section-2\n[9] https://datatracker.ietf.org/doc/html/rfc7919#appendix-A\n[10] https://github.com/openssl/openssl/blob/openssl-3.0.5/crypto/ffc/ffc_params_generate.c#L541\n[11] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L124\n[12] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/lib/krb5/pkinit.c#L2118"
							},
							{
								"isprivate": "0",
								"commentid": "16477665",
								"comment_count": "4",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-20 17:43:55 +0000",
								"thetext": "(In reply to Julien Rische from comment #3)\n> PKINIT RFC[1] mentions MODP groups 4[2] and 12[3] must be supported, and\n> group 16[4] should be supported. MIT krb5 implements these 3 groups[5],\n> while Heimdal supports the 2 first ones only[6].\n\nMy bad, I made a confusion here: mandatory groups are 2[1] and 14[2], and the optional one is 16[3].\n\n[1] https://datatracker.ietf.org/doc/html/rfc2409#section-6.2\n[2] https://datatracker.ietf.org/doc/html/rfc3526#section-3\n[3] https://datatracker.ietf.org/doc/html/rfc3526#section-5"
							},
							{
								"isprivate": "0",
								"commentid": "16479296",
								"comment_count": "5",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-21 09:41:14 +0000",
								"thetext": "I opened 3 issues in Heimdal project:\n\nhttps://github.com/heimdal/heimdal/issues/1001\nhttps://github.com/heimdal/heimdal/issues/1002\nhttps://github.com/heimdal/heimdal/issues/1003"
							},
							{
								"isprivate": "0",
								"commentid": "16545154",
								"comment_count": "9",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-08-10 17:22:53 +0000",
								"thetext": "I opened a feature request[1] for MODP group 2 support in OpenSSL and a bug report[2] about the bit/byte confusion in FFDH parameter verification process.\n\n[1] https://github.com/openssl/openssl/issues/18981\n[2] https://github.com/openssl/openssl/issues/18980"
							},
							{
								"isprivate": "0",
								"commentid": "16548128",
								"comment_count": "10",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-08-11 15:44:41 +0000",
								"thetext": "The KDC callstack from my previous message was using master branch from MIT krb5. This callstack demonstrating the same issue with krb5-1.19.1-16.debug.el9_0.x86_64 (current NVR on RHEL 9.0):\n\n#0  default_mdname (N=1023) at crypto/ffc/ffc_params_generate.c:448\n#1  ossl_ffc_params_FIPS186_4_gen_verify (libctx=0x0, params=0x7fff2004fb30, mode=0, type=1, L=1024, N=1023, res=0x7fff2004fb2c, cb=0x0) at crypto/ffc/ffc_params_generate.c:541\n#2  0x00007f01b41f8403 in ossl_ffc_params_FIPS186_4_validate.constprop.0 (libctx=libctx@entry=0x0, params=params@entry=0x7fff2004fb30, type=type@entry=1, res=res@entry=0x7fff2004fb2c, cb=0x0) at crypto/ffc/ffc_params_validate.c:64\n#3  0x00007f01b41155bc in ossl_ffc_params_simple_validate (libctx=0x0, params=0x56522df01ac8, paramstype=1, res=0x7fff2004fb2c) at crypto/ffc/ffc_params_validate.c:120\n#4  0x00007f01b409602f in generate_key (dh=0x56522df01ac0) at crypto/dh/dh_key.c:337\n#5  generate_key (dh=0x56522df01ac0) at crypto/dh/dh_key.c:256\n#6  0x00007f01b3a58cc6 in server_process_dh (context=context@entry=0x56522de5fc30, plg_cryptoctx=<optimized out>, cryptoctx=<optimized out>, id_cryptoctx=<optimized out>, data=<optimized out>, data_len=132, dh_pubkey_out=0x7fff2004fd00, dh_pubkey_len_out=0x7fff2004fcc8, server_key_out=0x7fff2004fcf8, server_key_len_out=0x7fff2004fccc) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c:2894\n#7  0x00007f01b3a60279 in pkinit_server_return_padata (context=0x56522de5fc30, padata=<optimized out>, req_pkt=0x56522defa340, request=0x56522df0add0, reply=<optimized out>, encrypting_key=0x56522de0ab90, send_pa=0x7fff2004fdf0, cb=0x56522dae9040 <callbacks>, rock=0x56522de0abd8, moddata=0x56522ddebf40, modreq=0x56522def7610) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/plugins/preauth/pkinit/pkinit_srv.c:841\n#8  0x000056522dace913 in return_padata (context=0x56522de5fc30, rock=rock@entry=0x56522de0abd8, req_pkt=0x56522defa340, request=request@entry=0x56522df0add0, reply=reply@entry=0x56522de0ac48, encrypting_key=encrypting_key@entry=0x56522de0ab90, padata_context=0x56522de0ace0) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/kdc_preauth.c:1439\n#9  0x000056522dacf3d6 in finish_process_as_req (state=state@entry=0x56522de0aa50, errcode=errcode@entry=0) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/do_as_req.c:248\n#10 0x000056522dacfaee in finish_preauth (arg=arg@entry=0x56522de0aa50, code=0) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/do_as_req.c:465\n#11 0x000056522daceb85 in finish_check_padata (state=state@entry=0x56522df01320, code=0) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/kdc_preauth.c:1188\n#12 0x000056522dacee57 in finish_verify_padata (arg=0x56522df01320, code=0, modreq=<optimized out>, e_data=0x0, authz_data=0x0) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/kdc_preauth.c:1263\n#13 0x00007f01b3a5bcd8 in pkinit_server_verify_padata (context=0x56522de5fc30, req_pkt=<optimized out>, request=0x56522df0add0, enc_tkt_reply=0x56522de0aa88, data=0x56522de04ab0, cb=<optimized out>, rock=0x56522de0abd8, moddata=0x56522ddebf40, respond=0x56522dacecc1 <finish_verify_padata>, arg=0x56522df01320) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/plugins/preauth/pkinit/pkinit_srv.c:641\n#14 0x000056522dacecb3 in next_padata (state=0x56522df01320) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/kdc_preauth.c:1299\n#15 0x000056522dacef69 in check_padata (context=0x56522de5fc30, rock=rock@entry=0x56522de0abd8, req_pkt=0x56522defa340, request=<optimized out>, enc_tkt_reply=enc_tkt_reply@entry=0x56522de0aa88, padata_context=padata_context@entry=0x56522de0ace0, e_data=0x56522de0ac38, typed_e_data=0x56522de0ac40, respond=0x56522dacfaab <finish_preauth>, arg=0x56522de0aa50) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/kdc_preauth.c:1358\n#16 0x000056522dad1b8b in process_as_req (request=<optimized out>, req_pkt=req_pkt@entry=0x56522defa340, local_addr=local_addr@entry=0x56522defa328, remote_addr=remote_addr@entry=0x56522de09ab0, kdc_active_realm=0x56522dfa8550, vctx=vctx@entry=0x56522de04ad0, respond=0x56522dac9c42 <finish_dispatch_cache>, arg=0x56522de0c700) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/do_as_req.c:775\n#17 0x000056522dad448c in dispatch (cb=0x56522dae9290 <shandle>, local_addr=0x56522defa328, remote_addr=0x56522de09ab0, pkt=0x56522defa340, is_tcp=1, vctx=0x56522de04ad0, respond=0x56522dad9f17 <process_tcp_response>, arg=0x56522defa290) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/dispatch.c:201\n#18 0x000056522dada32a in process_tcp_connection_read (ctx=0x56522de04ad0, ev=<optimized out>) at ../lib/apputils/net-server.c:1359\n#19 0x00007f01b46067fc in verto_fire () from /lib64/libverto.so.1\n#20 0x00007f01b3b4dd83 in ev_invoke_pending () from /lib64/libev.so.4\n#21 0x00007f01b3b51830 in ev_run () from /lib64/libev.so.4\n#22 0x000056522dadd069 in main (argc=3, argv=<optimized out>) at /usr/src/debug/krb5-1.19.1-16.debug.el9_0.x86_64/src/kdc/main.c:1067"
							},
							{
								"isprivate": "0",
								"commentid": "16661538",
								"comment_count": "12",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-09-23 14:13:22 +0000",
								"thetext": "These two Heimdal configuration issues where fixed upstream:\nhttps://github.com/heimdal/heimdal/issues/1001\nhttps://github.com/heimdal/heimdal/issues/1002"
							},
							{
								"isprivate": "0",
								"commentid": "17644440",
								"comment_count": "18",
								"who": {
									"text": "pm-rhel",
									"name": "RHEL Program Management"
								},
								"bug_when": "2023-09-18 19:51:53 +0000",
								"thetext": "Issue migration from Bugzilla to Jira is in process at this time. This will be the last message in Jira copied from the Bugzilla bug."
							},
							{
								"isprivate": "0",
								"commentid": "17644462",
								"comment_count": "19",
								"who": {
									"text": "pm-rhel",
									"name": "RHEL Program Management"
								},
								"bug_when": "2023-09-18 19:54:01 +0000",
								"thetext": "This BZ has been automatically migrated to the issues.redhat.com Red Hat Issue Tracker. All future work related to this report will be managed there.\n\nDue to differences in account names between systems, some fields were not replicated.  Be sure to add yourself to Jira issue's \"Watchers\" field to continue receiving updates and add others to the \"Need Info From\" field to continue requesting information.\n\nTo find the migrated issue, look in the \"Links\" section for a direct link to the new issue location. The issue key will have an icon of 2 footprints next to it, and begin with \"RHEL-\" followed by an integer.  You can also find this issue by visiting https://issues.redhat.com/issues/?jql= and searching the \"Bugzilla Bug\" field for this BZ's number, e.g. a search like:\n\n\"Bugzilla Bug\" = 1234567\n\nIn the event you have trouble locating or viewing this issue, you can file an issue by sending mail to rh-issues@redhat.com. You can also visit https://access.redhat.com/articles/7032570 for general account information."
							}
						]
					}
				],
				"external_bugs": {
					"text": "krb5/pull-request/27",
					"name": "Fedora Package Sources"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "16518771",
						"comment_count": "0",
						"who": {
							"text": "jrische",
							"name": "Julien Rische"
						},
						"bug_when": "2022-08-03 08:47:33 +0000",
						"thetext": "+++ This bug was initially created as a clone of Bug #2068935 +++\n\nDescription of problem:\nThe following test \"/Sanity/heimdal-sanity/\" failed when the MIT client try to do PKINIT with Heimdal KDC. \n\nThe problem is that MIT krb5 does not set \"supportedCMSTypes\" for PKINIT and as a result, the Heimdall sets signature algorithm which uses SHA1.\nhttps://github.com/heimdal/heimdal/blob/heimdal-7.7.0/kdc/pkinit.c#L759\n\nThe possible solution:\n1  Modify Heimdal to use SHA-2 in case supportedCMSTypes is not provided by the client\n2. Add \"supportedCMSTypes\" support into MIT krb5\n\nVersion-Release number of selected component (if applicable):\nopenssl-3.0.1-20.el9_0.x86_64\nkrb5-server-1.19.1-15.el9_0.x86_64\nheimdal-server-7.7.0-6.x86_64\ncrypto-policies=DEFAULT\n\nHow reproducible:\nalways\n\nSteps to Reproduce:\n1. Install Heimdal KDC\n   kstash --random-key\n   heimdal-kadmin --local init --realm-max-ticket-life=unlimited --realm-max-renewable-life=unlimited TEST.REDHAT.COM\n   heimdal-kadmin --realm=TEST.REDHAT.COM --local add --password=alice --max-ticket-life=1d --max-renewable-life=1w --expiration-time=never --pw-expiration-time=never --policy=default --attributes=  alice@TEST.REDHAT.COM\n   Generate certificates for client and KDC with the help of this script:\n   https://gitlab.cee.redhat.com/identity-management/krb5-tests/-/blob/RHEL9.0/tests/Sanity/pkinit-sanity/make_pkinit_cert.sh \n   ./make_pkinit_cert.sh ca ca\n    server certs:\n   ./make_pkinit_cert.sh kdc kdc CA=ca CN=$HostName REALM=TEST.REDHAT.COM CLIENT=$HostName\n   client certs:\n   ./make_pkinit_cert.sh client $krb5User CA=ca CN=$krb5User\"\n   ./make_pkinit_cert.sh client-sign $krb5User CA=ca CN=$krb5User REALM=TEST.REDHAT.COM CLIENT=$krb5User\"\n  \nadd pkinit options into heimdal-kdc.conf\n      pkinit_identity = FILE:/tmp/kdc.pem,/tmp/kdckey.pem\n      pkinit_anchors = FILE:/tmp/cacert.pem\n   systemctl start heimdal-kdc\n\nheimdal-kdc.conf:\n\n[kdc]\n  allow-anonymous = yes\n  pkinit_identity = FILE:/tmp/kdc.pem,/tmp/kdckey.pem\n  pkinit_anchors = FILE:/tmp/cacert.pem\n  enable-pkinit = yes\n  enable-http = true\n\n[kadmin]\n  require-preauth = true\n\n2. Set MIT krb5\n   sed -i \"s/\\[libdefaults\\]/[libdefaults]\\n default_realm = TEST.REDHAT.COM/\" /etc/krb5.conf\n   sed -i \"s/\\[realms\\]/[realms]\\n TEST.REDHAT.COM = {\\n  kdc = $KDC_HostName\\n  admin_server = $KDC_HostName\\n }/\" /etc/krb5.conf\n   sed -i \"s/\\[domain_realm\\]/[domain_realm]\\n .$KDC_DomainName = TEST.REDHAT.COM\\n $DKC_DomainName = TEST.REDHAT.COM/\" /etc/krb5.conf\n\n3. try kinit alice@TEST.REDHAT.COM (with -X parameters: X509_user_identity=FILE:/tmp/alice,pem,X509_anchors=FILE:/tmp/ca.pem) or anonymous pkinit\n\nActual results:\n# kinit -n'\n[8501] 1648404167.147255: Matching WELLKNOWN/ANONYMOUS@TEST.REDHAT.COM in collection with result: -1765328243/Can't find client principal WELLKNOWN/ANONYMOUS@TEST.REDHAT.COM in cache collection\n[8501] 1648404167.147256: Getting initial credentials for WELLKNOWN/ANONYMOUS@TEST.REDHAT.COM\n[8501] 1648404167.147258: Sending unauthenticated request\n[8501] 1648404167.147259: Sending request (213 bytes) to TEST.REDHAT.COM\n...\n[8501] 1648404167.147288: Sending DNS URI query for _kerberos.TEST.REDHAT.COM.\n[8501] 1648404167.147289: No URI records found\n[8501] 1648404167.147290: Sending DNS SRV query for _kerberos-master._udp.TEST.REDHAT.COM.\n[8501] 1648404167.147291: Sending DNS SRV query for _kerberos-master._tcp.TEST.REDHAT.COM.\n[8501] 1648404167.147292: No SRV records found\n[8501] 1648404167.147293: Response was not from primary KDC\n[8501] 1648404167.147294: Processing preauth types: PA-PK-AS-REP (17), PA-PKINIT-KX (147)\n[8501] 1648404167.147295: Preauth module pkinit (147) (info) returned: 0/Success\n[8501] 1648404167.147296: PKINIT OpenSSL error: Failed to verify CMS message\n[8501] 1648404167.147297: PKINIT OpenSSL error: error:1700006B:CMS routines::content type not enveloped data\n[8501] 1648404167.147298: PKINIT OpenSSL error: error:03000098:digital envelope routines::invalid digest\n[8501] 1648404167.147299: PKINIT client could not verify DH reply\n[8501] 1648404167.147300: Preauth module pkinit (17) (real) returned: -1765328320/Failed to verify CMS message: content type not enveloped data\n[8501] 1648404167.147301: Produced preauth for next request: (empty)\n[8501] 1648404167.147302: Salt derived from principal: WELLKNOWN:ANONYMOUSWELLKNOWNANONYMOUS\n[8501] 1648404167.147303: Getting AS key, salt \"WELLKNOWN:ANONYMOUSWELLKNOWNANONYMOUS\", params \"\\x00\\x00\\x10\\x00\"\nPassword for WELLKNOWN/ANONYMOUS@TEST.REDHAT.COM: \n[8501] 1648404193.258727: AS key obtained from gak_fct: aes256-cts/39D4\n[8501] 1648404193.258728: Retrying AS request with primary KDC\n[8501] 1648404193.258729: Getting initial credentials for WELLKNOWN/ANONYMOUS@TEST.REDHAT.COM\n[8501] 1648404193.258731: Sending unauthenticated request\n[8501] 1648404193.258732: Sending request (213 bytes) to TEST.REDHAT.COM (primary)\n[8501] 1648404193.258733: Sending DNS URI query for _kerberos.TEST.REDHAT.COM.\n[8501] 1648404193.258734: No URI records found\n[8501] 1648404193.258735: Sending DNS SRV query for _kerberos-master._udp.TEST.REDHAT.COM.\n[8501] 1648404193.258736: Sending DNS SRV query for _kerberos-master._tcp.TEST.REDHAT.COM.\n[8501] 1648404193.258737: No SRV records found\nkinit: Password incorrect while getting initial credentials\n\nExpected results:\nkinit -n or kinit <user> with pkinit should pass\n\nAdditional info:\nIt works with DEFAULT:SHA1 crypto-policy\n\n--- Additional comment from Julien Rische on 2022-03-28 06:55:54 UTC ---\n\nThe switch to SHA-256 as default digest algorithm in Heimdal[1] is not effective in practice for Kerberos clients which are not implementing algorithm agility for CMS. I think the current Heimdal implementation makes sense for backward compatibility, and setting the \"supportedCMSTypes\" field in MIT krb5 should be the way to go.\n\nUntil this is implemented, I am afraid RHEL9 clients have to enable SHA1 crypto sub-policy if they are authenticating against Heimdal KDC using PKINIT.\n\n[1] https://github.com/heimdal/heimdal/commit/c4c71cc41a2763a23867c7c6a041d1f4f1ebcbf7\n\n--- Additional comment from Julien Rische on 2022-05-31 08:42:26 UTC ---\n\nTo be more precise, the Heimdal KDC expects the attribute \"supportedCMSTypes\" to be set[1]. If not it falls back to one of these ciphers:\n\n* des-ede3-cbc\n* sha1-with-rsa-signature\n* sha-1\n\nAll of them being unavailable on RHEL9.\n\n[1] https://github.com/heimdal/heimdal/blob/heimdal-7.7.0/kdc/pkinit.c#L759-L776\n\n--- Additional comment from Julien Rische on 2022-05-31 10:32:28 UTC ---\n\nAccording to RFC4556[1], the PKINIT client can either indicate supported CMS ciphers as etypes in the AS-REQ, or as OIDs in the \"supportedCMSTypes\" attribute of the AuthPack. All the available etypes for the first method are now referring to deprecated algorithms, hence the only way to advertise recent ciphers it to use \"supportedCMSTypes\".\n\nThis is actually what MIT krb5 is supposed to do because CMS-dedicated etypes are not used at all[2]. The \"supportedCMSTypes\" attribute is actually set in upstream project, but this section of the code was removed[3] in C9S/RHEL release because it was only populated with DES OID. A better approach would be to replace DES, by SHA2-based ciphers. This would allow proper integration with Heimdal.\n\n[1] https://datatracker.ietf.org/doc/html/rfc4556#section-3.1.4\n[2] https://github.com/krb5/krb5/blob/krb5-1.20-final/src/include/krb5/krb5.hin#L427-L433\n[3] https://gitlab.com/redhat/centos-stream/rpms/krb5/-/blob/c9s/downstream-Remove-3des-support.patch#L5786-5793\n\n--- Additional comment from Julien Rische on 2022-06-01 13:29:56 UTC ---\n\nI have successfully run the test with heimdal-7.7.0-11.fc36 on RHEL-9.1.0-20220531.0 using a scratch build[1] using SHA-256 and SHA-512 as supportedCMSTypes.\n\nI think this fix should be implemented upstream to replace DES3[2] by SHA-2, or at least implement a CMS digest list that would be more flexible to configure.\n\n[1] http://brew-task-repos.usersys.redhat.com/repos/scratch/jrische/krb5/1.19.1/21.bz2068935.1.el9_0/x86_64/\n[2] https://github.com/krb5/krb5/blob/krb5-1.20-final/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c#L5495\n\n--- Additional comment from Julien Rische on 2022-06-01 20:28:28 UTC ---\n\nPull request:\nhttps://github.com/krb5/krb5/pull/1254\n\n--- Additional comment from Julien Rische on 2022-07-01 10:21:27 UTC ---\n\nThe following points were raised in the pull request[1]:\n\n* The current upstream implementation set \"supportedCMSTypes\" with an algorithm which is unsupported by Heimdal, resulting in default digest and signature algorithms (sha256 and sha256WithRSAEncryption) being selected. Hence, the SHA-1 signature verification issue does not occur with upstream version.\n\n* Under strict interpretation of RFC 4556 section 3.2.1 step 5[2], only signature algorithm OIDs are allowed in \"supportedCMSTypes\" (not digest algorithms).\n\n* Test showed that AD is ignoring the content or \"suuportedCMSTypes\". Also, AD KDC does not support SHA2-based algorithms. Removing dependency on SHA-1 for AD interoperability would require implementing RFC 5349 (ECC for PKINIT)[3].\n\n* Heimdal and OpenSSL are implementing the verification of CMS data signature in incompatible ways: OpenSSL seems to only be looking at the digest algorithm, not taking the signature one into account. As a consequence, when they are not relying on the same hashing algorithm (e.g. sha512 as digest and sha256WithRSAEncryption as signature), verification fails because the signature is compared to a different type of digest.\n\n[1] https://github.com/krb5/krb5/pull/1254\n[2] https://www.rfc-editor.org/rfc/rfc4556.html#page-12\n[3] https://www.rfc-editor.org/rfc/rfc5349.html\n[4] https://github.com/openssl/openssl/blob/openssl-3.0.1/crypto/cms/cms_sd.c#L788\n[5] https://github.com/openssl/openssl/blob/openssl-3.0.1/crypto/cms/cms_sd.c#L963\n\n--- Additional comment from Julien Rische on 2022-07-06 12:15:38 UTC ---\n\nPostponed again because the CMS incompatibility issue is being discussed with Heimdal and OpenSSL teams:\n\nhttps://github.com/heimdal/heimdal/issues/1000\nhttps://github.com/openssl/openssl/issues/18729"
					},
					{
						"isprivate": "0",
						"commentid": "16538209",
						"comment_count": "1",
						"who": {
							"text": "bcotton",
							"name": "Ben Cotton"
						},
						"bug_when": "2022-08-09 13:35:37 +0000",
						"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
					},
					{
						"isprivate": "0",
						"commentid": "16842174",
						"comment_count": "2",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 15:02:20 +0000",
						"thetext": "FEDORA-2022-8050ab2c35 has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35"
					},
					{
						"isprivate": "0",
						"commentid": "16842574",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 17:37:51 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e"
					},
					{
						"isprivate": "0",
						"commentid": "16856883",
						"comment_count": "4",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-07 13:28:59 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
					}
				]
			}
		},
		{
			"bug_id": 2119704,
			"feedback": [
				{
					"bug_id": 2119704,
					"comment": {
						"id": 2804413,
						"karma": -1,
						"text": "this wasn't meant to be on mainline yet, per @ab .",
						"timestamp": "2022-12-01 17:20:53",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
							"email": "awilliam@redhat.com",
							"groups": [
								{
									"name": "proventesters"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "packager"
								},
								{
									"name": "qa-tools-sig"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "news"
								},
								{
									"name": "gittriage"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "gitgeneric-release"
								},
								{
									"name": "yak_farmers"
								},
								{
									"name": "triagers"
								},
								{
									"name": "qa"
								},
								{
									"name": "sysadmin-qa"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "gitmkinitrd"
								},
								{
									"name": "qa-admin"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "common-issues-triage"
								},
								{
									"name": "aws-qa"
								},
								{
									"name": "gitfedora-project-schedule"
								},
								{
									"name": "change-wranglers"
								},
								{
									"name": "fedora-ci-admins"
								},
								{
									"name": "program-management"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 302,
							"name": "adamwill",
							"openid": "adamwill.id.fedoraproject.org"
						},
						"user_id": 302
					},
					"comment_id": 2804413
				},
				{
					"bug_id": 2119704,
					"comment": {
						"id": 2804415,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:05",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
							"email": "klember@redhat.com",
							"groups": [
								{
									"name": "qa"
								},
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "gnome-sig"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "hosted-content"
								},
								{
									"name": "flatpak-sig"
								}
							],
							"id": 285,
							"name": "kalev",
							"openid": "kalev.id.fedoraproject.org"
						},
						"user_id": 285
					},
					"comment_id": 2804415
				},
				{
					"bug_id": 2119704,
					"comment": {
						"id": 2804418,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:19",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
							"email": "decathorpe@gmail.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "packaging-committee"
								},
								{
									"name": "libreoffice-sig"
								},
								{
									"name": "multimedia-sig"
								},
								{
									"name": "diversity-pride"
								},
								{
									"name": "pantheon-sig"
								}
							],
							"id": 388,
							"name": "decathorpe",
							"openid": "decathorpe.id.fedoraproject.org"
						},
						"user_id": 388
					},
					"comment_id": 2804418
				},
				{
					"bug_id": 2119704,
					"comment": {
						"id": 2804444,
						"karma": -1,
						"timestamp": "2022-12-01 17:34:34",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
							"email": "mboddu@bhujji.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "bodhiadmin"
								},
								{
									"name": "releng-team"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "sysadmin-web"
								},
								{
									"name": "sysadmin-releng"
								},
								{
									"name": "sysadmin-bodhi"
								},
								{
									"name": "cvsadmin"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "torrentadmin"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "epel-cabal"
								},
								{
									"name": "signers"
								},
								{
									"name": "sysadmin-cvs"
								}
							],
							"id": 2990,
							"name": "mohanboddu",
							"openid": "mohanboddu.id.fedoraproject.org"
						},
						"user_id": 2990
					},
					"comment_id": 2804444
				},
				{
					"bug_id": 2119704,
					"comment": {
						"id": 2804446,
						"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
						"timestamp": "2022-12-01 17:36:29",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2804446
				}
			],
			"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]",
			"bugzilla": {
				"bug_id": "2119704",
				"creation_ts": "2022-08-19 08:49:24 +0000",
				"short_desc": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]",
				"delta_ts": "2023-01-13 14:43:33 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Triaged",
				"priority": "unspecified",
				"bug_severity": "unspecified",
				"depends_on": [
					"2063838"
				],
				"external_bugs": {
					"text": "krb5/pull-request/27",
					"name": "Fedora Package Sources"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "16566522",
						"comment_count": "0",
						"who": {
							"text": "jrische",
							"name": "Julien Rische"
						},
						"bug_when": "2022-08-19 08:49:24 +0000",
						"thetext": "+++ This bug was initially created as a clone of Bug #2063838 +++\n\nThe signature verification part of the krb5 PKINIT plugin was initially implemented using PKCS7_verify[1], and error handling was written according to this function[2].\n\nThis code was modified[3] to use CMS_verify[4] when building against >= OpenSSL 1.0, but kept PKCS7_verify error codes handling.\n\nAs a consequence, the KDC_ERR_DIGEST_IN_SIGNED_DATA_NOT_ACCEPTED error, which should explain the digest algorithm is not support is no raised and an unrelated error is displayed:\n\n\"Failed to verify CMS message: content type not enveloped data\"\n\nActual CMS_verify error codes should be handled.\n\n[1] https://www.openssl.org/docs/man3.0/man3/PKCS7_verify.html\n[2] https://github.com/krb5/krb5/blob/0ef0646069c1d1376aa632a4791ea7e429f5ae9b/src/plugins/preauth/pkinit/pkinit_crypto_openssl.c#L1290-L1297\n[3] https://github.com/krb5/krb5/commit/1b57e7650da41dbef6a50c6e925583d6c8ed9e52#diff-4aab62556d7562101df00d240f5444ed99a48a8e00d06c57a9bf5cb29b8a1ea8R1395\n[4] https://www.openssl.org/docs/man3.0/man3/CMS_verify.html\n\n--- Additional comment from Julien Rische on 2022-07-29 15:51:59 UTC ---\n\nThere are 2 points to fix:\n\n  * Error codes have to be modified to match the new function.\n  * The last error from OpenSSL stack should be picked rather that the first one which is always CMS_R_CONTENT_TYPE_NOT_ENVELOPED_DATA[1], therefore it does not allow to differentiate an error caused by an unaccepted digest algorithm and an invalid signature.\n\nThe error code we could expect based on the code of OpenSSL CMS signature verification are:\n\n  * CMS_R_NO_MATCHING_DIGEST[2]\n  * CMS_R_NO_MATCHING_SIGNATURE (not used in practice)\n  * CMS_R_UNKNOWN_DIGEST_ALGORITHM[3]\n\nBut I've run some tests and the error codes that seems to be actually raised are:\n\n  * EVP_R_INVALID_DIGEST: the OID is recognized the algorithm is not allowed by the policy in signature verification\n  * RSA_R_DIGEST_NOT_ALLOWED: OpenSSL fails to infer a signature algorithm based on the digest one and the key type (the more generic code PROV_R_DIGEST_NOT_ALLOWED might be considered too)\n  * CMS_R_VERIFICATION_FAILURE: signature verification failed\n\nWe should use ERR_peek_last_error()[4] instead of ERR_peek_error() in order to get these error codes.\n\n\n[1] https://github.com/openssl/openssl/blob/openssl-3.0.1/crypto/cms/cms_err.c#L45-L46\n[2] https://github.com/openssl/openssl/blob/openssl-3.0.1/crypto/cms/cms_lib.c#L458\n[3] https://github.com/openssl/openssl/blob/openssl-3.0.1/crypto/cms/cms_sd.c#L869\n[4] https://www.openssl.org/docs/man3.0/man3/ERR_peek_last_error.html\n\n--- Additional comment from Julien Rische on 2022-08-02 07:40:20 UTC ---\n\nPull request:\nhttps://github.com/krb5/krb5/pull/1264\n\n--- Additional comment from Julien Rische on 2022-08-19 08:47:10 UTC ---\n\nEVP_R_INVALID_DIGEST is actually raised by code in a downstream OpenSSL patch[1]. I will handle it in a krb5 downstream patch too.\n\n[1] https://src.fedoraproject.org/rpms/openssl/blob/rawhide/f/0049-Allow-disabling-of-SHA1-signatures.patch#_217"
					},
					{
						"isprivate": "0",
						"commentid": "16842175",
						"comment_count": "1",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 15:02:24 +0000",
						"thetext": "FEDORA-2022-8050ab2c35 has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35"
					},
					{
						"isprivate": "0",
						"commentid": "16842575",
						"comment_count": "2",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 17:37:54 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e"
					},
					{
						"isprivate": "0",
						"commentid": "16856884",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-07 13:29:02 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
					}
				]
			}
		},
		{
			"bug_id": 2124463,
			"feedback": [
				{
					"bug_id": 2124463,
					"comment": {
						"id": 2804413,
						"karma": -1,
						"text": "this wasn't meant to be on mainline yet, per @ab .",
						"timestamp": "2022-12-01 17:20:53",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
							"email": "awilliam@redhat.com",
							"groups": [
								{
									"name": "proventesters"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "packager"
								},
								{
									"name": "qa-tools-sig"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "news"
								},
								{
									"name": "gittriage"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "gitgeneric-release"
								},
								{
									"name": "yak_farmers"
								},
								{
									"name": "triagers"
								},
								{
									"name": "qa"
								},
								{
									"name": "sysadmin-qa"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "gitmkinitrd"
								},
								{
									"name": "qa-admin"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "common-issues-triage"
								},
								{
									"name": "aws-qa"
								},
								{
									"name": "gitfedora-project-schedule"
								},
								{
									"name": "change-wranglers"
								},
								{
									"name": "fedora-ci-admins"
								},
								{
									"name": "program-management"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 302,
							"name": "adamwill",
							"openid": "adamwill.id.fedoraproject.org"
						},
						"user_id": 302
					},
					"comment_id": 2804413
				},
				{
					"bug_id": 2124463,
					"comment": {
						"id": 2804415,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:05",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
							"email": "klember@redhat.com",
							"groups": [
								{
									"name": "qa"
								},
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "gnome-sig"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "hosted-content"
								},
								{
									"name": "flatpak-sig"
								}
							],
							"id": 285,
							"name": "kalev",
							"openid": "kalev.id.fedoraproject.org"
						},
						"user_id": 285
					},
					"comment_id": 2804415
				},
				{
					"bug_id": 2124463,
					"comment": {
						"id": 2804418,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:19",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
							"email": "decathorpe@gmail.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "packaging-committee"
								},
								{
									"name": "libreoffice-sig"
								},
								{
									"name": "multimedia-sig"
								},
								{
									"name": "diversity-pride"
								},
								{
									"name": "pantheon-sig"
								}
							],
							"id": 388,
							"name": "decathorpe",
							"openid": "decathorpe.id.fedoraproject.org"
						},
						"user_id": 388
					},
					"comment_id": 2804418
				},
				{
					"bug_id": 2124463,
					"comment": {
						"id": 2804444,
						"karma": -1,
						"timestamp": "2022-12-01 17:34:34",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
							"email": "mboddu@bhujji.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "bodhiadmin"
								},
								{
									"name": "releng-team"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "sysadmin-web"
								},
								{
									"name": "sysadmin-releng"
								},
								{
									"name": "sysadmin-bodhi"
								},
								{
									"name": "cvsadmin"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "torrentadmin"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "epel-cabal"
								},
								{
									"name": "signers"
								},
								{
									"name": "sysadmin-cvs"
								}
							],
							"id": 2990,
							"name": "mohanboddu",
							"openid": "mohanboddu.id.fedoraproject.org"
						},
						"user_id": 2990
					},
					"comment_id": 2804444
				},
				{
					"bug_id": 2124463,
					"comment": {
						"id": 2804446,
						"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
						"timestamp": "2022-12-01 17:36:29",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2804446
				}
			],
			"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]",
			"bugzilla": {
				"bug_id": "2124463",
				"creation_ts": "2022-09-06 08:43:12 +0000",
				"short_desc": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]",
				"delta_ts": "2023-05-24 09:27:32 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Triaged",
				"priority": "unspecified",
				"bug_severity": "unspecified",
				"depends_on": [
					"2016312"
				],
				"blocked": [
					{
						"bug_id": "1956994",
						"creation_ts": "2021-05-04 19:56:28 +0000",
						"short_desc": "CVE-2020-17049 krb5: Kerberos: delegation constrain bypass in S4U2Proxy [rhel-9]",
						"delta_ts": "2023-05-09 10:41:51 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"bug_file_loc": "https://github.com/krb5/krb5/pull/1159",
						"keywords": "Security, SecurityTracking, Triaged",
						"priority": "urgent",
						"bug_severity": "medium",
						"depends_on": [
							"1913254",
							"2016312",
							"2124463"
						],
						"blocked": [
							{
								"bug_id": "2025721",
								"alias": "CVE-2020-17049",
								"creation_ts": "2021-11-22 20:03:47 +0000",
								"short_desc": "CVE-2020-17049 Kerberos: delegation constrain bypass in S4U2Proxy",
								"delta_ts": "2024-04-10 19:51:53 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "Security",
								"priority": "medium",
								"bug_severity": "medium",
								"depends_on": [
									"1913254",
									"1956994",
									"2026711",
									"2026712",
									"2026713"
								],
								"blocked": [
									{
										"bug_id": "2018583",
										"error": "NotPermitted"
									}
								],
								"external_bugs": {
									"text": "RHSA-2024:0252",
									"name": "Red Hat Product Errata"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "15705710",
										"comment_count": "0",
										"who": {
											"text": "cbuissar",
											"name": "Cedric Buissart"
										},
										"bug_when": "2021-11-22 20:03:47 +0000",
										"thetext": "A security feature bypass vulnerability exists in the way Key Distribution Center (KDC) determines if a service ticket can be used for delegation via Kerberos Constrained Delegation (KCD).\nTo exploit the vulnerability, a compromised service that is configured to use KCD could tamper with a service ticket that is not valid for delegation to force the KDC to accept it."
									},
									{
										"isprivate": "0",
										"commentid": "15714287",
										"comment_count": "5",
										"who": {
											"text": "cbuissar",
											"name": "Cedric Buissart"
										},
										"bug_when": "2021-11-25 15:00:52 +0000",
										"thetext": "Created krb5 tracking bugs for this issue:\n\nAffects: fedora-all [bug 2026712]\n\n\nCreated samba tracking bugs for this issue:\n\nAffects: fedora-all [bug 2026711]"
									},
									{
										"isprivate": "0",
										"commentid": "17258115",
										"comment_count": "15",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2023-05-09 07:59:48 +0000",
										"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 9\n\nVia RHSA-2023:2570 https://access.redhat.com/errata/RHSA-2023:2570"
									},
									{
										"isprivate": "0",
										"commentid": "17261004",
										"comment_count": "16",
										"who": {
											"text": "prodsec-dev",
											"name": "Product Security DevOps Team"
										},
										"bug_when": "2023-05-09 15:42:44 +0000",
										"thetext": "This bug is now closed. Further updates for individual products will be reflected on the CVE page(s):\n\nhttps://access.redhat.com/security/cve/cve-2020-17049"
									},
									{
										"isprivate": "0",
										"commentid": "17833817",
										"comment_count": "17",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2024-01-10 12:27:42 +0000",
										"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.8 Extended Update Support\n\nVia RHSA-2024:0137 https://access.redhat.com/errata/RHSA-2024:0137"
									},
									{
										"isprivate": "0",
										"commentid": "17833869",
										"comment_count": "18",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2024-01-10 13:10:32 +0000",
										"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.6 Extended Update Support\n\nVia RHSA-2024:0139 https://access.redhat.com/errata/RHSA-2024:0139"
									},
									{
										"isprivate": "0",
										"commentid": "17833912",
										"comment_count": "19",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2024-01-10 13:34:13 +0000",
										"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8\n\nVia RHSA-2024:0143 https://access.redhat.com/errata/RHSA-2024:0143"
									},
									{
										"isprivate": "0",
										"commentid": "17841472",
										"comment_count": "21",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2024-01-15 15:46:33 +0000",
										"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.6 Extended Update Support\n\nVia RHSA-2024:0252 https://access.redhat.com/errata/RHSA-2024:0252"
									}
								]
							}
						],
						"external_bugs": {
							"text": "RHSA-2023:2570",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "15714327",
								"comment_count": "8",
								"who": {
									"text": "cbuissar",
									"name": "Cedric Buissart"
								},
								"bug_when": "2021-11-25 15:19:12 +0000",
								"thetext": "*** Bug 2026713 has been marked as a duplicate of this bug. ***"
							},
							{
								"isprivate": "0",
								"commentid": "17259381",
								"comment_count": "19",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2023-05-09 08:25:24 +0000",
								"thetext": "Since the problem described in this bug report should be\nresolved in a recent advisory, it has been closed with a\nresolution of ERRATA.\n\nFor information on the advisory (Moderate: krb5 security, bug fix, and enhancement update), and where to find the updated\nfiles, follow the link below.\n\nIf the solution does not work for you, open a new bug report.\n\nhttps://access.redhat.com/errata/RHSA-2023:2570"
							}
						]
					},
					{
						"bug_id": "2060421",
						"creation_ts": "2022-03-03 13:57:09 +0000",
						"short_desc": "Invalid KDC signature encryption type for PAC [rhel-9]",
						"delta_ts": "2023-11-07 11:40:02 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Triaged",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"2016312",
							"2027125",
							"2124463"
						],
						"blocked": [
							{
								"bug_id": "2209621",
								"creation_ts": "2023-05-24 09:27:32 +0000",
								"short_desc": "Invalid KDC signature encryption type for PAC [rawhide]",
								"delta_ts": "2024-02-19 17:00:17 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "Triaged",
								"priority": "unspecified",
								"bug_severity": "unspecified",
								"depends_on": [
									"2016312",
									"2027125",
									"2060421",
									"2124463"
								],
								"external_bugs": {
									"text": "FREEIPA-9915",
									"name": "Red Hat Issue Tracker"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "17313664",
										"comment_count": "0",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2023-05-24 09:27:32 +0000",
										"thetext": "+++ This bug was initially created as a clone of Bug #2060421 +++\n\n[root@master ~]# ipa trust-find\n---------------\n1 trust matched\n---------------\n  Realm name: win19-13r8.test\n  Domain NetBIOS name: WIN19-13R8\n  Domain Security Identifier: S-1-5-21-3829174166-1252505095-3327585824\n  Trust type: Active Directory domain\n----------------------------\nNumber of entries returned 1\n----------------------------\n\n\n[root@master ~]# klist -e\nTicket cache: KCM:0\nDefault principal: admin@TESTREALM1WAY.TEST\n\nValid starting       Expires              Service principal\n03/03/2022 08:42:50  03/04/2022 08:19:50  HTTP/master.testrealm1way.test@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n03/03/2022 08:42:48  03/04/2022 08:19:50  krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n[root@master ~]# KRB5_TRACE=/dev/stderr kvno -S cifs ad1-13r8.win19-13r8.test\n[24932] 1646315147.757589: Getting credentials admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST using ccache KCM:0\n[24932] 1646315147.757590: Retrieving admin@TESTREALM1WAY.TEST -> krb5_ccache_conf_data/start_realm@X-CACHECONF: from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757591: Retrieving admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757592: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757593: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST from KCM:0 with result: 0/Success\n[24932] 1646315147.757594: Starting with TGT for client realm: admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757595: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757596: Requesting TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST using TGT krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757597: Generated subkey for TGS request: aes256-sha2/107C\n[24932] 1646315147.757598: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757600: Encoding request body and padata into FAST request\n[24932] 1646315147.757601: Sending request (1948 bytes) to TESTREALM1WAY.TEST\n[24932] 1646315147.757602: Initiating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757603: Sending TCP request to stream 10.0.199.42:88\n[24932] 1646315147.757604: Received answer (1804 bytes) from stream 10.0.199.42:88\n[24932] 1646315147.757605: Terminating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757606: Response was from primary KDC\n[24932] 1646315147.757607: Decoding FAST response\n[24932] 1646315147.757608: FAST reply key: aes256-sha2/3569\n[24932] 1646315147.757609: TGS reply is for admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST with session key aes256-cts/349C\n[24932] 1646315147.757610: TGS request result: 0/Success\n[24932] 1646315147.757611: Received TGT for WIN19-13R8.TEST; advancing current realm\n[24932] 1646315147.757612: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757613: Requesting TGT krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST using TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757614: Generated subkey for TGS request: aes256-cts/6248\n[24932] 1646315147.757615: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757617: Encoding request body and padata into FAST request\n[24932] 1646315147.757618: Sending request (1812 bytes) to WIN19-13R8.TEST\n[24932] 1646315147.757619: Initiating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757620: Sending TCP request to stream 10.0.199.57:88\n[24932] 1646315147.757621: Received answer (331 bytes) from stream 10.0.199.57:88\n[24932] 1646315147.757622: Terminating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757623: Response was from primary KDC\n[24932] 1646315147.757624: Decoding FAST response\n[24932] 1646315147.757625: TGS request result: -1765328324/Generic error (see e-text)\nkvno: Generic error (see e-text) while getting credentials for cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST\n\nFrom krb5kdc.log:\nMar 03 08:45:47 master.testrealm1way.test krb5kdc[24353](info): TGS_REQ (4 etypes {aes256-cts-hmac-sha384-192(20), aes256-cts-hmac-sha1-96(18), aes128-cts-hmac-sha256-128(19), aes128-cts-hmac-sha1-96(17)}) 10.0.199.42: ISSUE: authtime 1646314968, etypes {rep=aes256-cts-hmac-sha384-192(20), tkt=aes256-cts-hmac-sha1-96(18), ses=aes256-cts-hmac-sha1-96(18)}, admin@TESTREALM1WAY.TEST for krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n\nI think we've seen this issue when developing krb5 1.20 upstream, so it needs to be re-verified with 1.20 when rebase happens."
									},
									{
										"isprivate": "0",
										"commentid": "17386094",
										"comment_count": "1",
										"who": {
											"text": "updates",
											"name": "Fedora Update System"
										},
										"bug_when": "2023-06-13 13:41:25 +0000",
										"thetext": "FEDORA-2023-5cd7789569 has been submitted as an update to Fedora 39. https://bodhi.fedoraproject.org/updates/FEDORA-2023-5cd7789569"
									},
									{
										"isprivate": "0",
										"commentid": "17386152",
										"comment_count": "2",
										"who": {
											"text": "updates",
											"name": "Fedora Update System"
										},
										"bug_when": "2023-06-13 13:55:32 +0000",
										"thetext": "FEDORA-2023-5cd7789569 has been pushed to the Fedora 39 stable repository.\nIf problem still persists, please make note of it in this bug report."
									},
									{
										"isprivate": "0",
										"commentid": "17541193",
										"comment_count": "3",
										"who": {
											"text": "releng",
											"name": "Fedora Release Engineering"
										},
										"bug_when": "2023-08-16 07:14:28 +0000",
										"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 39 development cycle.\nChanging version to 39."
									}
								]
							}
						],
						"external_bugs": {
							"text": "redhat/centos-stream/rpms/krb5/-/merge_requests/40",
							"name": "Gitlab"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "16009195",
								"comment_count": "0",
								"who": {
									"text": "abokovoy",
									"name": "Alexander Bokovoy"
								},
								"bug_when": "2022-03-03 13:57:09 +0000",
								"thetext": "[root@master ~]# ipa trust-find\n---------------\n1 trust matched\n---------------\n  Realm name: win19-13r8.test\n  Domain NetBIOS name: WIN19-13R8\n  Domain Security Identifier: S-1-5-21-3829174166-1252505095-3327585824\n  Trust type: Active Directory domain\n----------------------------\nNumber of entries returned 1\n----------------------------\n\n\n[root@master ~]# klist -e\nTicket cache: KCM:0\nDefault principal: admin@TESTREALM1WAY.TEST\n\nValid starting       Expires              Service principal\n03/03/2022 08:42:50  03/04/2022 08:19:50  HTTP/master.testrealm1way.test@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n03/03/2022 08:42:48  03/04/2022 08:19:50  krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n[root@master ~]# KRB5_TRACE=/dev/stderr kvno -S cifs ad1-13r8.win19-13r8.test\n[24932] 1646315147.757589: Getting credentials admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST using ccache KCM:0\n[24932] 1646315147.757590: Retrieving admin@TESTREALM1WAY.TEST -> krb5_ccache_conf_data/start_realm@X-CACHECONF: from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757591: Retrieving admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757592: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757593: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST from KCM:0 with result: 0/Success\n[24932] 1646315147.757594: Starting with TGT for client realm: admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757595: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757596: Requesting TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST using TGT krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757597: Generated subkey for TGS request: aes256-sha2/107C\n[24932] 1646315147.757598: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757600: Encoding request body and padata into FAST request\n[24932] 1646315147.757601: Sending request (1948 bytes) to TESTREALM1WAY.TEST\n[24932] 1646315147.757602: Initiating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757603: Sending TCP request to stream 10.0.199.42:88\n[24932] 1646315147.757604: Received answer (1804 bytes) from stream 10.0.199.42:88\n[24932] 1646315147.757605: Terminating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757606: Response was from primary KDC\n[24932] 1646315147.757607: Decoding FAST response\n[24932] 1646315147.757608: FAST reply key: aes256-sha2/3569\n[24932] 1646315147.757609: TGS reply is for admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST with session key aes256-cts/349C\n[24932] 1646315147.757610: TGS request result: 0/Success\n[24932] 1646315147.757611: Received TGT for WIN19-13R8.TEST; advancing current realm\n[24932] 1646315147.757612: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757613: Requesting TGT krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST using TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757614: Generated subkey for TGS request: aes256-cts/6248\n[24932] 1646315147.757615: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757617: Encoding request body and padata into FAST request\n[24932] 1646315147.757618: Sending request (1812 bytes) to WIN19-13R8.TEST\n[24932] 1646315147.757619: Initiating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757620: Sending TCP request to stream 10.0.199.57:88\n[24932] 1646315147.757621: Received answer (331 bytes) from stream 10.0.199.57:88\n[24932] 1646315147.757622: Terminating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757623: Response was from primary KDC\n[24932] 1646315147.757624: Decoding FAST response\n[24932] 1646315147.757625: TGS request result: -1765328324/Generic error (see e-text)\nkvno: Generic error (see e-text) while getting credentials for cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST\n\nFrom krb5kdc.log:\nMar 03 08:45:47 master.testrealm1way.test krb5kdc[24353](info): TGS_REQ (4 etypes {aes256-cts-hmac-sha384-192(20), aes256-cts-hmac-sha1-96(18), aes128-cts-hmac-sha256-128(19), aes128-cts-hmac-sha1-96(17)}) 10.0.199.42: ISSUE: authtime 1646314968, etypes {rep=aes256-cts-hmac-sha384-192(20), tkt=aes256-cts-hmac-sha1-96(18), ses=aes256-cts-hmac-sha1-96(18)}, admin@TESTREALM1WAY.TEST for krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n\nI think we've seen this issue when developing krb5 1.20 upstream, so it needs to be re-verified with 1.20 when rebase happens."
							},
							{
								"isprivate": "0",
								"commentid": "16009205",
								"comment_count": "1",
								"who": {
									"text": "abokovoy",
									"name": "Alexander Bokovoy"
								},
								"bug_when": "2022-03-03 13:58:56 +0000",
								"thetext": "This is for two-way trust between IPA and Active Directory."
							},
							{
								"isprivate": "0",
								"commentid": "16009620",
								"comment_count": "2",
								"who": {
									"text": "abokovoy",
									"name": "Alexander Bokovoy"
								},
								"bug_when": "2022-03-03 15:34:40 +0000",
								"thetext": "Reproduction steps:\n\n1. Install RHEL in FIPS mode\n2. Run 'update-crypto-policies --set FIPS:AD-SUPPORT'\n3. Install RHEL IdM in FIPS mode and enable for trust (ipa-server-install --setup-adtrust --setup-dns ...)\n4. Establish trust with AD (ipa trust-add ad.domain --two-way=true)\n5. Try to acquire a ticket to a service on AD side like in the description."
							},
							{
								"isprivate": "0",
								"commentid": "16054017",
								"comment_count": "6",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-03-16 12:00:51 +0000",
								"thetext": "According to the Windows documentation[1], the root cause of KRB_ERR_GENERIC (0x3C) can be one of the following ones:\n\n* Group membership has overloaded the PAC.\n* Multiple recent password changes have not propagated.\n* Crypto subsystem error caused by running out of memory.\n* SPN too long.\n* SPN has too many parts.\n\nI guess here, it's probably a cryptographic error. I still have to figure out how I can get this kind of logs on Windows Server.\n\n[1] https://docs.microsoft.com/en-us/windows/security/threat-protection/auditing/event-4769"
							},
							{
								"isprivate": "0",
								"commentid": "16661942",
								"comment_count": "27",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-09-23 15:56:00 +0000",
								"thetext": "Cross-realm IPA/AD TGS and S4U2Self requests are failing because the PAC \"KDC (privilege server)\" checksum (which is in fact a signature) generated by MIT krb5 is using the strongest encryption type permitted by the Kerberos configuration. In IPA's case, since support for RFC8009[1]'s encryption types was added[2], this encryption type is AES256-CTS-HMAC-SHA384-192.\n\nHowever, the only supported encryption types allowed for this purpose by MS-PAC[3] are:\n\n * RC4-HMAC (which is no longer allowed by RHEL MIT krb5)\n * AES128-CTS-HMAC-SHA1-96\n * AES256-CTS-HMAC-SHA1-96\n\nAs a consequence, AD rejects the PACs generated by IPA since they contain unsupported checksum types. A way to filter encryption types used for PAC signatures has to be added to MIT krb5. This is being discussed upstream[4].\n\n\nKerberos\n    Record Mark: 2605 bytes\n    tgs-req\n        pvno: 5\n        msg-type: krb-tgs-req (12)\n        padata: 4 items\n            PA-DATA pA-TGS-REQ\n                padata-type: pA-TGS-REQ (1)\n                    padata-value: 6e8206ab308206a7a003020105a10302010ea20703050000000000a38205bc618205b830…\n                        ap-req\n                            pvno: 5\n                            msg-type: krb-ap-req (14)\n                            Padding: 0\n                            ap-options: 00000000\n                            ticket\n                                tkt-vno: 5\n                                realm: TESTREALM.TEST\n                                sname\n                                enc-part\n                                    etype: eTYPE-AES256-CTS-HMAC-SHA1-96 (18)\n                                    kvno: 1\n                                    cipher: 7dffe293c57e857d0467a517d247a0380bfddc9e3b102bd2607da2d7e704b91ecdc8e675…\n                                        Decrypted keytype 18 usage 2 using keytab principal krbtgt/AD-5NXB.TEST@TESTREALM.TEST (id=keytab.79 same=0) (422399f7...)\n                                        encTicketPart\n                                            Padding: 0\n                                            flags: 40290000\n                                            key\n                                            crealm: TESTREALM.TEST\n                                            cname\n                                            transited\n                                            authtime: 2022-09-21 13:29:22 (UTC)\n                                            endtime: 2022-09-22 13:04:45 (UTC)\n                                            authorization-data: 2 items\n                                                AuthorizationData item\n                                                    ad-type: aD-IF-RELEVANT (1)\n                                                    ad-data: 308203fa308203f6a00402020080a18203ec048203e80700000000000000010000000002…\n                                                        AuthorizationData item\n                                                            ad-type: aD-WIN2K-PAC (128)\n                                                            ad-data: 0700000000000000010000000002000078000000000000000c000000d600000078020000…\n                                                                Verified Server checksum 16 keytype 18 using keytab principal krbtgt/AD-5NXB.TEST@TESTREALM.TEST (id=keytab.79 same=0) (422399f7...)\n                                                                Verified KDC checksum 20 keytype 20 using keytab principal krbtgt/TESTREALM.TEST@TESTREALM.TEST (id=keytab.6 same=0) (ed71e537...)\n                                                                Num Entries: 7\n                                                                Version: 0\n                                                                Type: Logon Info (1)\n                                                                Type: UPN DNS Info (12)\n                                                                Type: Unknown (17)\n                                                                Type: Unknown (18)\n                                                                Type: Client Info Type (10)\n                                                                Type: Server Checksum (6)\n                                                                Type: Privsvr Checksum (7)\n                                                                    Size: 28\n                                                                    Offset: 968\n                                                                    PAC_PRIVSVR_CHECKSUM: 14000000023601ab62a5ea65a8221c6683a38000eab07a107d34d385\n                                                                        Type: 20\n                                                                        Signature: 023601ab62a5ea65a8221c6683a38000eab07a107d34d385\n\n\n[1] https://datatracker.ietf.org/doc/html/rfc8009\n[2] https://pagure.io/freeipa/c/09d5b938c128d8bb01ae40b5d736a266c6075b39\n[3] https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-pac/3122bf00-ea87-4c3f-92a0-91c0a99f5eec\n[4] https://github.com/krb5/krb5/pull/1268"
							},
							{
								"isprivate": "0",
								"commentid": "16661990",
								"comment_count": "28",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-09-23 16:17:38 +0000",
								"thetext": "(In reply to Julien Rische from comment #27)\n> Cross-realm IPA/AD TGS and S4U2Self requests are failing because the PAC\n> \"KDC (privilege server)\" checksum (which is in fact a signature) generated\n> by MIT krb5 is using the strongest encryption type permitted by the Kerberos\n> configuration.\n\nActually it is not based on the strongest permitted encryption type setting, but on the strongest encryption type key of the krbtgt/<realm>@<realm> entry."
							},
							{
								"isprivate": "0",
								"commentid": "17492340",
								"comment_count": "49",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2023-07-28 12:39:35 +0000",
								"thetext": "Created attachment 1980434\nfreeipa-4.10.2-1.fc38 no support for enctype on S4U2Proxy\n\nThe pac_privsvr_enctype string attribute allowing to configure the encryption type of the KDC signature should fix this issue in krb5 1.21. However I face the following error on Fedora 38 with the freeipa-4.10.2-1.fc38 update[1]:\n\n$ KRB5_TRACE=/dev/stderr kvno -U admin@IPA.TEST -P cifs/dc-ut96.ad-ut96.test@AD-UT96.TEST\n[13475] 1690302326.763953: Getting credentials admin\\@IPA.TEST@IPA.TEST -> host/cli.ipa.test@IPA.TEST using ccache KCM:0\n[13475] 1690302326.763954: Retrieving host/cli.ipa.test@IPA.TEST -> krb5_ccache_conf_data/start_realm@X-CACHECONF: from KCM:0 with result: -1765328243/Matching credential not found\n[13475] 1690302326.763955: Retrieving admin\\@IPA.TEST@IPA.TEST -> host/cli.ipa.test@IPA.TEST from KCM:0 with result: 0/Success\ncifs/dc-ut96.ad-ut96.test@AD-UT96.TEST: kvno = 1\n[13475] 1690302326.763956: Retrieving  -> cifs/dc-ut96.ad-ut96.test@AD-UT96.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[13475] 1690302326.763957: Getting credentials host/cli.ipa.test@IPA.TEST -> krbtgt/IPA.TEST@IPA.TEST using ccache KCM:0\n[13475] 1690302326.763958: Retrieving host/cli.ipa.test@IPA.TEST -> krb5_ccache_conf_data/start_realm@X-CACHECONF: from KCM:0 with result: -1765328243/Matching credential not found\n[13475] 1690302326.763959: Retrieving host/cli.ipa.test@IPA.TEST -> krbtgt/IPA.TEST@IPA.TEST from KCM:0 with result: 0/Success\n[13475] 1690302326.763960: Get cred via TGT krbtgt/IPA.TEST@IPA.TEST after requesting cifs/dc-ut96.ad-ut96.test@AD-UT96.TEST (canonicalize on)\n[13475] 1690302326.763961: Generated subkey for TGS request: aes256-cts/7285\n[13475] 1690302326.763962: etypes requested in TGS request: aes256-cts, aes256-sha2, camellia256-cts, aes128-sha2, aes128-cts, camellia128-cts\n[13475] 1690302326.763964: Encoding request body and padata into FAST request\n[13475] 1690302326.763965: Sending request (4518 bytes) to AD-UT96.TEST\n[13475] 1690302326.763966: Sending DNS URI query for _kerberos.AD-UT96.TEST.\n[13475] 1690302326.763967: No URI records found\n[13475] 1690302326.763968: Sending DNS SRV query for _kerberos._udp.AD-UT96.TEST.\n[13475] 1690302326.763969: SRV answer: 0 100 88 \"dc-ut96.ad-ut96.test.\"\n[13475] 1690302326.763970: Sending DNS SRV query for _kerberos._tcp.AD-UT96.TEST.\n[13475] 1690302326.763971: SRV answer: 0 100 88 \"dc-ut96.ad-ut96.test.\"\n[13475] 1690302326.763972: Resolving hostname dc-ut96.ad-ut96.test.\n[13475] 1690302326.763973: Resolving hostname dc-ut96.ad-ut96.test.\n[13475] 1690302326.763974: Initiating TCP connection to stream 10.0.197.117:88\n[13475] 1690302326.763975: Sending TCP request to stream 10.0.197.117:88\n[13475] 1690302326.763976: Received answer (96 bytes) from stream 10.0.197.117:88\n[13475] 1690302326.763977: Terminating TCP connection to stream 10.0.197.117:88\n[13475] 1690302326.763978: Sending DNS URI query for _kerberos.AD-UT96.TEST.\n[13475] 1690302326.763979: No URI records found\n[13475] 1690302326.763980: Sending DNS SRV query for _kerberos-master._tcp.AD-UT96.TEST.\n[13475] 1690302326.763981: No SRV records found\n[13475] 1690302326.763982: Response was not from primary KDC\n[13475] 1690302326.763983: Got cred; -1765328370/KDC has no support for encryption type\nkvno: KDC has no support for encryption type cifs/dc-ut96.ad-ut96.test@AD-UT96.TEST: constrained delegation failed\n\nThe network trace is in attachment.\n\n[1] https://bodhi.fedoraproject.org/updates/FEDORA-2023-95e3fe4d76"
							},
							{
								"isprivate": "0",
								"commentid": "17496031",
								"comment_count": "50",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2023-07-31 08:35:28 +0000",
								"thetext": "Created attachment 1980834\nfreeipa-4.10.2-1.fc38 enctype accepted by AD with S4U2Proxy\n\nAlexander told me this was caused by the fact I was providing the realm explicitly for the target principal in the kvno command. Indeed, using the \"@\" without the realm name causes the client to not skip the cross-realm TGT request:\n\n$ kvno -U admin@IPA.TEST -P cifs/dc-xk57.ad-xk57.test@"
							},
							{
								"isprivate": "0",
								"commentid": "17504591",
								"comment_count": "51",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2023-08-02 14:41:35 +0000",
								"thetext": "CentOS Stream 9 merge request:\nhttps://gitlab.com/redhat/centos-stream/rpms/krb5/-/merge_requests/40"
							},
							{
								"isprivate": "0",
								"commentid": "17743576",
								"comment_count": "80",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2023-11-07 08:56:13 +0000",
								"thetext": "Since the problem described in this bug report should be\nresolved in a recent advisory, it has been closed with a\nresolution of ERRATA.\n\nFor information on the advisory (Moderate: krb5 security and bug fix update), and where to find the updated\nfiles, follow the link below.\n\nIf the solution does not work for you, open a new bug report.\n\nhttps://access.redhat.com/errata/RHSA-2023:6699"
							}
						]
					},
					{
						"bug_id": "2068535",
						"creation_ts": "2022-03-25 15:44:40 +0000",
						"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS",
						"delta_ts": "2023-05-14 13:26:21 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Triaged",
						"priority": "low",
						"bug_severity": "medium",
						"depends_on": [
							"2016312",
							"2124463"
						],
						"blocked": [
							{
								"bug_id": "2105975",
								"creation_ts": "2022-07-11 11:39:15 +0000",
								"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS [fedoral-all]",
								"delta_ts": "2023-01-18 14:05:39 +0000",
								"bug_status": "CLOSED",
								"resolution": "WONTFIX",
								"keywords": "Triaged",
								"priority": "unspecified",
								"bug_severity": "medium",
								"depends_on": [
									"2068535",
									"2114771"
								],
								"external_bugs": {
									"text": "FREEIPA-8494",
									"name": "Red Hat Issue Tracker"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "16445667",
										"comment_count": "0",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2022-07-11 11:39:15 +0000",
										"thetext": "+++ This bug was initially created as a clone of Bug #2068535 +++\n\n--- Additional comment from Julien Rische on 2022-03-30 16:47:18 UTC ---\n\nI initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point.\n\n--- Additional comment from Julien Rische on 2022-04-21 16:27:39 UTC ---\n\nThe solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies.\n\n--- Additional comment from Julien Rische on 2022-05-03 11:51:34 UTC ---\n\nAlexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup.\n\n--- Additional comment from Alexander Sosedkin on 2022-05-03 15:04:15 UTC ---\n\nYes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc.\n\n--- Additional comment from Julien Rische on 2022-05-04 16:37:38 UTC ---\n\nLooking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms\n\n--- Additional comment from Julien Rische on 2022-07-11 11:12:55 UTC ---\n\nSince the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error."
									},
									{
										"isprivate": "0",
										"commentid": "16538420",
										"comment_count": "1",
										"who": {
											"text": "bcotton",
											"name": "Ben Cotton"
										},
										"bug_when": "2022-08-09 13:40:04 +0000",
										"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
									},
									{
										"isprivate": "0",
										"commentid": "16978336",
										"comment_count": "2",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2023-01-18 14:05:39 +0000",
										"thetext": "This change should not occur for a version of Fedora that was already released. It will happen on Rawhide only."
									}
								]
							},
							{
								"bug_id": "2114771",
								"creation_ts": "2022-08-03 08:50:41 +0000",
								"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS [fedora-rawhide]",
								"delta_ts": "2023-01-18 16:54:53 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "Triaged",
								"priority": "unspecified",
								"bug_severity": "medium",
								"depends_on": [
									"2016312",
									"2068535",
									"2124463"
								],
								"blocked": [
									{
										"bug_id": "2105975",
										"creation_ts": "2022-07-11 11:39:15 +0000",
										"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS [fedoral-all]",
										"delta_ts": "2023-01-18 14:05:39 +0000",
										"bug_status": "CLOSED",
										"resolution": "WONTFIX",
										"keywords": "Triaged",
										"priority": "unspecified",
										"bug_severity": "medium",
										"depends_on": [
											"2068535",
											"2114771"
										],
										"external_bugs": {
											"text": "FREEIPA-8494",
											"name": "Red Hat Issue Tracker"
										},
										"long_desc": [
											{
												"isprivate": "0",
												"commentid": "16445667",
												"comment_count": "0",
												"who": {
													"text": "jrische",
													"name": "Julien Rische"
												},
												"bug_when": "2022-07-11 11:39:15 +0000",
												"thetext": "+++ This bug was initially created as a clone of Bug #2068535 +++\n\n--- Additional comment from Julien Rische on 2022-03-30 16:47:18 UTC ---\n\nI initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point.\n\n--- Additional comment from Julien Rische on 2022-04-21 16:27:39 UTC ---\n\nThe solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies.\n\n--- Additional comment from Julien Rische on 2022-05-03 11:51:34 UTC ---\n\nAlexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup.\n\n--- Additional comment from Alexander Sosedkin on 2022-05-03 15:04:15 UTC ---\n\nYes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc.\n\n--- Additional comment from Julien Rische on 2022-05-04 16:37:38 UTC ---\n\nLooking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms\n\n--- Additional comment from Julien Rische on 2022-07-11 11:12:55 UTC ---\n\nSince the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error."
											},
											{
												"isprivate": "0",
												"commentid": "16538420",
												"comment_count": "1",
												"who": {
													"text": "bcotton",
													"name": "Ben Cotton"
												},
												"bug_when": "2022-08-09 13:40:04 +0000",
												"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
											},
											{
												"isprivate": "0",
												"commentid": "16978336",
												"comment_count": "2",
												"who": {
													"text": "jrische",
													"name": "Julien Rische"
												},
												"bug_when": "2023-01-18 14:05:39 +0000",
												"thetext": "This change should not occur for a version of Fedora that was already released. It will happen on Rawhide only."
											}
										]
									}
								],
								"external_bugs": {
									"text": "FREEIPA-8609",
									"name": "Red Hat Issue Tracker"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "16518786",
										"comment_count": "0",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2022-08-03 08:50:41 +0000",
										"thetext": "+++ This bug was initially created as a clone of Bug #2068535 +++\n\n--- Additional comment from Julien Rische on 2022-03-30 16:47:18 UTC ---\n\nI initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point.\n\n--- Additional comment from Julien Rische on 2022-04-21 16:27:39 UTC ---\n\nThe solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies.\n\n--- Additional comment from Julien Rische on 2022-05-03 11:51:34 UTC ---\n\nAlexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup.\n\n--- Additional comment from Alexander Sosedkin on 2022-05-03 15:04:15 UTC ---\n\nYes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc.\n\n--- Additional comment from Julien Rische on 2022-05-04 16:37:38 UTC ---\n\nLooking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms\n\n--- Additional comment from Julien Rische on 2022-07-11 11:12:55 UTC ---\n\nSince the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error.\n\n--- Additional comment from Julien Rische on 2022-07-12 10:15:14 UTC ---\n\nIn the process, we will switch the master_key_type of the EXAMPLE.COM realm parameter from aes256-cts-hmac-sha1-96 (not configured, set by default) by aes256-cts-hmac-sha384-192. This setting is required in FIPS mode, but since the master key does not have any compatibility requirements (contrary to the supported_entypes parameter, which must match the encryption types used by the clients), there is no reason not to use it on new KDC setups.\n\nWe will wait for the 1.20 rebase to apply these changes."
									},
									{
										"isprivate": "0",
										"commentid": "16538210",
										"comment_count": "1",
										"who": {
											"text": "bcotton",
											"name": "Ben Cotton"
										},
										"bug_when": "2022-08-09 13:35:39 +0000",
										"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
									},
									{
										"isprivate": "0",
										"commentid": "16978870",
										"comment_count": "2",
										"who": {
											"text": "updates",
											"name": "Fedora Update System"
										},
										"bug_when": "2023-01-18 16:36:26 +0000",
										"thetext": "FEDORA-2023-50fb9b3d2e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2023-50fb9b3d2e"
									},
									{
										"isprivate": "0",
										"commentid": "16978917",
										"comment_count": "3",
										"who": {
											"text": "updates",
											"name": "Fedora Update System"
										},
										"bug_when": "2023-01-18 16:54:53 +0000",
										"thetext": "FEDORA-2023-50fb9b3d2e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
									}
								]
							}
						],
						"external_bugs": {
							"text": "redhat/centos-stream/rpms/krb5/-/merge_requests/28",
							"name": "Gitlab"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "16102498",
								"comment_count": "1",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-03-30 16:47:18 +0000",
								"thetext": "I initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point."
							},
							{
								"isprivate": "0",
								"commentid": "16162826",
								"comment_count": "2",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-04-21 16:27:39 +0000",
								"thetext": "The solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies."
							},
							{
								"isprivate": "0",
								"commentid": "16195789",
								"comment_count": "3",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-05-03 11:51:34 +0000",
								"thetext": "Alexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup."
							},
							{
								"isprivate": "0",
								"commentid": "16196613",
								"comment_count": "4",
								"who": {
									"text": "asosedki",
									"name": "Alexander Sosedkin"
								},
								"bug_when": "2022-05-03 15:04:15 +0000",
								"thetext": "Yes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc."
							},
							{
								"isprivate": "0",
								"commentid": "16200438",
								"comment_count": "5",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-05-04 16:37:38 +0000",
								"thetext": "Looking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms"
							},
							{
								"isprivate": "0",
								"commentid": "16445583",
								"comment_count": "6",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-11 11:12:55 +0000",
								"thetext": "Since the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error."
							},
							{
								"isprivate": "0",
								"commentid": "16450743",
								"comment_count": "7",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-07-12 10:15:14 +0000",
								"thetext": "In the process, we will switch the master_key_type of the EXAMPLE.COM realm parameter from aes256-cts-hmac-sha1-96 (not configured, set by default) by aes256-cts-hmac-sha384-192. This setting is required in FIPS mode, but since the master key does not have any compatibility requirements (contrary to the supported_entypes parameter, which must match the encryption types used by the clients), there is no reason not to use it on new KDC setups.\n\nWe will wait for the 1.20 rebase to apply these changes."
							},
							{
								"isprivate": "0",
								"commentid": "16903158",
								"comment_count": "11",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-12-23 13:13:09 +0000",
								"thetext": "C9S merge request:\nhttps://gitlab.com/redhat/centos-stream/rpms/krb5/-/merge_requests/28"
							},
							{
								"isprivate": "0",
								"commentid": "17033788",
								"comment_count": "13",
								"who": {
									"text": "mpolovka",
									"name": "Michal Polovka"
								},
								"bug_when": "2023-02-08 17:55:00 +0000",
								"thetext": "Pre-verified manually using RHEL9.2 machine with krb5-server-1.20.1-5.el9.x86_64\n\n1. install krb5-server-1.20.1-5.el9.x86_64\n2. enable default EXAMPLE.COM realm in krb5.conf file\n3. # kdb5_util create -s -P Secret123\nInitializing database '/var/kerberos/krb5kdc/principal' for realm 'EXAMPLE.COM',\nmaster key name 'K/M@EXAMPLE.COM'\n4. # kadmin.local\nAuthenticating as principal root/admin@EXAMPLE.COM with password.\nkadmin.local:  getprinc K/M\nPrincipal: K/M@EXAMPLE.COM\nExpiration date: [never]\nLast password change: [never]\nPassword expiration date: [never]\nMaximum ticket life: 1 day 00:00:00\nMaximum renewable life: 0 days 00:00:00\nLast modified: Wed Feb 08 12:45:55 EST 2023 (db_creation@EXAMPLE.COM)\nLast successful authentication: [never]\nLast failed authentication: [never]\nFailed password attempts: 0\nNumber of keys: 1\nKey: vno 1, aes256-cts-hmac-sha384-192\nMKey: vno 1\nAttributes: DISALLOW_ALL_TIX REQUIRES_PRE_AUTH LOCKDOWN_KEYS\nPolicy: [none]\n5. # kadmin.local -q \"ank -pw bob bob\"\nAuthenticating as principal root/admin@EXAMPLE.COM with password.\nNo policy specified for bob@EXAMPLE.COM; defaulting to no policy\nPrincipal \"bob@EXAMPLE.COM\" created.\n6. # kadmin.local\nAuthenticating as principal root/admin@EXAMPLE.COM with password.\nkadmin.local:  getprinc bob\nPrincipal: bob@EXAMPLE.COM\nExpiration date: [never]\nLast password change: Wed Feb 08 12:49:18 EST 2023\nPassword expiration date: [never]\nMaximum ticket life: 1 day 00:00:00\nMaximum renewable life: 0 days 00:00:00\nLast modified: Wed Feb 08 12:49:18 EST 2023 (root/admin@EXAMPLE.COM)\nLast successful authentication: [never]\nLast failed authentication: [never]\nFailed password attempts: 0\nNumber of keys: 7\nKey: vno 1, aes256-cts-hmac-sha384-192\nKey: vno 1, aes128-cts-hmac-sha256-128\nKey: vno 1, aes256-cts-hmac-sha1-96\nKey: vno 1, aes128-cts-hmac-sha1-96\nKey: vno 1, camellia256-cts-cmac\nKey: vno 1, camellia128-cts-cmac\nKey: vno 1, DEPRECATED:arcfour-hmac\nMKey: vno 1\nAttributes: REQUIRES_PRE_AUTH\nPolicy: [none]\n\nRequested enctypes present, marking as pre-verified: tested."
							},
							{
								"isprivate": "0",
								"commentid": "17038650",
								"comment_count": "16",
								"who": {
									"text": "mpolovka",
									"name": "Michal Polovka"
								},
								"bug_when": "2023-02-10 10:19:26 +0000",
								"thetext": "Verified manually using RHEL9.2 machine and krb5-server-1.20.1-5.el9.x86_64\n\n1. dnf install krb5-server\nInstalled:\n  krb5-pkinit-1.20.1-5.el9.x86_64                   krb5-server-1.20.1-5.el9.x86_64                   libkadm5-1.20.1-5.el9.x86_64                   words-3.0-39.el9.noarch\n2. # enable default EXAMPLE.COM realm in etc//krb5.conf file\n3. kdb5_util create -s -P Secret123\nInitializing database '/var/kerberos/krb5kdc/principal' for realm 'EXAMPLE.COM',\nmaster key name 'K/M@EXAMPLE.COM' \n4. kadmin.local\nAuthenticating as principal root/admin@EXAMPLE.COM with password.\nkadmin.local:  getprinc K/M\nPrincipal: K/M@EXAMPLE.COM\nExpiration date: [never]\nLast password change: [never]\nPassword expiration date: [never]\nMaximum ticket life: 1 day 00:00:00\nMaximum renewable life: 0 days 00:00:00\nLast modified: Fri Feb 10 05:17:16 EST 2023 (db_creation@EXAMPLE.COM)\nLast successful authentication: [never]\nLast failed authentication: [never]\nFailed password attempts: 0\nNumber of keys: 1\nKey: vno 1, aes256-cts-hmac-sha384-192\nMKey: vno 1\nAttributes: DISALLOW_ALL_TIX REQUIRES_PRE_AUTH LOCKDOWN_KEYS\nPolicy: [none]\n5. kadmin.local -q \"ank -pw bob bob\"\n6. kadmin.local\nAuthenticating as principal root/admin@EXAMPLE.COM with password.\nkadmin.local:  getprinc bob\nPrincipal: bob@EXAMPLE.COM\nExpiration date: [never]\nLast password change: Fri Feb 10 05:18:20 EST 2023\nPassword expiration date: [never]\nMaximum ticket life: 1 day 00:00:00\nMaximum renewable life: 0 days 00:00:00\nLast modified: Fri Feb 10 05:18:20 EST 2023 (root/admin@EXAMPLE.COM)\nLast successful authentication: [never]\nLast failed authentication: [never]\nFailed password attempts: 0\nNumber of keys: 7\nKey: vno 1, aes256-cts-hmac-sha384-192\nKey: vno 1, aes128-cts-hmac-sha256-128\nKey: vno 1, aes256-cts-hmac-sha1-96\nKey: vno 1, aes128-cts-hmac-sha1-96\nKey: vno 1, camellia256-cts-cmac\nKey: vno 1, camellia128-cts-cmac\nKey: vno 1, DEPRECATED:arcfour-hmac\nMKey: vno 1\nAttributes: REQUIRES_PRE_AUTH\nPolicy: [none]\n\nRequested enctypes present, marking as verified."
							},
							{
								"isprivate": "0",
								"commentid": "17259384",
								"comment_count": "24",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2023-05-09 08:25:24 +0000",
								"thetext": "Since the problem described in this bug report should be\nresolved in a recent advisory, it has been closed with a\nresolution of ERRATA.\n\nFor information on the advisory (Moderate: krb5 security, bug fix, and enhancement update), and where to find the updated\nfiles, follow the link below.\n\nIf the solution does not work for you, open a new bug report.\n\nhttps://access.redhat.com/errata/RHSA-2023:2570"
							}
						]
					},
					{
						"bug_id": "2114771",
						"creation_ts": "2022-08-03 08:50:41 +0000",
						"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS [fedora-rawhide]",
						"delta_ts": "2023-01-18 16:54:53 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Triaged",
						"priority": "unspecified",
						"bug_severity": "medium",
						"depends_on": [
							"2016312",
							"2068535",
							"2124463"
						],
						"blocked": [
							{
								"bug_id": "2105975",
								"creation_ts": "2022-07-11 11:39:15 +0000",
								"short_desc": "Modify supported_enctypes (kdc.conf) and add aes256/128-sha2 enctypes due to FIPS [fedoral-all]",
								"delta_ts": "2023-01-18 14:05:39 +0000",
								"bug_status": "CLOSED",
								"resolution": "WONTFIX",
								"keywords": "Triaged",
								"priority": "unspecified",
								"bug_severity": "medium",
								"depends_on": [
									"2068535",
									"2114771"
								],
								"external_bugs": {
									"text": "FREEIPA-8494",
									"name": "Red Hat Issue Tracker"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "16445667",
										"comment_count": "0",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2022-07-11 11:39:15 +0000",
										"thetext": "+++ This bug was initially created as a clone of Bug #2068535 +++\n\n--- Additional comment from Julien Rische on 2022-03-30 16:47:18 UTC ---\n\nI initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point.\n\n--- Additional comment from Julien Rische on 2022-04-21 16:27:39 UTC ---\n\nThe solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies.\n\n--- Additional comment from Julien Rische on 2022-05-03 11:51:34 UTC ---\n\nAlexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup.\n\n--- Additional comment from Alexander Sosedkin on 2022-05-03 15:04:15 UTC ---\n\nYes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc.\n\n--- Additional comment from Julien Rische on 2022-05-04 16:37:38 UTC ---\n\nLooking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms\n\n--- Additional comment from Julien Rische on 2022-07-11 11:12:55 UTC ---\n\nSince the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error."
									},
									{
										"isprivate": "0",
										"commentid": "16538420",
										"comment_count": "1",
										"who": {
											"text": "bcotton",
											"name": "Ben Cotton"
										},
										"bug_when": "2022-08-09 13:40:04 +0000",
										"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
									},
									{
										"isprivate": "0",
										"commentid": "16978336",
										"comment_count": "2",
										"who": {
											"text": "jrische",
											"name": "Julien Rische"
										},
										"bug_when": "2023-01-18 14:05:39 +0000",
										"thetext": "This change should not occur for a version of Fedora that was already released. It will happen on Rawhide only."
									}
								]
							}
						],
						"external_bugs": {
							"text": "FREEIPA-8609",
							"name": "Red Hat Issue Tracker"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "16518786",
								"comment_count": "0",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2022-08-03 08:50:41 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #2068535 +++\n\n--- Additional comment from Julien Rische on 2022-03-30 16:47:18 UTC ---\n\nI initially thought that generating the KDC supported encryption type list based on permitted encryption types from the crypto-policy would make sense. But looking at the definition of the supported_enctypes parameter:\n\n\"Specifies  the  default  key/salt  combinations  of principals for this realm.  Any principals created through kadmin(1) will have keys of these types. The default value for this tag is aes256-cts-hmac-sha1-96:normal aes128-cts-hmac-sha1-96:normal.\"\n\nThis tends to make me think we should enable as many encryption types as possible, especially the strongest ones. The earlier we enable key generation for these recent encryption types by default, the easier it will be for administrators to eventually permit them on client side, since users and services that created their password/key in the meantime will be able to use these new encryption types at this point.\n\n--- Additional comment from Julien Rische on 2022-04-21 16:27:39 UTC ---\n\nThe solution I described in my previous comment is missing a part of the problem: FIPS-enabled hosts are only able to use aes128-cts-hmac-sha256-128 and aes256-cts-hmac-sha384-192 encryption types. Hence, even if a non FIPS-compliant encryption type is set as supported_enctypes, but not used for authentication because it is not set as permitted_enctypes, it will still cause the creation of a new key to fail because the crypto-policies will block forbidden algorithms. This results in an internal cryptography error.\n\nAs a consequence, in case of a FIPS-enabled host, just adding the latest encryption types is not enough. Non-compliant encryption types have to be removed too.\n\nSo the question is: Should we just add newer encryption types and expect FIPS users to update the default KDC configuration accordingly, or have the supported_enctypes setting generated by the update-crypto-policies tool, similarly to /etc/krb5.conf.d/crypto-policies.\n\n--- Additional comment from Julien Rische on 2022-05-03 11:51:34 UTC ---\n\nAlexander, would it be possible to have a crypto-policies configuration file generated for KDC \"supported_enctypes\" similarly to what we have for \"/etc/krb5.conf.d/crypto-policies\"? This would avoid to have key creation to fail with the default configuration in a non-IPA KDC setup.\n\n--- Additional comment from Alexander Sosedkin on 2022-05-03 15:04:15 UTC ---\n\nYes, it is possible to generate additional configuration files.\nIf reusing the already existing one is somehow impossible or overly impractical,\nplease file a bug for crypto-policies and describe in details\nwhat the file should contain and how to generate it, how to name it etc.\n\n--- Additional comment from Julien Rische on 2022-05-04 16:37:38 UTC ---\n\nLooking at the kdc.conf manual page[1], I realize that contrary to the \"permitted_enctypes\" parameter, \"supported_enctypes\" lies in the realm configuration block. This is an obstacle to having update-crypto-policies generating a specific configuration file for this setting because it would require it to know the name of the realm.\n\nAtop of that, I just did some tests and it is not possible to use \"include\" or \"includedir\" instructions in a realm block. Also, in case there are multiple blocks for the same realm, their settings are not combined, only the first one is taken into account. As a result, it is impossible to have one part of the realm configuration in one file, and the rest of the configuration in another file.\n\nWith these constraints in mind, I am not sure it is actually possible to have update-crypto-policies generating this file because it would have to contain various other realm parameters that are unrelated to the crypto-policy...\n\n[1] https://web.mit.edu/kerberos/krb5-1.19/doc/admin/conf_files/kdc_conf.html#realms\n\n--- Additional comment from Julien Rische on 2022-07-11 11:12:55 UTC ---\n\nSince the format of the kdc.conf file does not allow to reproduce the behavior of /etc/krb5.conf.d/crypto-policies, we will add aes256-cts-hmac-sha384-192:normal and aes128-cts-hmac-sha256-128:normal to the \"supported_enctypes\" in the default KDC configuration for the EXAMPLE.COM realm. We will document the fact all the other encryption types should be removed in FIPS mode. Their presence in this mode should cause an internal cryptography error.\n\n--- Additional comment from Julien Rische on 2022-07-12 10:15:14 UTC ---\n\nIn the process, we will switch the master_key_type of the EXAMPLE.COM realm parameter from aes256-cts-hmac-sha1-96 (not configured, set by default) by aes256-cts-hmac-sha384-192. This setting is required in FIPS mode, but since the master key does not have any compatibility requirements (contrary to the supported_entypes parameter, which must match the encryption types used by the clients), there is no reason not to use it on new KDC setups.\n\nWe will wait for the 1.20 rebase to apply these changes."
							},
							{
								"isprivate": "0",
								"commentid": "16538210",
								"comment_count": "1",
								"who": {
									"text": "bcotton",
									"name": "Ben Cotton"
								},
								"bug_when": "2022-08-09 13:35:39 +0000",
								"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 37 development cycle.\nChanging version to 37."
							},
							{
								"isprivate": "0",
								"commentid": "16978870",
								"comment_count": "2",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2023-01-18 16:36:26 +0000",
								"thetext": "FEDORA-2023-50fb9b3d2e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2023-50fb9b3d2e"
							},
							{
								"isprivate": "0",
								"commentid": "16978917",
								"comment_count": "3",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2023-01-18 16:54:53 +0000",
								"thetext": "FEDORA-2023-50fb9b3d2e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
							}
						]
					},
					{
						"bug_id": "2209621",
						"creation_ts": "2023-05-24 09:27:32 +0000",
						"short_desc": "Invalid KDC signature encryption type for PAC [rawhide]",
						"delta_ts": "2024-02-19 17:00:17 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Triaged",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"2016312",
							"2027125",
							"2060421",
							"2124463"
						],
						"external_bugs": {
							"text": "FREEIPA-9915",
							"name": "Red Hat Issue Tracker"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "17313664",
								"comment_count": "0",
								"who": {
									"text": "jrische",
									"name": "Julien Rische"
								},
								"bug_when": "2023-05-24 09:27:32 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #2060421 +++\n\n[root@master ~]# ipa trust-find\n---------------\n1 trust matched\n---------------\n  Realm name: win19-13r8.test\n  Domain NetBIOS name: WIN19-13R8\n  Domain Security Identifier: S-1-5-21-3829174166-1252505095-3327585824\n  Trust type: Active Directory domain\n----------------------------\nNumber of entries returned 1\n----------------------------\n\n\n[root@master ~]# klist -e\nTicket cache: KCM:0\nDefault principal: admin@TESTREALM1WAY.TEST\n\nValid starting       Expires              Service principal\n03/03/2022 08:42:50  03/04/2022 08:19:50  HTTP/master.testrealm1way.test@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n03/03/2022 08:42:48  03/04/2022 08:19:50  krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n\tEtype (skey, tkt): aes256-cts-hmac-sha384-192, aes256-cts-hmac-sha384-192 \n[root@master ~]# KRB5_TRACE=/dev/stderr kvno -S cifs ad1-13r8.win19-13r8.test\n[24932] 1646315147.757589: Getting credentials admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST using ccache KCM:0\n[24932] 1646315147.757590: Retrieving admin@TESTREALM1WAY.TEST -> krb5_ccache_conf_data/start_realm@X-CACHECONF: from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757591: Retrieving admin@TESTREALM1WAY.TEST -> cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757592: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757593: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST from KCM:0 with result: 0/Success\n[24932] 1646315147.757594: Starting with TGT for client realm: admin@TESTREALM1WAY.TEST -> krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757595: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757596: Requesting TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST using TGT krbtgt/TESTREALM1WAY.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757597: Generated subkey for TGS request: aes256-sha2/107C\n[24932] 1646315147.757598: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757600: Encoding request body and padata into FAST request\n[24932] 1646315147.757601: Sending request (1948 bytes) to TESTREALM1WAY.TEST\n[24932] 1646315147.757602: Initiating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757603: Sending TCP request to stream 10.0.199.42:88\n[24932] 1646315147.757604: Received answer (1804 bytes) from stream 10.0.199.42:88\n[24932] 1646315147.757605: Terminating TCP connection to stream 10.0.199.42:88\n[24932] 1646315147.757606: Response was from primary KDC\n[24932] 1646315147.757607: Decoding FAST response\n[24932] 1646315147.757608: FAST reply key: aes256-sha2/3569\n[24932] 1646315147.757609: TGS reply is for admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST with session key aes256-cts/349C\n[24932] 1646315147.757610: TGS request result: 0/Success\n[24932] 1646315147.757611: Received TGT for WIN19-13R8.TEST; advancing current realm\n[24932] 1646315147.757612: Retrieving admin@TESTREALM1WAY.TEST -> krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST from KCM:0 with result: -1765328243/Matching credential not found\n[24932] 1646315147.757613: Requesting TGT krbtgt/WIN19-13R8.TEST@WIN19-13R8.TEST using TGT krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n[24932] 1646315147.757614: Generated subkey for TGS request: aes256-cts/6248\n[24932] 1646315147.757615: etypes requested in TGS request: aes256-sha2, aes256-cts, aes128-sha2, aes128-cts\n[24932] 1646315147.757617: Encoding request body and padata into FAST request\n[24932] 1646315147.757618: Sending request (1812 bytes) to WIN19-13R8.TEST\n[24932] 1646315147.757619: Initiating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757620: Sending TCP request to stream 10.0.199.57:88\n[24932] 1646315147.757621: Received answer (331 bytes) from stream 10.0.199.57:88\n[24932] 1646315147.757622: Terminating TCP connection to stream 10.0.199.57:88\n[24932] 1646315147.757623: Response was from primary KDC\n[24932] 1646315147.757624: Decoding FAST response\n[24932] 1646315147.757625: TGS request result: -1765328324/Generic error (see e-text)\nkvno: Generic error (see e-text) while getting credentials for cifs/ad1-13r8.win19-13r8.test@WIN19-13R8.TEST\n\nFrom krb5kdc.log:\nMar 03 08:45:47 master.testrealm1way.test krb5kdc[24353](info): TGS_REQ (4 etypes {aes256-cts-hmac-sha384-192(20), aes256-cts-hmac-sha1-96(18), aes128-cts-hmac-sha256-128(19), aes128-cts-hmac-sha1-96(17)}) 10.0.199.42: ISSUE: authtime 1646314968, etypes {rep=aes256-cts-hmac-sha384-192(20), tkt=aes256-cts-hmac-sha1-96(18), ses=aes256-cts-hmac-sha1-96(18)}, admin@TESTREALM1WAY.TEST for krbtgt/WIN19-13R8.TEST@TESTREALM1WAY.TEST\n\nI think we've seen this issue when developing krb5 1.20 upstream, so it needs to be re-verified with 1.20 when rebase happens."
							},
							{
								"isprivate": "0",
								"commentid": "17386094",
								"comment_count": "1",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2023-06-13 13:41:25 +0000",
								"thetext": "FEDORA-2023-5cd7789569 has been submitted as an update to Fedora 39. https://bodhi.fedoraproject.org/updates/FEDORA-2023-5cd7789569"
							},
							{
								"isprivate": "0",
								"commentid": "17386152",
								"comment_count": "2",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2023-06-13 13:55:32 +0000",
								"thetext": "FEDORA-2023-5cd7789569 has been pushed to the Fedora 39 stable repository.\nIf problem still persists, please make note of it in this bug report."
							},
							{
								"isprivate": "0",
								"commentid": "17541193",
								"comment_count": "3",
								"who": {
									"text": "releng",
									"name": "Fedora Release Engineering"
								},
								"bug_when": "2023-08-16 07:14:28 +0000",
								"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora Linux 39 development cycle.\nChanging version to 39."
							}
						]
					}
				],
				"external_bugs": {
					"text": "krb5/pull-request/27",
					"name": "Fedora Package Sources"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "16613006",
						"comment_count": "0",
						"who": {
							"text": "jrische",
							"name": "Julien Rische"
						},
						"bug_when": "2022-09-06 08:43:12 +0000",
						"thetext": "+++ This bug was initially created as a clone of Bug #2016312 +++\n\nRebase MIT Kerberos to 1.20 series once they are released upstream in late 2021.\n\nMajor change in 1.20 is a refactoring of KDB interface to handle MS-PAC records to allow more precise and hardened handling of tickets in environments integrated with Active Directory, as well as support of resource-based constrained delegation.\n\nChanges in krb5 1.20 will affect RHEL IdM and Samba. Both components are currently being adopted to 1.20 changes upstream.\n\n--- Additional comment from Alexander Bokovoy on 2022-01-19 08:30:30 UTC ---\n\nSince krb5 1.20 is not yet tagged and in discussion with upstream it is going to be released somewhere during spring 2022, wewould move the rebase forward to next possible development version of RHEL 9.\n\n--- Additional comment from Julien Rische on 2022-08-11 13:08:11 UTC ---\n\nThe krb5 1.20 rebase is available here:\nhttps://src.fedoraproject.org/fork/jrische/rpms/krb5/tree/krb5-1.20\n\nTests are failing for Fedora 35, but it seems related to a change in glibc affecting resolv_wrapper, which is used in tests for KDC DNS lookup:\nhttps://gitlab.com/cwrap/resolv_wrapper/-/commit/c75587f858eb49e6b13ab610e63289df0485ddac\n\n--- Additional comment from Julien Rische on 2022-09-02 10:39:49 UTC ---\n\nAD/MIT cross-realm seems to be broken since version 1.20 (tested on Fedora and C9S/RHEL against Windows Server 2019). An AD principal is able to request a ticket for the an MIT principal, but the opposite fails with a generic error (without e-text). This issue persists even when PAC is disabled on MIT KDC.\n\nIt seems to be related to the content of the MIT TGT, because after pre-authentication using krb5 1.20 and downgrading to 1.19.*, the cross-realm TGT TGS-REQ succeed, but the service ticket TGS-REQ will continue to fail until the ccache is destroyed and the TGT requested again.\n\nNo obvious different is visible in the network capture.\n\n--- Additional comment from Julien Rische on 2022-09-05 17:27:44 UTC ---\n\nC9S pull request:\nhttps://gitlab.com/redhat/centos-stream/rpms/krb5/-/merge_requests/23"
					},
					{
						"isprivate": "0",
						"commentid": "16842173",
						"comment_count": "1",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 15:02:17 +0000",
						"thetext": "FEDORA-2022-8050ab2c35 has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35"
					},
					{
						"isprivate": "0",
						"commentid": "16842576",
						"comment_count": "2",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 17:37:57 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e"
					},
					{
						"isprivate": "0",
						"commentid": "16856885",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-07 13:29:04 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
					}
				]
			}
		},
		{
			"bug_id": 2129113,
			"feedback": [
				{
					"bug_id": 2129113,
					"comment": {
						"id": 2804413,
						"karma": -1,
						"text": "this wasn't meant to be on mainline yet, per @ab .",
						"timestamp": "2022-12-01 17:20:53",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
							"email": "awilliam@redhat.com",
							"groups": [
								{
									"name": "proventesters"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "packager"
								},
								{
									"name": "qa-tools-sig"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "news"
								},
								{
									"name": "gittriage"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "gitgeneric-release"
								},
								{
									"name": "yak_farmers"
								},
								{
									"name": "triagers"
								},
								{
									"name": "qa"
								},
								{
									"name": "sysadmin-qa"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "gitmkinitrd"
								},
								{
									"name": "qa-admin"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "common-issues-triage"
								},
								{
									"name": "aws-qa"
								},
								{
									"name": "gitfedora-project-schedule"
								},
								{
									"name": "change-wranglers"
								},
								{
									"name": "fedora-ci-admins"
								},
								{
									"name": "program-management"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 302,
							"name": "adamwill",
							"openid": "adamwill.id.fedoraproject.org"
						},
						"user_id": 302
					},
					"comment_id": 2804413
				},
				{
					"bug_id": 2129113,
					"comment": {
						"id": 2804415,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:05",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
							"email": "klember@redhat.com",
							"groups": [
								{
									"name": "qa"
								},
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "gnome-sig"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "hosted-content"
								},
								{
									"name": "flatpak-sig"
								}
							],
							"id": 285,
							"name": "kalev",
							"openid": "kalev.id.fedoraproject.org"
						},
						"user_id": 285
					},
					"comment_id": 2804415
				},
				{
					"bug_id": 2129113,
					"comment": {
						"id": 2804418,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:19",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
							"email": "decathorpe@gmail.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "packaging-committee"
								},
								{
									"name": "libreoffice-sig"
								},
								{
									"name": "multimedia-sig"
								},
								{
									"name": "diversity-pride"
								},
								{
									"name": "pantheon-sig"
								}
							],
							"id": 388,
							"name": "decathorpe",
							"openid": "decathorpe.id.fedoraproject.org"
						},
						"user_id": 388
					},
					"comment_id": 2804418
				},
				{
					"bug_id": 2129113,
					"comment": {
						"id": 2804444,
						"karma": -1,
						"timestamp": "2022-12-01 17:34:34",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
							"email": "mboddu@bhujji.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "bodhiadmin"
								},
								{
									"name": "releng-team"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "sysadmin-web"
								},
								{
									"name": "sysadmin-releng"
								},
								{
									"name": "sysadmin-bodhi"
								},
								{
									"name": "cvsadmin"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "torrentadmin"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "epel-cabal"
								},
								{
									"name": "signers"
								},
								{
									"name": "sysadmin-cvs"
								}
							],
							"id": 2990,
							"name": "mohanboddu",
							"openid": "mohanboddu.id.fedoraproject.org"
						},
						"user_id": 2990
					},
					"comment_id": 2804444
				},
				{
					"bug_id": 2129113,
					"comment": {
						"id": 2804446,
						"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
						"timestamp": "2022-12-01 17:36:29",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2804446
				}
			],
			"title": "Incorrect password expiration handling [fedora-rawhide]",
			"bugzilla": {
				"bug_id": "2129113",
				"creation_ts": "2022-09-22 14:32:12 +0000",
				"short_desc": "Incorrect password expiration handling [fedora-rawhide]",
				"delta_ts": "2023-01-13 14:43:51 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Triaged",
				"priority": "unspecified",
				"bug_severity": "unspecified",
				"depends_on": [
					"2121099"
				],
				"external_bugs": {
					"text": "krb5/pull-request/27",
					"name": "Fedora Package Sources"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "16659167",
						"comment_count": "0",
						"who": {
							"text": "jrische",
							"name": "Julien Rische"
						},
						"bug_when": "2022-09-22 14:32:12 +0000",
						"thetext": "+++ This bug was initially created as a clone of Bug #2121099 +++\n\nDescription of problem:\nTrying to prevent admin password to expire I set it to 2099-12-13 23:59:59 (with ansible-freeipa/ipauser). This date is now displayed on the Web UI but when doing kinit this warning is printed:\n\n# kinit admin                            \nPassword for admin@SUB.EXAMPLE.COM:   \nWarning: Your password will expire in less than one hour on Mon Dec 14 01:59:59 2099\n\nIf the given date is too distant in the future then I would have expected it to be rejected. However, this does not look like a 2038 issue as e.g. 2089-12-31 23:59:59 does not cause such a warning.\n\nVersion-Release number of selected component (if applicable):\nipa-common-4.9.8-7.module+el8.6.0+14337+19b76db2.noarch\n\n--- Additional comment from Marko Myllynen on 2022-08-24 13:05:13 UTC ---\n\nIt is also unclear what is the timezone in use here, perhaps that should be filed as another bug? Consider a case of 4 IdM servers where two of them are on different timezone than the others. What is the UTC time when the password will actually expire? Thanks.\n\n--- Additional comment from Florence Blanc-Renaud on 2022-08-24 17:08:36 UTC ---\n\nThe issue is easily reproduced by setting the expiration date using ipa user-mod --password-expiration=DATE.\n\n(In reply to Marko Myllynen from comment #0)\n> If the given date is too distant in the future then I would have expected it\n> to be rejected. However, this does not look like a 2038 issue as e.g.\n> 2089-12-31 23:59:59 does not cause such a warning.\n\nIt is a similar issue because the check is evaluating a delta between 2 timestamps, now and the expiration date, and if the delta overflows the buffer we have unpredictable behavior. The delta is also represented as a signed 32 bit integer, meaning the buffer overflow happens if the 2 dates are distant of more than ~68 years, which fits nicely with the behavior described here (2022 + 68 = 2090 is the pivot point).\n\n\nRelevant code:\n--------------\nhttps://github.com/krb5/krb5/blob/70f61d417261ca17efe3d60d180033bea2da60b0/src/lib/krb5/krb/get_in_tkt.c#L1567-L1571\n    delta = ts_delta(pw_exp, now);\n    if (delta < 3600) {\n        snprintf(banner, sizeof(banner),\n                 _(\"Warning: Your password will expire in less than one hour \"\n                   \"on %s\"), ts);\n\nand the definition of ts_delta:\nhttps://github.com/krb5/krb5/blob/70f61d417261ca17efe3d60d180033bea2da60b0/src/include/k5-int.h#L2319-L2325\n/* Return the delta between two timestamps (a - b) as a signed 32-bit value,\n * without relying on undefined behavior. */\nstatic inline krb5_deltat\nts_delta(krb5_timestamp a, krb5_timestamp b)\n{\n    return (krb5_deltat)((uint32_t)a - (uint32_t)b);\n}\n\n\nkrb5_deltat is defined in https://github.com/krb5/krb5/blob/70f61d417261ca17efe3d60d180033bea2da60b0/src/include/krb5/krb5.hin:\n\ntypedef int32_t krb5_int32;\ntypedef krb5_int32      krb5_deltat;\n\n\nMoving the issue to krb5 component.\n\n--- Additional comment from Julien Rische on 2022-09-07 12:16:16 UTC ---\n\nI guess either we switch the type of krb5_deltat from int32_t to int64_t, or we add an extra test to detect integer wrapping before the delta is calculated.\n\nI think the first option is better, but it may have some implications in the rest of the code. We will discuss this issue upstream.\n\n--- Additional comment from Julien Rische on 2022-09-09 16:22:30 UTC ---\n\nThe krb5_timestamp and krb5_deltat types are widely used in the MIT krb5 codebase. Their underlying type is int32_t, but krb5_timestamp is actually used as an unsigned 32-bit integer to support later dates in the future. Changing the underlying type would definitely require a lot of changes, including in the ABI, so I simply opened a PR to cast the delta as uint32_t:\n\nhttps://github.com/krb5/krb5/pull/1266"
					},
					{
						"isprivate": "0",
						"commentid": "16842176",
						"comment_count": "1",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 15:02:28 +0000",
						"thetext": "FEDORA-2022-8050ab2c35 has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35"
					},
					{
						"isprivate": "0",
						"commentid": "16842577",
						"comment_count": "2",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 17:38:00 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e"
					},
					{
						"isprivate": "0",
						"commentid": "16856886",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-07 13:29:07 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
					}
				]
			}
		},
		{
			"bug_id": 2143011,
			"feedback": [
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2791698,
						"karma": 1,
						"text": "FreeIPA works fine.",
						"timestamp": "2022-11-21 08:46:40",
						"update_id": 461468,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2791698,
					"karma": 1
				},
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2804413,
						"karma": -1,
						"text": "this wasn't meant to be on mainline yet, per @ab .",
						"timestamp": "2022-12-01 17:20:53",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
							"email": "awilliam@redhat.com",
							"groups": [
								{
									"name": "proventesters"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "packager"
								},
								{
									"name": "qa-tools-sig"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "news"
								},
								{
									"name": "gittriage"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "gitgeneric-release"
								},
								{
									"name": "yak_farmers"
								},
								{
									"name": "triagers"
								},
								{
									"name": "qa"
								},
								{
									"name": "sysadmin-qa"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "gitmkinitrd"
								},
								{
									"name": "qa-admin"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "common-issues-triage"
								},
								{
									"name": "aws-qa"
								},
								{
									"name": "gitfedora-project-schedule"
								},
								{
									"name": "change-wranglers"
								},
								{
									"name": "fedora-ci-admins"
								},
								{
									"name": "program-management"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 302,
							"name": "adamwill",
							"openid": "adamwill.id.fedoraproject.org"
						},
						"user_id": 302
					},
					"comment_id": 2804413
				},
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2804415,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:05",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
							"email": "klember@redhat.com",
							"groups": [
								{
									"name": "qa"
								},
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "gnome-sig"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "gitspin-kickstarts"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "hosted-content"
								},
								{
									"name": "flatpak-sig"
								}
							],
							"id": 285,
							"name": "kalev",
							"openid": "kalev.id.fedoraproject.org"
						},
						"user_id": 285
					},
					"comment_id": 2804415
				},
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2804418,
						"karma": -1,
						"timestamp": "2022-12-01 17:21:19",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
							"email": "decathorpe@gmail.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "rust-sig"
								},
								{
									"name": "packaging-committee"
								},
								{
									"name": "libreoffice-sig"
								},
								{
									"name": "multimedia-sig"
								},
								{
									"name": "diversity-pride"
								},
								{
									"name": "pantheon-sig"
								}
							],
							"id": 388,
							"name": "decathorpe",
							"openid": "decathorpe.id.fedoraproject.org"
						},
						"user_id": 388
					},
					"comment_id": 2804418
				},
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2804444,
						"karma": -1,
						"timestamp": "2022-12-01 17:34:34",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
							"email": "mboddu@bhujji.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "bodhiadmin"
								},
								{
									"name": "releng-team"
								},
								{
									"name": "sysadmin-main"
								},
								{
									"name": "provenpackager"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "sysadmin"
								},
								{
									"name": "sysadmin-web"
								},
								{
									"name": "sysadmin-releng"
								},
								{
									"name": "sysadmin-bodhi"
								},
								{
									"name": "cvsadmin"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "torrentadmin"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "epel-cabal"
								},
								{
									"name": "signers"
								},
								{
									"name": "sysadmin-cvs"
								}
							],
							"id": 2990,
							"name": "mohanboddu",
							"openid": "mohanboddu.id.fedoraproject.org"
						},
						"user_id": 2990
					},
					"comment_id": 2804444
				},
				{
					"bug_id": 2143011,
					"comment": {
						"id": 2804446,
						"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
						"timestamp": "2022-12-01 17:36:29",
						"update_id": 464807,
						"user": {
							"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
							"email": "abokovoy@redhat.com",
							"groups": [
								{
									"name": "packager"
								},
								{
									"name": "ipausers"
								},
								{
									"name": "fedora-contributor"
								},
								{
									"name": "signed_fpca"
								},
								{
									"name": "fedorabugs"
								},
								{
									"name": "bind-dyndb-ldap"
								},
								{
									"name": "gitfreeipa"
								},
								{
									"name": "gitslapi-nis"
								},
								{
									"name": "gitfreeipa-docs"
								},
								{
									"name": "trust admins"
								}
							],
							"id": 1242,
							"name": "abbra",
							"openid": "abbra.id.fedoraproject.org"
						},
						"user_id": 1242
					},
					"comment_id": 2804446
				}
			],
			"security": true,
			"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]",
			"bugzilla": {
				"bug_id": "2143011",
				"creation_ts": "2022-11-15 19:33:12 +0000",
				"short_desc": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]",
				"delta_ts": "2022-12-07 13:29:09 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Security, SecurityTracking",
				"priority": "high",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "2140960",
						"alias": "CVE-2022-42898",
						"creation_ts": "2022-11-08 09:13:39 +0000",
						"short_desc": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing",
						"delta_ts": "2023-03-06 14:12:33 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Security",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"2140961",
							"2140962",
							"2140963",
							"2140964",
							"2140965",
							"2140966",
							"2140967",
							"2140968",
							"2140969",
							"2140970",
							"2140971",
							"2142753",
							"2143009",
							"2143010",
							"2143011",
							"2143115",
							"2143116",
							"2143117",
							"2143118",
							"2143119",
							"2143120",
							"2143121",
							"2143122",
							"2143145"
						],
						"blocked": [
							{
								"bug_id": "2140956",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHSA-2022:9029",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "16764911",
								"comment_count": "0",
								"who": {
									"text": "saroy",
									"name": "Sandipan Roy"
								},
								"bug_when": "2022-11-08 09:13:39 +0000",
								"thetext": "Three integer overflow vulnerabilities have been discovered in the MIT krb5 library function krb5_parse_pac()"
							},
							{
								"isprivate": "0",
								"commentid": "16792588",
								"comment_count": "4",
								"who": {
									"text": "zmiele",
									"name": "Zack Miele"
								},
								"bug_when": "2022-11-15 19:31:19 +0000",
								"thetext": "Created krb5 tracking bugs for this issue:\n\nAffects: fedora-35 [bug 2143009]\nAffects: fedora-36 [bug 2143010]"
							},
							{
								"isprivate": "0",
								"commentid": "16792593",
								"comment_count": "5",
								"who": {
									"text": "zmiele",
									"name": "Zack Miele"
								},
								"bug_when": "2022-11-15 19:33:21 +0000",
								"thetext": "Created krb5 tracking bugs for this issue:\n\nAffects: fedora-37 [bug 2143011]"
							},
							{
								"isprivate": "0",
								"commentid": "16793870",
								"comment_count": "6",
								"who": {
									"text": "saroy",
									"name": "Sandipan Roy"
								},
								"bug_when": "2022-11-16 05:22:45 +0000",
								"thetext": "Created freeipa tracking bugs for this issue:\n\nAffects: fedora-35 [bug 2143118]\nAffects: fedora-36 [bug 2143119]\nAffects: fedora-37 [bug 2143120]\n\n\nCreated samba tracking bugs for this issue:\n\nAffects: fedora-35 [bug 2143115]\nAffects: fedora-36 [bug 2143116]\nAffects: fedora-37 [bug 2143117]"
							},
							{
								"isprivate": "0",
								"commentid": "16825070",
								"comment_count": "10",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 09:23:53 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 9\n\nVia RHSA-2022:8637 https://access.redhat.com/errata/RHSA-2022:8637"
							},
							{
								"isprivate": "0",
								"commentid": "16825092",
								"comment_count": "11",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 09:28:54 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8\n\nVia RHSA-2022:8638 https://access.redhat.com/errata/RHSA-2022:8638"
							},
							{
								"isprivate": "0",
								"commentid": "16825133",
								"comment_count": "12",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 09:44:05 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.4 Extended Update Support\n\nVia RHSA-2022:8639 https://access.redhat.com/errata/RHSA-2022:8639"
							},
							{
								"isprivate": "0",
								"commentid": "16825147",
								"comment_count": "13",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 09:52:09 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.1 Update Services for SAP Solutions\n\nVia RHSA-2022:8641 https://access.redhat.com/errata/RHSA-2022:8641"
							},
							{
								"isprivate": "0",
								"commentid": "16825161",
								"comment_count": "14",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 09:56:47 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 7\n\nVia RHSA-2022:8640 https://access.redhat.com/errata/RHSA-2022:8640"
							},
							{
								"isprivate": "0",
								"commentid": "16825334",
								"comment_count": "15",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-28 10:41:22 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.2 Advanced Update Support\n  Red Hat Enterprise Linux 8.2 Update Services for SAP Solutions\n  Red Hat Enterprise Linux 8.2 Telecommunications Update Service\n\nVia RHSA-2022:8648 https://access.redhat.com/errata/RHSA-2022:8648"
							},
							{
								"isprivate": "0",
								"commentid": "16828437",
								"comment_count": "16",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-29 08:39:06 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 8.6 Extended Update Support\n\nVia RHSA-2022:8662 https://access.redhat.com/errata/RHSA-2022:8662"
							},
							{
								"isprivate": "0",
								"commentid": "16828455",
								"comment_count": "17",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-29 08:49:39 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 6 Extended Lifecycle Support\n\nVia RHSA-2022:8663 https://access.redhat.com/errata/RHSA-2022:8663"
							},
							{
								"isprivate": "0",
								"commentid": "16829016",
								"comment_count": "18",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-11-29 12:54:49 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Enterprise Linux 9.0 Extended Update Support\n\nVia RHSA-2022:8669 https://access.redhat.com/errata/RHSA-2022:8669"
							},
							{
								"isprivate": "0",
								"commentid": "16878870",
								"comment_count": "19",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2022-12-14 14:16:37 +0000",
								"thetext": "This issue has been addressed in the following products:\n\n  Red Hat Virtualization 4 for Red Hat Enterprise Linux 8\n\nVia RHSA-2022:9029 https://access.redhat.com/errata/RHSA-2022:9029"
							},
							{
								"isprivate": "0",
								"commentid": "16885267",
								"comment_count": "20",
								"who": {
									"text": "prodsec-dev",
									"name": "Product Security DevOps Team"
								},
								"bug_when": "2022-12-15 17:18:31 +0000",
								"thetext": "This bug is now closed. Further updates for individual products will be reflected on the CVE page(s):\n\nhttps://access.redhat.com/security/cve/cve-2022-42898"
							}
						]
					}
				],
				"external_bugs": {
					"text": "FREEIPA-8987",
					"name": "Red Hat Issue Tracker"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "16792591",
						"comment_count": "0",
						"who": {
							"text": "zmiele",
							"name": "Zack Miele"
						},
						"bug_when": "2022-11-15 19:33:12 +0000",
						"thetext": "\nMore information about this security flaw is available in the following bug:\n\nhttp://bugzilla.redhat.com/show_bug.cgi?id=2140960\n\nDisclaimer: Community trackers are created by Red Hat Product Security team on a best effort basis. Package maintainers are required to ascertain if the flaw indeed affects their package, before starting the update process."
					},
					{
						"isprivate": "0",
						"commentid": "16792592",
						"comment_count": "1",
						"who": {
							"text": "zmiele",
							"name": "Zack Miele"
						},
						"bug_when": "2022-11-15 19:33:14 +0000",
						"thetext": "Use the following template to for the 'fedpkg update' request to submit an\nupdate for this issue as it contains the top-level parent bug(s) as well as\nthis tracking bug.  This will ensure that all associated bugs get updated\nwhen new packages are pushed to stable.\n\n=====\n\n# bugfix, security, enhancement, newpackage (required)\ntype=security\n\n# low, medium, high, urgent (required)\nseverity=high\n\n# testing, stable\nrequest=testing\n\n# Bug numbers: 1234,9876\nbugs=2140960,2143011\n\n# Description of your update\nnotes=Security fix for [PUT CVEs HERE]\n\n# Enable request automation based on the stable/unstable karma thresholds\nautokarma=True\nstable_karma=3\nunstable_karma=-3\n\n# Automatically close bugs when this marked as stable\nclose_bugs=True\n\n# Suggest that users restart after update\nsuggest_reboot=False\n\n======\n\nAdditionally, you may opt to use the bodhi web interface to submit updates:\n\nhttps://bodhi.fedoraproject.org/updates/new"
					},
					{
						"isprivate": "0",
						"commentid": "16796958",
						"comment_count": "2",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-11-16 17:47:44 +0000",
						"thetext": "FEDORA-2022-a1747aca80 has been submitted as an update to Fedora 37. https://bodhi.fedoraproject.org/updates/FEDORA-2022-a1747aca80"
					},
					{
						"isprivate": "0",
						"commentid": "16797904",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-11-17 02:39:27 +0000",
						"thetext": "FEDORA-2022-a1747aca80 has been pushed to the Fedora 37 testing repository.\nSoon you'll be able to install the update with the following command:\n`sudo dnf upgrade --enablerepo=updates-testing --refresh --advisory=FEDORA-2022-a1747aca80`\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2022-a1747aca80\n\nSee also https://fedoraproject.org/wiki/QA:Updates_Testing for more information on how to test updates."
					},
					{
						"isprivate": "0",
						"commentid": "16808119",
						"comment_count": "4",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-11-22 01:36:31 +0000",
						"thetext": "FEDORA-2022-a1747aca80 has been pushed to the Fedora 37 stable repository.\nIf problem still persists, please make note of it in this bug report."
					},
					{
						"isprivate": "0",
						"commentid": "16842177",
						"comment_count": "5",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 15:02:31 +0000",
						"thetext": "FEDORA-2022-8050ab2c35 has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35"
					},
					{
						"isprivate": "0",
						"commentid": "16842578",
						"comment_count": "6",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-01 17:38:03 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been submitted as an update to Fedora 38. https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e"
					},
					{
						"isprivate": "0",
						"commentid": "16856887",
						"comment_count": "7",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2022-12-07 13:29:09 +0000",
						"thetext": "FEDORA-2022-311128dd7e has been pushed to the Fedora 38 stable repository.\nIf problem still persists, please make note of it in this bug report."
					}
				]
			}
		}
	],
	"builds": [
		{
			"epoch": 0,
			"nvr": "krb5-1.20.1-1.fc38",
			"release_id": 66,
			"signed": true,
			"type": "rpm",
			"package": {
				"aarch64": [
					{
						"name": "krb5-server",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-devel",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-server-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-libs",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-libs-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-debugsource",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-workstation",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-tests",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-server-ldap",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "libkadm5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-server-ldap-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-workstation-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "libkadm5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-pkinit-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-pkinit",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					},
					{
						"name": "krb5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "aarch64"
					}
				],
				"i686": [
					{
						"name": "krb5-libs-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-workstation",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-debugsource",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-tests",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-libs",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-server-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-server",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-devel",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "libkadm5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-server-ldap-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-workstation-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-pkinit-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-server-ldap",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "libkadm5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					},
					{
						"name": "krb5-pkinit",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "i686"
					}
				],
				"ppc64le": [
					{
						"name": "krb5-libs-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-workstation",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-server-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-libs",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-server",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-debugsource",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-tests",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-server-ldap",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-devel",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "libkadm5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-server-ldap-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-workstation-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "libkadm5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-pkinit-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-pkinit",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					},
					{
						"name": "krb5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "ppc64le"
					}
				],
				"s390x": [
					{
						"name": "krb5-debugsource",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-tests",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-libs-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-workstation",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-libs",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-server-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-server",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-devel",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "libkadm5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-server-ldap-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-workstation-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-pkinit-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-server-ldap",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "libkadm5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					},
					{
						"name": "krb5-pkinit",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "s390x"
					}
				],
				"src": [
					{
						"name": "krb5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "src"
					}
				],
				"x86_64": [
					{
						"name": "krb5-workstation-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-pkinit-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-pkinit",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-server-ldap",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-libs-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-workstation",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "libkadm5",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-server",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "libkadm5-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-server-ldap-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-server-debuginfo",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-devel",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-libs",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-debugsource",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					},
					{
						"name": "krb5-tests",
						"version": "1.20.1",
						"release": "1.fc38",
						"arch": "x86_64"
					}
				]
			}
		}
	],
	"close_bugs": true,
	"comments": [
		{
			"id": 2804177,
			"text": "This update was automatically created",
			"timestamp": "2022-12-01 15:02:13",
			"update_id": 464807,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 2804178,
			"text": "This update's test gating status has been changed to 'waiting'.",
			"timestamp": "2022-12-01 15:03:48",
			"update_id": 464807,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"bug_feedback": [
				{
					"bug": {
						"bug_id": 2114766,
						"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]"
					},
					"bug_id": 2114766,
					"comment_id": 2804413
				},
				{
					"bug": {
						"bug_id": 2119704,
						"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]"
					},
					"bug_id": 2119704,
					"comment_id": 2804413
				},
				{
					"bug": {
						"bug_id": 2124463,
						"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]"
					},
					"bug_id": 2124463,
					"comment_id": 2804413
				},
				{
					"bug": {
						"bug_id": 2129113,
						"title": "Incorrect password expiration handling [fedora-rawhide]"
					},
					"bug_id": 2129113,
					"comment_id": 2804413
				},
				{
					"bug": {
						"bug_id": 2143011,
						"security": true,
						"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]"
					},
					"bug_id": 2143011,
					"comment_id": 2804413
				}
			],
			"id": 2804413,
			"karma": -1,
			"text": "this wasn't meant to be on mainline yet, per @ab .",
			"timestamp": "2022-12-01 17:20:53",
			"update_id": 464807,
			"user": {
				"avatar": "https://seccdn.libravatar.org/avatar/0e6c01c694d74afb0cbb65bc1be91950111503818caf492c0938dc2b97c48c41?s=24&d=retro",
				"email": "awilliam@redhat.com",
				"groups": [
					{
						"name": "proventesters"
					},
					{
						"name": "provenpackager"
					},
					{
						"name": "packager"
					},
					{
						"name": "qa-tools-sig"
					},
					{
						"name": "fedora-contributor"
					},
					{
						"name": "news"
					},
					{
						"name": "gittriage"
					},
					{
						"name": "sysadmin"
					},
					{
						"name": "gitspin-kickstarts"
					},
					{
						"name": "signed_fpca"
					},
					{
						"name": "gitgeneric-release"
					},
					{
						"name": "yak_farmers"
					},
					{
						"name": "triagers"
					},
					{
						"name": "qa"
					},
					{
						"name": "sysadmin-qa"
					},
					{
						"name": "fedorabugs"
					},
					{
						"name": "ipausers"
					},
					{
						"name": "gitmkinitrd"
					},
					{
						"name": "qa-admin"
					},
					{
						"name": "sysadmin-main"
					},
					{
						"name": "common-issues-triage"
					},
					{
						"name": "aws-qa"
					},
					{
						"name": "gitfedora-project-schedule"
					},
					{
						"name": "change-wranglers"
					},
					{
						"name": "fedora-ci-admins"
					},
					{
						"name": "program-management"
					},
					{
						"name": "trust admins"
					}
				],
				"id": 302,
				"name": "adamwill",
				"openid": "adamwill.id.fedoraproject.org"
			},
			"user_id": 302
		},
		{
			"bug_feedback": [
				{
					"bug": {
						"bug_id": 2114766,
						"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]"
					},
					"bug_id": 2114766,
					"comment_id": 2804415
				},
				{
					"bug": {
						"bug_id": 2119704,
						"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]"
					},
					"bug_id": 2119704,
					"comment_id": 2804415
				},
				{
					"bug": {
						"bug_id": 2124463,
						"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]"
					},
					"bug_id": 2124463,
					"comment_id": 2804415
				},
				{
					"bug": {
						"bug_id": 2129113,
						"title": "Incorrect password expiration handling [fedora-rawhide]"
					},
					"bug_id": 2129113,
					"comment_id": 2804415
				},
				{
					"bug": {
						"bug_id": 2143011,
						"security": true,
						"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]"
					},
					"bug_id": 2143011,
					"comment_id": 2804415
				}
			],
			"id": 2804415,
			"karma": -1,
			"timestamp": "2022-12-01 17:21:05",
			"update_id": 464807,
			"user": {
				"avatar": "https://seccdn.libravatar.org/avatar/e66f540a8e2d93d96cbba97628e82213a8eed237c744f2ce5184d7c9588a8d18?s=24&d=retro",
				"email": "klember@redhat.com",
				"groups": [
					{
						"name": "qa"
					},
					{
						"name": "packager"
					},
					{
						"name": "provenpackager"
					},
					{
						"name": "gnome-sig"
					},
					{
						"name": "ipausers"
					},
					{
						"name": "fedora-contributor"
					},
					{
						"name": "signed_fpca"
					},
					{
						"name": "fedorabugs"
					},
					{
						"name": "gitspin-kickstarts"
					},
					{
						"name": "rust-sig"
					},
					{
						"name": "hosted-content"
					},
					{
						"name": "flatpak-sig"
					}
				],
				"id": 285,
				"name": "kalev",
				"openid": "kalev.id.fedoraproject.org"
			},
			"user_id": 285
		},
		{
			"bug_feedback": [
				{
					"bug": {
						"bug_id": 2114766,
						"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]"
					},
					"bug_id": 2114766,
					"comment_id": 2804418
				},
				{
					"bug": {
						"bug_id": 2119704,
						"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]"
					},
					"bug_id": 2119704,
					"comment_id": 2804418
				},
				{
					"bug": {
						"bug_id": 2124463,
						"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]"
					},
					"bug_id": 2124463,
					"comment_id": 2804418
				},
				{
					"bug": {
						"bug_id": 2129113,
						"title": "Incorrect password expiration handling [fedora-rawhide]"
					},
					"bug_id": 2129113,
					"comment_id": 2804418
				},
				{
					"bug": {
						"bug_id": 2143011,
						"security": true,
						"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]"
					},
					"bug_id": 2143011,
					"comment_id": 2804418
				}
			],
			"id": 2804418,
			"karma": -1,
			"timestamp": "2022-12-01 17:21:19",
			"update_id": 464807,
			"user": {
				"avatar": "https://seccdn.libravatar.org/avatar/e5045d506aa85d296de0918e4dd52b74cc33dec956be122a03bfdbe4be24e97f?s=24&d=retro",
				"email": "decathorpe@gmail.com",
				"groups": [
					{
						"name": "packager"
					},
					{
						"name": "provenpackager"
					},
					{
						"name": "ipausers"
					},
					{
						"name": "fedora-contributor"
					},
					{
						"name": "signed_fpca"
					},
					{
						"name": "fedorabugs"
					},
					{
						"name": "rust-sig"
					},
					{
						"name": "packaging-committee"
					},
					{
						"name": "libreoffice-sig"
					},
					{
						"name": "multimedia-sig"
					},
					{
						"name": "diversity-pride"
					},
					{
						"name": "pantheon-sig"
					}
				],
				"id": 388,
				"name": "decathorpe",
				"openid": "decathorpe.id.fedoraproject.org"
			},
			"user_id": 388
		},
		{
			"id": 2804419,
			"text": "This update has been obsoleted.",
			"timestamp": "2022-12-01 17:21:20",
			"update_id": 464807,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"bug_feedback": [
				{
					"bug": {
						"bug_id": 2114766,
						"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]"
					},
					"bug_id": 2114766,
					"comment_id": 2804444
				},
				{
					"bug": {
						"bug_id": 2119704,
						"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]"
					},
					"bug_id": 2119704,
					"comment_id": 2804444
				},
				{
					"bug": {
						"bug_id": 2124463,
						"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]"
					},
					"bug_id": 2124463,
					"comment_id": 2804444
				},
				{
					"bug": {
						"bug_id": 2129113,
						"title": "Incorrect password expiration handling [fedora-rawhide]"
					},
					"bug_id": 2129113,
					"comment_id": 2804444
				},
				{
					"bug": {
						"bug_id": 2143011,
						"security": true,
						"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]"
					},
					"bug_id": 2143011,
					"comment_id": 2804444
				}
			],
			"id": 2804444,
			"karma": -1,
			"timestamp": "2022-12-01 17:34:34",
			"update_id": 464807,
			"user": {
				"avatar": "https://seccdn.libravatar.org/avatar/20652954adacfd9f6e26536bbcf3b5fbc850dc61f8a2e67c5bfbc6e345032976?s=24&d=retro",
				"email": "mboddu@bhujji.com",
				"groups": [
					{
						"name": "packager"
					},
					{
						"name": "bodhiadmin"
					},
					{
						"name": "releng-team"
					},
					{
						"name": "sysadmin-main"
					},
					{
						"name": "provenpackager"
					},
					{
						"name": "fedora-contributor"
					},
					{
						"name": "sysadmin"
					},
					{
						"name": "sysadmin-web"
					},
					{
						"name": "sysadmin-releng"
					},
					{
						"name": "sysadmin-bodhi"
					},
					{
						"name": "cvsadmin"
					},
					{
						"name": "ipausers"
					},
					{
						"name": "fedorabugs"
					},
					{
						"name": "torrentadmin"
					},
					{
						"name": "signed_fpca"
					},
					{
						"name": "epel-cabal"
					},
					{
						"name": "signers"
					},
					{
						"name": "sysadmin-cvs"
					}
				],
				"id": 2990,
				"name": "mohanboddu",
				"openid": "mohanboddu.id.fedoraproject.org"
			},
			"user_id": 2990
		},
		{
			"bug_feedback": [
				{
					"bug": {
						"bug_id": 2114766,
						"title": "MIT krb5 client does not set \"supportedCMSTypes\" for pkinit and therefore Heimdal KDC uses SHA1 for CMS signature [fedora-rawhide]"
					},
					"bug_id": 2114766,
					"comment_id": 2804446
				},
				{
					"bug": {
						"bug_id": 2119704,
						"title": "Mishandling of CMS_verify() errors in PKINIT plugin [fedora-all]"
					},
					"bug_id": 2119704,
					"comment_id": 2804446
				},
				{
					"bug": {
						"bug_id": 2124463,
						"title": "Rebase krb5 to latest upstream release 1.20 [fedora-rawhide]"
					},
					"bug_id": 2124463,
					"comment_id": 2804446
				},
				{
					"bug": {
						"bug_id": 2129113,
						"title": "Incorrect password expiration handling [fedora-rawhide]"
					},
					"bug_id": 2129113,
					"comment_id": 2804446
				},
				{
					"bug": {
						"bug_id": 2143011,
						"security": true,
						"title": "CVE-2022-42898 krb5: integer overflow vulnerabilities in PAC parsing [fedora-37]"
					},
					"bug_id": 2143011,
					"comment_id": 2804446
				}
			],
			"id": 2804446,
			"text": "A proper update is https://bodhi.fedoraproject.org/updates/FEDORA-2022-311128dd7e which includes krb5, samba, and freeipa.",
			"timestamp": "2022-12-01 17:36:29",
			"update_id": 464807,
			"user": {
				"avatar": "https://seccdn.libravatar.org/avatar/4c1558b281e35884af7130053458974b37461e46548b7e4dfea6bb085cd9d123?s=24&d=retro",
				"email": "abokovoy@redhat.com",
				"groups": [
					{
						"name": "packager"
					},
					{
						"name": "ipausers"
					},
					{
						"name": "fedora-contributor"
					},
					{
						"name": "signed_fpca"
					},
					{
						"name": "fedorabugs"
					},
					{
						"name": "bind-dyndb-ldap"
					},
					{
						"name": "gitfreeipa"
					},
					{
						"name": "gitslapi-nis"
					},
					{
						"name": "gitfreeipa-docs"
					},
					{
						"name": "trust admins"
					}
				],
				"id": 1242,
				"name": "abbra",
				"openid": "abbra.id.fedoraproject.org"
			},
			"user_id": 1242
		},
		{
			"id": 2804494,
			"text": "This update's test gating status has been changed to 'failed'.",
			"timestamp": "2022-12-01 18:15:35",
			"update_id": 464807,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		}
	],
	"content_type": "rpm",
	"critpath": true,
	"date_pushed": "2022-12-01 15:03:48",
	"date_submitted": "2022-12-01 15:02:13",
	"date_testing": "2022-12-01 15:03:48",
	"karma": -4,
	"notes": "Automatic update for krb5-1.20.1-1.fc38.\n\n##### **Changelog**\n\n```\n* Wed Nov 23 2022 Julien Rische <jrische@redhat.com> - 1.20.1-1\n- New upstream version (1.20.1)\n- Resolves: rhbz#2124463\n- Restore \"supportedCMSTypes\" attribute in PKINIT preauth requests\n- Set SHA-512 or SHA-256 with RSA as preferred CMS signature algorithms\n- Resolves: rhbz#2114766\n- Update error checking for OpenSSL CMS_verify\n- Resolves: rhbz#2119704\n- Remove invalid password expiry warning\n- Resolves: rhbz#2129113\n* Wed Nov  9 2022 Julien Rische <jrische@redhat.com> - 1.19.2-13\n- Fix integer overflows in PAC parsing (CVE-2022-42898)\n- Resolves: rhbz#2143011\n* Tue Aug  2 2022 Andreas Schneider <asn@redhat.com> - 1.19.2-12\n- Use baserelease to set the release number\n- Do not define netlib, but use autoconf detection for res_* functions\n- Add missing BR for resolv_wrapper to run t_discover_uri.py\n\n```",
	"release": {
		"branch": "f38",
		"candidate_tag": "f38-updates-candidate",
		"composed_by_bodhi": true,
		"create_automatic_updates": false,
		"dist_tag": "f38",
		"eol": "2024-05-21",
		"id_prefix": "FEDORA",
		"long_name": "Fedora 38",
		"mail_template": "fedora_errata_template",
		"name": "F38",
		"override_tag": "f38-override",
		"package_manager": "dnf",
		"pending_signing_tag": "f38-signing-pending",
		"pending_stable_tag": "f38-updates-pending",
		"pending_testing_tag": "f38-updates-testing-pending",
		"stable_tag": "f38-updates",
		"state": "archived",
		"testing_repository": "updates-testing",
		"testing_tag": "f38-updates-testing",
		"version": "38"
	},
	"severity": "unspecified",
	"stable_karma": 3,
	"status": "obsolete",
	"suggest": "unspecified",
	"test_gating_status": "failed",
	"title": "krb5-1.20.1-1.fc38",
	"type": "security",
	"url": "https://bodhi.fedoraproject.org/updates/FEDORA-2022-8050ab2c35",
	"unstable_karma": -3,
	"updateid": "FEDORA-2022-8050ab2c35",
	"user": {
		"avatar": "https://seccdn.libravatar.org/avatar/7f7f8609bb74ffe7ca76cf653b5cee6ec763327f259bbec3718da58afbd8ad00?s=24&d=retro",
		"email": "jrische@redhat.com",
		"groups": [
			{
				"name": "packager"
			},
			{
				"name": "ipausers"
			},
			{
				"name": "fedora-contributor"
			},
			{
				"name": "signed_fpca"
			},
			{
				"name": "fedorabugs"
			}
		],
		"id": 6859,
		"name": "jrische",
		"openid": "jrische.id.fedoraproject.org"
	},
	"version_hash": "3861f46a3748a38dcf2c2f869c3ac63d49d92d1e"
}
