{
	"alias": "FEDORA-2015-e3ec4cbf8f",
	"autokarma": true,
	"bugs": [
		{
			"bug_id": 1269917,
			"security": true,
			"title": "lxdm: X server authorizations are not revoked after user log out",
			"bugzilla": {
				"bug_id": "1269917",
				"creation_ts": "2015-10-08 13:32:52 +0000",
				"short_desc": "lxdm: X server authorizations are not revoked after user log out",
				"delta_ts": "2016-07-19 18:09:23 +0000",
				"bug_status": "CLOSED",
				"resolution": "EOL",
				"keywords": "Security",
				"priority": "unspecified",
				"bug_severity": "unspecified",
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "8703099",
						"comment_count": "0",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-10-08 13:32:52 +0000",
						"thetext": "Quoting from the report I sent upstream:\n\nlxdm does not restart X server after user log out.  It also does not\nseem to do anything to revoke granted authorizations.  So the\nfollowing attack is possible on multi-user systems:\n\n- User1 logs in via lxdm.  During the session start up, authentication\n  cookie is copied to user1's .Xauthority.\n- User1 logs out.\n- As X server is not restarted and X server authentication cookies are\n  not regenerated, user1 can still connect via text console or remotely\n  via SSH and start X applications on the X server.\n- No authentication cookie change happens after log in of some other\n  user2, so user1 can also mess with user2's session.\n\nBesides MIT-MAGIC authentication cookies, there are other\nauthorizations that may need to be cleaned up.  For example, user1 can\nrun 'xhost +si:localuser:`id -un`' while they are logged in.  That\nmakes X server accept connections from given local user regardless of\nwhether they have valid cookie or not.  This authorization is also not\nrevoked after user log out.\n\nAt least in Fedora, 'xhost +si:localuser:`id -un`' is run when\ninitializing user's X session.\n\nVersion-Release number of selected component (if applicable):\n\nTested with 0.4.1 in F22, but also with the 0.5.1-7.D20151007gite8f38708 from master rebuilt for F22."
					},
					{
						"isprivate": "0",
						"commentid": "8705565",
						"comment_count": "1",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-10-09 08:03:14 +0000",
						"thetext": "Upstream pointed out that it's already possible to have lxdm restart X server after user logout by setting reset = 1 in the [server] section of the lxdm.conf.  This functionality is available in Fedora 0.4.1 packages.\n\nUpstream also explained they default to no X restart to have faster and smoother logout.  The issue is also pretty minor on single user machines.  However, I'm not convinced Fedora should only assume it's only used in such use cases and default to safer reset=1.  I see other *DMs (gdm, kdm, lightdm) do X restarts as well."
					},
					{
						"isprivate": "0",
						"commentid": "8845542",
						"comment_count": "2",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-11-20 09:51:28 +0000",
						"thetext": "Making this public."
					},
					{
						"isprivate": "0",
						"commentid": "8856186",
						"comment_count": "3",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-24 14:07:50 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2015-e3ec4cbf8f"
					},
					{
						"isprivate": "0",
						"commentid": "8858001",
						"comment_count": "4",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-25 02:53:20 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-e3ec4cbf8f"
					},
					{
						"isprivate": "0",
						"commentid": "8893413",
						"comment_count": "5",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-12-06 01:23:51 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report."
					},
					{
						"isprivate": "0",
						"commentid": "9527159",
						"comment_count": "6",
						"who": {
							"text": "bcotton",
							"name": "Fedora End Of Life"
						},
						"bug_when": "2016-07-19 18:09:23 +0000",
						"thetext": "Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is\nno longer maintained, which means that it will not receive any further\nsecurity or bug fix updates. As a result we are closing this bug.\n\nIf you can reproduce this bug against a currently maintained version of\nFedora please feel free to reopen this bug against that version. If you\nare unable to reopen this bug, please file a new report against the\ncurrent release. If you experience problems, please add a comment to this\nbug.\n\nThank you for reporting this bug and we are sorry it could not be fixed."
					}
				]
			}
		},
		{
			"bug_id": 1283581,
			"title": "Not possible to log in after upgrade to Fedora 23",
			"bugzilla": {
				"bug_id": "1283581",
				"creation_ts": "2015-11-19 10:58:02 +0000",
				"short_desc": "Not possible to log in after upgrade to Fedora 23",
				"delta_ts": "2015-12-10 03:51:37 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"priority": "unspecified",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "1268900",
						"creation_ts": "2015-10-05 15:07:11 +0000",
						"short_desc": "lxdm: X server started without -auth, exposing it to connections form any local user",
						"delta_ts": "2015-11-23 12:23:11 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Reopened, Security",
						"priority": "unspecified",
						"bug_severity": "high",
						"depends_on": [
							"1283581"
						],
						"blocked": [
							{
								"bug_id": "1284460",
								"alias": "CVE-2015-8308",
								"creation_ts": "2015-11-23 12:07:08 +0000",
								"short_desc": "CVE-2015-8308 lxdm: X server started without -auth, exposing it to connections form any local user",
								"delta_ts": "2019-09-29 13:40:12 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "Security",
								"priority": "medium",
								"bug_severity": "medium",
								"depends_on": [
									"1268900"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "8851271",
										"comment_count": "0",
										"who": {
											"text": "mprpic",
											"name": "Martin PrpiÄ"
										},
										"bug_when": "2015-11-23 12:07:08 +0000",
										"thetext": "LXDM before 0.5.2 did not start X server with -auth parameter.\nTherefore any user able to connect to it (typically all local users)\nwould have their X connections accepted.  The issue was fixed via:\n\nhttp://git.lxde.org/gitweb/?p=lxde/lxdm.git;a=commitdiff;h=e8f387089e241360bdc6955d3e479450722dcea3\n\nAdditional information is available in bug 1268900."
									},
									{
										"isprivate": "0",
										"commentid": "8851332",
										"comment_count": "1",
										"who": {
											"text": "thoger",
											"name": "Tomas Hoger"
										},
										"bug_when": "2015-11-23 12:22:02 +0000",
										"thetext": "This was already fixed in all Fedora versions via bug 1268900."
									}
								]
							}
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "8692546",
								"comment_count": "0",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-05 15:07:11 +0000",
								"thetext": "Description of problem:\n\nX server in F22 allows X clients to connect even when they have no valid MIT-MAGIC authentication cookie.  Connections are accepted from different users (i.e. are not related to 'xhost +si:localuser:`id -un`').  I could reproduce this with both X session started from *dm (lxdm in my case) as well as X server started manually from the text console.  Besides Xorg, I quickly tested with Xephyr and Xnest - they also seem affected in the same way.\n\nVersion-Release number of selected component (if applicable):\n\nxorg-x11-server-Xorg-1.17.2-2.fc22.x86_64\n\nSteps to Reproduce:\n1. User1 opens X session - via DM or startx.\n2. User2 connects on other text virtual terminal or via ssh.\n3. User2 sets DISPLAY to :0 and can connect to User1's X session - start new X apps or use xwd to steal info (it seems session has to be active / displayed for at least xwd -root to work).\n\nActual results:\n\nUser2 is allowed to connect to User1's X session.\n\nExpected results:\n\nxterm: Xt error: Can't open display: :0"
							},
							{
								"isprivate": "0",
								"commentid": "8695019",
								"comment_count": "1",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-06 10:33:17 +0000",
								"thetext": "I did some more testing, and I could not reproduce with a defaultish (I changed /etc/gdm/custom.conf to WaylandEnable=false) F22 installation.  I could not reproduce with GNOME sessions (shell or classic) started from gdm.  I could reproduce with Xephyr or Xnest started within GNOME session.  I could also reproducer after replacing gdm with lxdm with the default GNOME shell session, and also start applications on the lxdm's pre-login screen."
							},
							{
								"isprivate": "0",
								"commentid": "8695556",
								"comment_count": "2",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-06 13:18:07 +0000",
								"thetext": "Ok, I think I got confused by lxdm doing the wrong thing (starting X server without -auth), plus my pebkac mistake when testing (sometimes starting X server directly and sometimes using startx).\n\nI'm re-assigning to lxdm to have it fixed to properly start X server with -auth."
							},
							{
								"isprivate": "0",
								"commentid": "8697007",
								"comment_count": "3",
								"who": {
									"text": "rstrode",
									"name": "Ray Strode [halfline]"
								},
								"bug_when": "2015-10-06 21:19:45 +0000",
								"thetext": "right, X without -auth implies anyone local can connect. if lxdm is doing that, it needs to be fixed."
							},
							{
								"isprivate": "0",
								"commentid": "8697030",
								"comment_count": "4",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-06 21:32:34 +0000",
								"thetext": "(In reply to Ray Strode [halfline] from comment #3)\n> if lxdm is doing that, it needs to be fixed.\n\nI already mailed upstream author dgod.osa@gmail about this."
							},
							{
								"isprivate": "0",
								"commentid": "8699152",
								"comment_count": "5",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-07 13:58:05 +0000",
								"thetext": "I got no response from upstream yet, but I noticed this commit that was added to upstream git few hours ago:\n\nhttp://git.lxde.org/gitweb/?p=lxde/lxdm.git;a=commitdiff;h=e8f387089e241360bdc6955d3e479450722dcea3"
							},
							{
								"isprivate": "0",
								"commentid": "8701441",
								"comment_count": "6",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-08 06:55:34 +0000",
								"thetext": "I actually got a \"Should be fixed in git now.\" response from upstream, but it ended up in my spam folder."
							},
							{
								"isprivate": "0",
								"commentid": "8702047",
								"comment_count": "7",
								"who": {
									"text": "mtasaka",
									"name": "Mamoru TASAKA"
								},
								"bug_when": "2015-10-08 09:47:04 +0000",
								"thetext": "F-22 lxdm is so old (published more than 3 years ago) and extra check is needed (and I don't use F-22 any longer)"
							},
							{
								"isprivate": "0",
								"commentid": "8702450",
								"comment_count": "8",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-08 11:39:49 +0000",
								"thetext": "Created attachment 1080978\nPatch re-diffed for 0.4.1\n\n(In reply to Mamoru TASAKA from comment #7)\n> F-22 lxdm is so old (published more than 3 years ago) and extra check is\n> needed (and I don't use F-22 any longer)\n\nUpstream patch applies rather cleanly to 0.4.1 in F22.  Attaching re-diffed patched.\n\nScratch build for F22 is here:\nhttp://koji.fedoraproject.org/koji/taskinfo?taskID=11372079\n\nWith the patch, X is now started with -auth argument as expected."
							},
							{
								"isprivate": "0",
								"commentid": "8702478",
								"comment_count": "9",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-08 11:48:01 +0000",
								"thetext": "Making this bug public."
							},
							{
								"isprivate": "0",
								"commentid": "8702485",
								"comment_count": "10",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-08 11:51:18 +0000",
								"thetext": "Mamoru, if you're going to prepare updates for F21 and F22, consider also applying the fix for bug 846086.  Upstream patch for that issue is available."
							},
							{
								"isprivate": "0",
								"commentid": "8703354",
								"comment_count": "11",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-08 14:33:04 +0000",
								"thetext": "lxdm-0.4.1-10.fc22 has been submitted as an update to Fedora 22. https://bodhi.fedoraproject.org/updates/FEDORA-2015-adbae85c55"
							},
							{
								"isprivate": "0",
								"commentid": "8703361",
								"comment_count": "12",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-08 14:33:55 +0000",
								"thetext": "lxdm-0.4.1-10.fc21 has been submitted as an update to Fedora 21. https://bodhi.fedoraproject.org/updates/FEDORA-2015-7766c0d939"
							},
							{
								"isprivate": "0",
								"commentid": "8703377",
								"comment_count": "13",
								"who": {
									"text": "mtasaka",
									"name": "Mamoru TASAKA"
								},
								"bug_when": "2015-10-08 14:37:27 +0000",
								"thetext": "F-23 is via\nhttps://bodhi.fedoraproject.org/updates/FEDORA-2015-44deee4d7a"
							},
							{
								"isprivate": "0",
								"commentid": "8705561",
								"comment_count": "14",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-10-09 07:57:11 +0000",
								"thetext": "The git version with the above fix was tagged and released as lxdm 0.5.2."
							},
							{
								"isprivate": "0",
								"commentid": "8706494",
								"comment_count": "15",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-09 12:51:34 +0000",
								"thetext": "lxdm-0.4.1-10.fc21 has been pushed to the Fedora 21 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-7766c0d939"
							},
							{
								"isprivate": "0",
								"commentid": "8706766",
								"comment_count": "16",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-09 13:54:48 +0000",
								"thetext": "lxdm-0.4.1-10.fc22 has been pushed to the Fedora 22 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-adbae85c55"
							},
							{
								"isprivate": "0",
								"commentid": "8706816",
								"comment_count": "17",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-09 13:56:13 +0000",
								"thetext": "lxdm-0.5.1-7.D20151007gite8f38708.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-44deee4d7a"
							},
							{
								"isprivate": "0",
								"commentid": "8729646",
								"comment_count": "18",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-17 22:55:18 +0000",
								"thetext": "lxdm-0.4.1-10.fc22 has been pushed to the Fedora 22 stable repository. If problems still persist, please make note of it in this bug report."
							},
							{
								"isprivate": "0",
								"commentid": "8729679",
								"comment_count": "19",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-10-17 23:20:24 +0000",
								"thetext": "lxdm-0.4.1-10.fc21 has been pushed to the Fedora 21 stable repository. If problems still persist, please make note of it in this bug report."
							},
							{
								"isprivate": "0",
								"commentid": "8771070",
								"comment_count": "20",
								"who": {
									"text": "updates",
									"name": "Fedora Update System"
								},
								"bug_when": "2015-11-01 02:44:54 +0000",
								"thetext": "lxdm-0.5.1-7.D20151007gite8f38708.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report."
							},
							{
								"isprivate": "0",
								"commentid": "8845407",
								"comment_count": "21",
								"who": {
									"text": "mtasaka",
									"name": "Mamoru TASAKA"
								},
								"bug_when": "2015-11-20 09:00:49 +0000",
								"thetext": "Now NFS user is seeing bug 1283581 . I am currently thinking of reverting this. Also (perhaps) the same bug report on the upstream:\nhttp://sourceforge.net/p/lxde/bugs/786/"
							},
							{
								"isprivate": "0",
								"commentid": "8845472",
								"comment_count": "22",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-11-20 09:19:09 +0000",
								"thetext": "(In reply to Mamoru TASAKA from comment #21)\n> Now NFS user is seeing bug 1283581 . I am currently thinking of reverting\n> this.\n\nI do not think this should be made insecure by default to address some non-standard use case, where the actual root cause is not yet understood."
							},
							{
								"isprivate": "0",
								"commentid": "8851343",
								"comment_count": "23",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2015-11-23 12:23:11 +0000",
								"thetext": "I'm re-closing this, as bug 1283581 is apparently getting fixed without needing to revert the fix for this issue."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "8838862",
						"comment_count": "0",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-19 10:58:02 +0000",
						"thetext": "Description of problem:\n\nAfter upgrading from Fedora 22 to 23, I can no longer log in to the graphical user interface. When I input a correct user name and password on the LXDM login screen, everything on the screen (except for the background image) briefly disappears, but after ~1 second the big \"Login:\" text, the username text input box, and the session/language selection bar near the bottom re-appears.\n\nI'm normally using LXDE, but the same thing happens regardless of which X session I select, which makes me believe that this isn't a problem with the desktop environments / X sessions, but with LXDM itself. This assumption is further strengthened by the fact that I can work around the problem by simply downgrading LXDM (see below).\n\nI am certain that LXDM is able to validate the password correctly. If I intentionally enter an incorrect password, the big \"Login:\" text and the session/language selection bar does not briefly vanish, so the observed behaviour is differs between using a correct password and an incorrect one.\n\nThe user in question can log in normally on the text console without any problems.\n\nVersion-Release number of selected component (if applicable):\n\nlxdm-0.5.1-7-D20151007gite8f38708.fc23.x86_64\n\nHow reproducible:\n\n100%\n\nSteps to Reproduce:\n1. Attempt to log in as a regular user on the LXDM login screen\n\nActual results:\n\nLogin fails, and the login screen re-appears within a second or so.\n\nExpected results:\n\nLogin is successful.\n\nAdditional info:\n\nSELinux is disabled, so this is not a duplicate of bug #1274169.\n\nIn LXDM's journal I can see it complains about not being able to open /usr/lib64/security/pam_gnome_keyring.so, which is not present on the system. Uncommenting the two relevant lines from /etc/pam.d/lxdm causes those errors to no longer appear, but other than that does not change anything. When attempting to log in with pam_gnome_keyring.so disabled, the following two lines appear in the LXDM journal:\n\npam_unix(lxdm:auth): authentication failure; logname= uid=0 euid=0 tty= ruser= rhost= user=tore\npam_sss(lxdm:auth): authentication success; logname= uid=0 euid=0 tty= ruser= rhost= user=tore\n\nThat pam_unix.so doesn't find the user is expected, since it's stored in an external LDAP tree, not in /etc/passwd. The user's home directory is a remote NFS mount.\n\nDowngrading to lxdm-0.4.1-10.fc22.x86_64 solves the problem and allows me to log in to the system again. (I do not have to downgrade any other packages in order to make this happen.)"
					},
					{
						"isprivate": "0",
						"commentid": "8844832",
						"comment_count": "1",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-20 03:22:07 +0000",
						"thetext": "It is hard to debug this unless I can find the detailed procedure to reproduce this issue.\n\n> /usr/lib64/security/pam_gnome_keyring.so, which is not present\nIt is optional, and pam setting does not change on lxdm between 0.4.1 and 0.5.1 and 0.5.2.\n\nWould you write in detail how to reproduce this issue? (i.e. would you have some way to reproduce this issue when you setup your system newly? If you can reproduce this with some procedure from the fresh F-23 install, it is highly appreciated.) \nEspecially:\n\n* I don't have NFS-used system. Can you find out if this is related to your NFS setup? Can you reproduce this even if you newly create another account without using NFS and login with that new user?\n* Would you attach (as a log) the result of \"$ rpm -qa | sort\" ?\n\nOr\n* Would you have some analysis about to which stage LXDE session proceeded?"
					},
					{
						"isprivate": "0",
						"commentid": "8845115",
						"comment_count": "2",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-20 06:54:22 +0000",
						"thetext": "I will try over the weekend to see if I can make a procedure on how to reproduce from a fresh F-23 install.\n\nIt does seem related to NFS. If I unmount /home/tore and instead create an empty (local) directory owned by the \"tore\" user, I can log in successfully. The very interesting thing is that if I log back out, remount the NFS on /home/tore (from the console), I can successfully log back in. Strange, huh? If however I restart lxdm, it is again impossible to log in. So it seems that as long as I've logged in successfully once in the lifetime of the lxdm binary (using a local home directory), I can log in using an NFS home directory too.\n\nI don't know how to debug to which stage the LXDE session proceeded. There is no manual page for the lxdm binary, nor does \"lxdm --help\" or \"lxdm -h\" give any output that suggests how to enable more debugging. If you have any pointers on how to do that, I would appreciate that."
					},
					{
						"isprivate": "0",
						"commentid": "8845208",
						"comment_count": "3",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-20 07:32:29 +0000",
						"thetext": "If you can have some way with which I can reproduce this issue, I can debug this issue.\n\nMaybe if you can tell me some detailed procedure how you created your acount with NFS, especially\n- your NFS configuration\n- where you create your account\n- and some other information you think which may be related\n\nBy the way, it is possible that you can log in with lxdm-0.5.1-6.D20150806git17ac3772.fc23 . Would you try this?"
					},
					{
						"isprivate": "0",
						"commentid": "8845359",
						"comment_count": "4",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-20 08:34:00 +0000",
						"thetext": "NFS configuration (from /etc/exports) looks like this (IP address anonymised):\n\n[2001:db8::1234]:/srv/nfs/ms/home/tore\t/home/tore\tnfs\tdefaults,x-systemd.automount\t0\t0\n\nThe account is created in the company LDAP tree. Pretty standard stuff.\n\nI tested lxdm-0.5.1-6.D20150806git17ac3772.fc23.x86_64.rpm, it works fine.\n\nI also tested lxdm-0.5.2-1.fc23.x86_64.rpm, this version does not work either. So the bug must have been introduced somewhere between 17ac3772 and e8f38708."
					},
					{
						"isprivate": "0",
						"commentid": "8845410",
						"comment_count": "5",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-20 09:02:13 +0000",
						"thetext": "(In reply to Tore Anderson from comment #4)\n\n> I tested lxdm-0.5.1-6.D20150806git17ac3772.fc23.x86_64.rpm, it works fine.\n> \n> I also tested lxdm-0.5.2-1.fc23.x86_64.rpm, this version does not work\n> either. So the bug must have been introduced somewhere between 17ac3772 and\n> e8f38708.\n\nOkay, actually this is only one commit:\nhttp://git.lxde.org/gitweb/?p=lxde/lxdm.git;a=commitdiff;h=e8f387089e241360bdc6955d3e479450722dcea3\n\nThis is to fix bug 1268900 , but I may have to revert this.\nI guess the upstream\nhttp://sourceforge.net/p/lxde/bugs/786/\nis the same phenomenon."
					},
					{
						"isprivate": "0",
						"commentid": "8845463",
						"comment_count": "6",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-20 09:13:51 +0000",
						"thetext": "So perhaps lxdm (or some other LXDE component) cannot write / read /var/run/lxdm or ~/.Xauthority (although currently I don't know the exact component / cause of this)"
					},
					{
						"isprivate": "0",
						"commentid": "8845471",
						"comment_count": "7",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-20 09:19:01 +0000",
						"thetext": "The description of upstream bug 786 does exactly describe my situation, indeed.\n\nThere is one thing that comes to mind about NFS home directories, namely that the \"root\" user does not have write access to it:\n\n~$ LANG=C sudo touch foo\ntouch: cannot touch 'foo': Permission denied\n~$ LANG=C touch foo\n~$ \n\nI do not know if this is relevant, and I do not quite see why it would be from the commit diff you linked to either, but if LXDM attempts to write some file in my home directory (like ~/.Xauthority) before changing privileges, then that is going to fail."
					},
					{
						"isprivate": "0",
						"commentid": "8845597",
						"comment_count": "8",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-11-20 10:10:19 +0000",
						"thetext": "If I were to guess, I'd suspect problems with getting .Xauthority file updated.  Is it possible that lxdm is updating the file on local file system just to have it hidden by NFS mounted directory and hence inaccessible to your DE?  Or maybe it's not created at all, as you mention that creating local directory helps.\n\nYou can try uncommenting the following in lxdm.conf:\n\n## set this if you don't want to put xauth file at ~/.Xauthority\n# xauth_path=/tmp\n\nand see if that makes a difference.  Of course, /tmp is a poor choice, as (based on a quick look) the code does not protect against symlink attacks.  So /var/run/lxdm/ would be safer if it can be used, i.e. if the code creating Xauthority file is run with sufficient privileges (I've not checked).\n\n(In reply to Tore Anderson from comment #2)\n> The very interesting thing is that if I log back out, remount the NFS on\n> /home/tore (from the console), I can successfully log back in. Strange, huh?\n> If however I restart lxdm, it is again impossible to log in. So it seems\n> that as long as I've logged in successfully once in the lifetime of the lxdm\n> binary (using a local home directory), I can log in using an NFS home\n> directory too.\n\nI'd guess xhost localuser authorization is what causes this.  In Fedora, xhost +si:localuser:`id -un` is run by xinit and lxdm does not restart X server between sessions (see bug 1269917), so the localuser authorization stays even after session logout, which has its own set of security concerns."
					},
					{
						"isprivate": "0",
						"commentid": "8845600",
						"comment_count": "9",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-11-20 10:13:45 +0000",
						"thetext": "(In reply to Tore Anderson from comment #7)\n> I do not know if this is relevant, and I do not quite see why it would be\n> from the commit diff you linked to either, but if LXDM attempts to write\n> some file in my home directory (like ~/.Xauthority) before changing\n> privileges, then that is going to fail.\n\nThe code changed by the commit uses auth file in /var/run/lxdm/lxdm-:%d.auth, but it's auth file used by lxdm, not by applications in your X session.  The default user Xauthority file is ~/.Xauthority, and you can use xauth_path to override."
					},
					{
						"isprivate": "0",
						"commentid": "8845734",
						"comment_count": "10",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-20 10:45:01 +0000",
						"thetext": "Thanks Tomas. I did some more tests based on the information you added.\n\nFirst, I made a directory \"/rootonly\" to which only root has write access:\n\ndrwxr-xr-x 2 root root 4096 nov.  20 11:30 /rootonly\n\nThen I set \"xauth_path=/rootonly\" in lxdm.conf, upgraded to lxdm-0.5.1-7.D20151007gite8f38708.fc23.x86_64, and restarted LXDM. The NFS home directory was already mounted at this point.\n\nI attempted to log in, which succeeded. The following file was created:\n\n-rw------- 1 tore tore 71 nov.  20 11:30 /rootonly/.Xauth7097\n\nFrom this we can surmise that the code that wrote this .Xauth7097 file was running as root (otherwise it would have been unable to create any file inside /rootonly/).\n\nAs I mentioned earlier, this is doomed to fail when the directory in question is on a NFS (except if the NFS is exported with the non-default option no_root_squash, cf. exports(5)). This is because the root user has no special \"can freely write everywhere\" privilege on NFS mounts. Thus, in order for LXDE to support creating Xauthority files inside users' home directories, it must drop prileges to the user about to log in before it writes the file.\n\nI must admit I don't fully understand why commit e8f3870 breaks this, as it seems be about files inside /var/run/lxdm (which is not on NFS and has never been), but then again, I'm not familiar with the surrounding code."
					},
					{
						"isprivate": "0",
						"commentid": "8845983",
						"comment_count": "11",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2015-11-20 11:54:25 +0000",
						"thetext": "(In reply to Tore Anderson from comment #10)\n> As I mentioned earlier, this is doomed to fail when the directory in\n> question is on a NFS (except if the NFS is exported with the non-default\n> option no_root_squash, cf. exports(5)). This is because the root user has no\n> special \"can freely write everywhere\" privilege on NFS mounts.\n\nRight, and it's likely the reason why lxdm provides xauth_path configuration option to allow storing Xauthority file outside of the NFS mounted home.\n\n> Thus, in order for LXDE to support creating Xauthority files inside users'\n> home directories, it must drop prileges to the user about to log in before\n> it writes the file.\n\nOr be configured to not store in home, as that's what it already can do?\n\n> I must admit I don't fully understand why commit e8f3870 breaks this, as it\n> seems be about files inside /var/run/lxdm (which is not on NFS and has never\n> been), but then again, I'm not familiar with the surrounding code.\n\nAs noted in comment 9, the file mentioned in that commit is what's used by X server.  Before and after the commit, client default is still ~/.Xauthority.  The difference is that before that commit, X server is not started with -auth argument, and therefore accepts connection from any user able to connect to it, even without having valid authentication cookie.  Therefore, failure to create ~/.Xauthority is not fatal.  Apps in your X session can't provide X server with valid cookie, but it happily accepts their connections anyway.  After the commit, X server is started with -auth argument and hence refuses connections without valid cookie."
					},
					{
						"isprivate": "0",
						"commentid": "8846443",
						"comment_count": "12",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-20 14:08:29 +0000",
						"thetext": "Maybe\nhttp://koji.fedoraproject.org/scratch/mtasaka/task_11921228/\ncan make some progress?"
					},
					{
						"isprivate": "0",
						"commentid": "8846667",
						"comment_count": "13",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-20 15:10:39 +0000",
						"thetext": "Since I've left work for today I won't be able to test before Monday. I'll let you know, and until then have a nice weekend!"
					},
					{
						"isprivate": "0",
						"commentid": "8847894",
						"comment_count": "14",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-21 02:58:17 +0000",
						"thetext": "Upstream modified the code differently. Please try this:\n\nhttp://koji.fedoraproject.org/koji/buildinfo?buildID=700587"
					},
					{
						"isprivate": "0",
						"commentid": "8850270",
						"comment_count": "15",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-23 06:06:55 +0000",
						"thetext": "(In reply to Mamoru TASAKA from comment #14)\n> Upstream modified the code differently. Please try this:\n> \n> http://koji.fedoraproject.org/koji/buildinfo?buildID=700587\n\nIt works fine, I can log in without any problems now with all config files left to their defaults. $XAUTHORITY gets set to /var/run/lxdm/.Xauth<uid>."
					},
					{
						"isprivate": "0",
						"commentid": "8850303",
						"comment_count": "16",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-23 06:30:40 +0000",
						"thetext": "Okay, thank you."
					},
					{
						"isprivate": "0",
						"commentid": "8850307",
						"comment_count": "17",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-23 06:33:38 +0000",
						"thetext": "lxdm-0.5.2-2.D20151121gitd5b7ae6b.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2015-867aba2b3d"
					},
					{
						"isprivate": "0",
						"commentid": "8854379",
						"comment_count": "18",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-24 02:23:24 +0000",
						"thetext": "lxdm-0.5.2-2.D20151121gitd5b7ae6b.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-867aba2b3d"
					},
					{
						"isprivate": "0",
						"commentid": "8854514",
						"comment_count": "19",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-24 03:52:11 +0000",
						"thetext": "Perhaps 0.5.3 will be released today or tomorrow, I will repush it then."
					},
					{
						"isprivate": "0",
						"commentid": "8856187",
						"comment_count": "20",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-24 14:08:01 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2015-e3ec4cbf8f"
					},
					{
						"isprivate": "0",
						"commentid": "8858002",
						"comment_count": "21",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-25 02:53:26 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-e3ec4cbf8f"
					},
					{
						"isprivate": "0",
						"commentid": "8864684",
						"comment_count": "22",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-27 07:51:04 +0000",
						"thetext": "I've noticed a new issue that seems related to how this original issue was fixed, namely that \"xauth list\" reaches a timeout. This command is run by the SSH client whenever I log on to another machine, so it causes a rather annoying 20 second delay every time:\n\n$ time /usr/bin/xauth -v list :0\n/usr/bin/xauth:  timeout in locking authority file /var/run/lxdm/.Xauth7097\n\nreal\t0m20.004s\nuser\t0m0.001s\nsys\t0m0.001s\n\nIf I give my own user write access to the containing directory it works fine, but that's obviously not a proper fix:\n\n$ sudo chmod 777 /var/run/lxdm/\n$ time /usr/bin/xauth -v list :0\nUsing authority file /var/run/lxdm/.Xauth7097\necho.ms.redpill-linpro.com/unix:0  MIT-MAGIC-COOKIE-1  <snip>\n\nreal\t0m0.003s\nuser\t0m0.001s\nsys\t0m0.001s\n\nTore"
					},
					{
						"isprivate": "0",
						"commentid": "8866006",
						"comment_count": "23",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-11-27 15:17:05 +0000",
						"thetext": "Please file a new ticket for different issues. Also, I would appreciate it if you would report your issue to the upstream bug tracker, as it seems that you have some your customized setting and it may be difficult to reproduce."
					},
					{
						"isprivate": "0",
						"commentid": "8866774",
						"comment_count": "24",
						"who": {
							"text": "tore",
							"name": "Tore Anderson"
						},
						"bug_when": "2015-11-28 13:13:59 +0000",
						"thetext": "Ok, I submitted a new bug here: https://sourceforge.net/p/lxde/bugs/789/\n\nFor the record, though: I am not using any customized settings at all, everything is left at whatever defaults comes with the lxdm-0.5.3-1.fc23.x86_64 package:\n\ntore@envy:~$ sudo rpm -V lxdm ; echo $?\n0\ntore@envy:~$"
					},
					{
						"isprivate": "0",
						"commentid": "8867364",
						"comment_count": "25",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-29 08:11:40 +0000",
						"thetext": "lxdm-0.4.1-11.fc22 has been submitted as an update to Fedora 22. https://bodhi.fedoraproject.org/updates/FEDORA-2015-596e37febc"
					},
					{
						"isprivate": "0",
						"commentid": "8867956",
						"comment_count": "26",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-11-29 22:20:38 +0000",
						"thetext": "lxdm-0.4.1-11.fc22 has been pushed to the Fedora 22 testing repository. If problems still persist, please make note of it in this bug report.\nIf you want to test the update, you can install it with\n$ su -c 'dnf --enablerepo=updates-testing update lxdm'\nYou can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2015-596e37febc"
					},
					{
						"isprivate": "0",
						"commentid": "8893414",
						"comment_count": "27",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-12-06 01:23:56 +0000",
						"thetext": "lxdm-0.5.3-1.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report."
					},
					{
						"isprivate": "0",
						"commentid": "8893506",
						"comment_count": "28",
						"who": {
							"text": "mtasaka",
							"name": "Mamoru TASAKA"
						},
						"bug_when": "2015-12-06 06:58:28 +0000",
						"thetext": "Closing."
					},
					{
						"isprivate": "0",
						"commentid": "8906962",
						"comment_count": "29",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2015-12-10 03:51:37 +0000",
						"thetext": "lxdm-0.4.1-11.fc22 has been pushed to the Fedora 22 stable repository. If problems still persist, please make note of it in this bug report."
					}
				]
			}
		}
	],
	"builds": [
		{
			"nvr": "lxdm-0.5.3-1.fc23",
			"release_id": 11,
			"signed": true,
			"type": "rpm",
			"package": {
				"armv7hl": [
					{
						"name": "lxdm",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "armv7hl"
					},
					{
						"name": "lxdm-debuginfo",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "armv7hl"
					}
				],
				"i686": [
					{
						"name": "lxdm-debuginfo",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "i686"
					},
					{
						"name": "lxdm",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "i686"
					}
				],
				"src": [
					{
						"name": "lxdm",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "src"
					}
				],
				"x86_64": [
					{
						"name": "lxdm-debuginfo",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "x86_64"
					},
					{
						"name": "lxdm",
						"version": "0.5.3",
						"release": "1.fc23",
						"arch": "x86_64"
					}
				]
			}
		}
	],
	"comments": [
		{
			"id": 357092,
			"text": "This update has been submitted for testing by mtasaka. ",
			"timestamp": "2015-11-24 14:07:42",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 357094,
			"text": "This update has obsoleted [lxdm-0.5.2-2.D20151121gitd5b7ae6b.fc23](https://bodhi.fedoraproject.org/updates/FEDORA-2015-867aba2b3d), and has inherited its bugs and notes.",
			"timestamp": "2015-11-24 14:07:46",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 357292,
			"text": "This update has been pushed to testing.",
			"timestamp": "2015-11-25 02:55:20",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 360305,
			"text": "This update has reached 7 days in testing and can be pushed to stable now if the maintainer wishes",
			"timestamp": "2015-12-02 06:00:16",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 361728,
			"text": "This update has been submitted for stable by mtasaka. ",
			"timestamp": "2015-12-05 16:19:55",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 361967,
			"text": "This update has been pushed to stable.",
			"timestamp": "2015-12-06 01:24:32",
			"update_id": 45378,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		}
	],
	"content_type": "rpm",
	"date_pushed": "2015-12-05 23:28:48",
	"date_stable": "2015-12-05 23:28:48",
	"date_submitted": "2015-11-24 14:07:42",
	"date_testing": "2015-11-25 00:48:32",
	"meets_testing_requirements": true,
	"notes": "New version 0.5.3 is released.\n\n----\n\nA issue was reported that with recent lxdm some people may not be possible to login using NFS. This new rpm should fix this issue.",
	"pushed": true,
	"release": {
		"branch": "f23",
		"candidate_tag": "f23-updates-candidate",
		"composed_by_bodhi": true,
		"dist_tag": "f23",
		"id_prefix": "FEDORA",
		"long_name": "Fedora 23",
		"mail_template": "fedora_errata_template",
		"name": "F23",
		"override_tag": "f23-override",
		"package_manager": "dnf",
		"pending_signing_tag": "f23-signing-pending",
		"pending_stable_tag": "f23-updates-pending",
		"pending_testing_tag": "f23-updates-testing-pending",
		"stable_tag": "f23-updates",
		"state": "archived",
		"testing_repository": "updates-testing",
		"testing_tag": "f23-updates-testing",
		"version": "23"
	},
	"severity": "unspecified",
	"stable_karma": 2,
	"status": "stable",
	"suggest": "reboot",
	"title": "lxdm-0.5.3-1.fc23",
	"type": "security",
	"url": "https://bodhi.fedoraproject.org/updates/FEDORA-2015-e3ec4cbf8f",
	"unstable_karma": -30,
	"updateid": "FEDORA-2015-e3ec4cbf8f",
	"user": {
		"avatar": "https://seccdn.libravatar.org/avatar/1bde75495a81d910b3a931eff5b35c45f7a0ce64f32cd3774cff20dbb6a556ce?s=24&d=retro",
		"email": "mtasaka@tbz.t-com.ne.jp",
		"groups": [
			{
				"name": "packager"
			},
			{
				"name": "provenpackager"
			},
			{
				"name": "ipausers"
			},
			{
				"name": "fedora-contributor"
			},
			{
				"name": "signed_fpca"
			},
			{
				"name": "fedorabugs"
			}
		],
		"id": 152,
		"name": "mtasaka",
		"openid": "mtasaka.id.fedoraproject.org"
	},
	"version_hash": "ff7e20d5301420c4b615ce5b3ac89fc2f762fa89"
}
