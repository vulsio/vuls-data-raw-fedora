{
	"alias": "FEDORA-EPEL-2011-0470",
	"bugs": [
		{
			"bug_id": 151705,
			"title": "Need to update Console Cipher Preferences with new ciphers",
			"bugzilla": {
				"bug_id": "151705",
				"creation_ts": "2005-03-21 19:52:19 +0000",
				"short_desc": "Need to update Console Cipher Preferences with new ciphers",
				"delta_ts": "2016-05-06 14:44:50 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "medium",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "434915",
						"error": "NotPermitted"
					},
					{
						"bug_id": "495079",
						"alias": "389_1.3.0",
						"creation_ts": "2009-04-09 16:48:31 +0000",
						"short_desc": "TRACKER: 389 Directory Server 1.3.0 tracking bug",
						"delta_ts": "2021-03-30 03:39:47 +0000",
						"bug_status": "CLOSED",
						"resolution": "NOTABUG",
						"priority": "medium",
						"bug_severity": "medium",
						"depends_on": [
							"151705",
							"154145",
							"154176",
							"154601",
							"154950",
							"155071",
							"155397",
							"155766",
							"158262",
							"158369",
							"158593",
							"158661",
							"158669",
							"158926",
							"160687",
							"164595",
							"167370",
							"170791",
							"171080",
							"174554",
							"178898",
							"184130",
							"185713",
							"186955",
							"190862",
							"191289",
							"191772",
							"204346",
							"206053",
							"210381",
							"213301",
							"215481",
							"216525",
							"220222",
							"220691",
							"221229",
							"221905",
							"224385",
							"227455",
							"235959",
							"241090",
							"244423",
							"245278",
							"245968",
							"246544",
							"247411",
							"247413",
							"249327",
							"293821",
							"314071",
							"314481",
							"362341",
							"410951",
							"437104",
							"437632",
							"448786",
							"450738",
							"451678",
							"452008",
							"452009",
							"452014",
							"452325",
							"452543",
							"452548",
							"452554",
							"453756",
							"457842",
							"458187",
							"459181",
							"466144",
							"474113",
							"476925",
							"478859",
							"478865",
							"479753",
							"480940",
							"488179",
							"488951",
							"491733",
							"493424",
							"497439",
							"500233",
							"501613",
							"504803",
							"509030",
							"511112",
							"511226",
							"517913",
							"519464",
							"521111",
							"527848",
							"528567",
							"533505",
							"555189",
							"576303",
							"595173",
							"600051",
							"602525",
							"612387",
							"613136",
							"616707",
							"643979",
							"661116",
							"667943",
							"674723",
							"682897",
							"690815",
							"692211",
							"697701",
							"739677",
							"740081",
							"741599",
							"741744",
							"741999",
							"742317",
							"743403",
							"744945",
							"747403",
							"758983",
							"766322",
							"768084",
							"781539",
							"781543",
							"1270020",
							"1333946",
							"1944494"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "2124434",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2009-04-09 16:48:31 +0000",
								"thetext": "This is the tracking bug for the Fedora DS 1.3.0 release"
							},
							{
								"isprivate": "0",
								"commentid": "4285785",
								"comment_count": "1",
								"who": {
									"text": "mkosek",
									"name": "Martin Kosek"
								},
								"bug_when": "2012-01-04 13:42:32 +0000",
								"thetext": "Upstream ticket:\nhttps://fedorahosted.org/389/ticket/104"
							},
							{
								"isprivate": "0",
								"commentid": "6634098",
								"comment_count": "2",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2013-12-18 19:45:20 +0000",
								"thetext": "Closing, as 1.3.0 was released long ago."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "1041622",
						"comment_count": "0",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2005-03-21 19:52:19 +0000",
						"thetext": "From Bugzilla Helper:\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0\n\nDescription of problem:\nReported by Ulf (ulf@cup.hp.com) at HP:\n\nI looked briefly at this and the UI doesn't seem to fit what it is configuring.  In NES server.xml you can set tls and ssl3 to on or off, and then there's a shared list of ciphers called ssl3tlsciphers.  The UI has two tabs of identical SSL3 and TLS ciphers, except the TLS tab includes two additional TLS-exclusive ciphers.  The customer is OK with the workaround of editing server.xml, so requested TFV is 7.1.\n\nThe customer has SSL enabled on their NDS 6.21 Admin Server.\nUsing the Console, they disabled (i.e., unchecked) all of the SSL 2.0 ciphers, all of the TLS ciphers, and all of the SSL 3.0 ciphers except Triple-DES 168-bit SHA.\n\nAfter restarting the Admin Server, they relaunched the Console and checked the Encryption settings. They found that their SSL 2.0 and SSL 3.0 cipher settings were retained, but all of the TLS, except for None MD5, were reset to enabled.\n\nTesting has confirmed that the Netscape Console Encryption Settings GUI is broken.\nThe workaround is to manually edit the /var/opt/netscape/servers/admin-serv/config/server.xml file and change the TLS setting under the <SSLPARAMS> tag. Change tls=\"on\" to tls=\"off\" and restart the Admin Server.\n\nThere are a couple of caveats to this workaround:\n\n1) The Netscape Console will still incorrectly shows that the TLS ciphers, except None MD5, as being active.\n\n2) If you use the Netscape Console to make a change to any of the Admin Server encryption settings, it will automatically reset tls=\"on\" in server.xml.\n\n\nIt seems the sec_activate CGI just isn't TLS-aware, it doesn't have the capability of reporting anything about TLS to the Console.  The TLS tab panel is probably being populated in lieu of the information it needs by setSecurityIsDomestic in TurnOnSSL.java.\n\nUlf \n\nVersion-Release number of selected component (if applicable):\n\n\nHow reproducible:\nAlways\n\nSteps to Reproduce:\nexplained in the description\n\nAdditional info:"
					},
					{
						"isprivate": "0",
						"commentid": "1043524",
						"comment_count": "1",
						"who": {
							"text": "rcritten",
							"name": "Rob Crittenden"
						},
						"bug_when": "2005-03-23 15:44:46 +0000",
						"thetext": "The main problems are:\n\n1. There is no way to turn off tls. It is harcoded to \"on\" in set-activate.c\n2. If you de-select the TLS ciphers they will magically re-appear the next time\nyou Configure the admin server. I suspect that what is really happening is that\nthey are defaulting to \"on\" because they aren't being set in server.xml.\n3. It doesn't appear to actually put the TLS cipher strings into server.xml\n(rsa_des_56_sha, rsa_rc4_56_sha)\n4. The TLS tab should just list the two TLS ciphers.\n\nThe root of the problem is that TLS isn't really handled properly. The Directory\nserver maintains the \"master\" configuration and it only contains SSL2 and SSL3\nconfig entries. This may be to mirror the NES configuration, I don't know. The\nJava interface does handle tls separately though which may be part of this\ndisconnect. So I suspect that the TLS tab is slurping in the SSL3 cipher list,\nseeing that the 2 TLS ciphers aren't listed and it is adding them, defaulting to\n\"on\".\n\nAll but #1 needs to be addressed in the console itself. There is some clever\ncode somewhere that sets ssl2/ssl3 to \"off\" if all the ciphers are deselected.\nPerhaps similar code can be created for tls. I wasn't able to determine where\nthis was happening.\n\nIt would probably be best to have the console set some tls variables to be\npicked up by the CGI. At least on/off if that can be determined.\n\nUnfortunately I'm not much of a java hacker and even less of a java swing hacker."
					},
					{
						"isprivate": "0",
						"commentid": "1058959",
						"comment_count": "2",
						"who": {
							"text": "ohegarty",
							"name": "Orla Hegarty"
						},
						"bug_when": "2005-04-18 23:24:45 +0000",
						"thetext": "Per today's bug council this bug is being latered to 7.2 "
					},
					{
						"isprivate": "0",
						"commentid": "254561",
						"comment_count": "3",
						"who": {
							"text": "tngan",
							"name": "To Ngan"
						},
						"bug_when": "2006-12-12 19:02:00 +0000",
						"thetext": "We need to revisit the cypher list in 7.2"
					},
					{
						"isprivate": "0",
						"commentid": "260448",
						"comment_count": "4",
						"who": {
							"text": "ckannan",
							"name": "Chandrasekar Kannan"
						},
						"bug_when": "2007-07-25 19:11:14 +0000",
						"thetext": "DS7.2 is not a valid milestone anymore. Anything thats set to DS7.2 should be\nset to DS8.0. Will make further changes per bug council on 07/24/2007, after this."
					},
					{
						"isprivate": "0",
						"commentid": "1543358",
						"comment_count": "6",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2007-12-18 19:19:11 +0000",
						"thetext": "We need to update CipherPreferenceDialog.java\n1) We need to disable all of the SSLv2 ciphers by default\n2) We need to add support for the new SSLv3 and TLSv1 ciphers not listed:\nrsa_rc4_128_sha, rsa_null_sha, rsa_des_56_sha, rsa_rc4_56_sha, rsa_aes_128_sha,\nrsa_aes_256_sha and any others I may have missed.\n\nIn order to get the list, the console calls the sec-activate CGI, which pulls\nthe list of sslv2 and sslv3 (note - no tls) ciphers from the pset\n(cn=encryption,cn=configuration, <admin server SIE>).\n3) we should pre-populate the list of ciphers during setup (AdminServer.pm -\ninitial local.conf generation) to be exactly the same as the default list in\nconsole.conf NSSCiphers\nThen the console would show only those ciphers supported by mod_nss\n\n4) Ideally, we would just be able to display the table of ciphers by parsing the\nstrings such as \"rsa_rc4_128_sha\" without having to hard code the strings inside\nCipherPreferenceDialog.java.  If that's not possible, then the strings should be\nmoved into the properties file to make it easier to update them without having\nto edit the Java code."
					},
					{
						"isprivate": "0",
						"commentid": "3517063",
						"comment_count": "10",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 01:47:01 +0000",
						"thetext": "Created attachment 476689\nDS: git patch file (master)\n\nDescription: Added new ciphers:\n    SSL_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_NULL_SHA\nAlso, added cipher names used by the Admin Server/mod_nss:\n    fips_3des_sha for SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA\n    fips_des_sha for SSL_RSA_FIPS_WITH_DES_CBC_SHA\n    rsa_rc4_56_sha for TLS_RSA_EXPORT1024_WITH_RC4_56_SHA\n    rsa_des_56_sha for TLS_RSA_EXPORT1024_WITH_DES_CBC_SHA"
					},
					{
						"isprivate": "0",
						"commentid": "3517095",
						"comment_count": "11",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 02:19:43 +0000",
						"thetext": "Created attachment 476690\nAS: git patch file (master)\n\nDescription: When a cipher is updated on the Admin Console | Cipher\nPreference dialog, NSSCipherSuite value in console.conf is updated\nbased on the modification.  If the cipher is on the TLS list, it\nwas ignored in sec-activate.c.  This patch merges the tls list\ninto the ssl3 list.  Then, the TLS ciphers are also written to\nconsole.conf."
					},
					{
						"isprivate": "0",
						"commentid": "3519020",
						"comment_count": "12",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 17:26:12 +0000",
						"thetext": "Created attachment 476828\nidm-console-framework: cvs patch file (head)\n\nDescription:\n1) added new ciphers.\n   rsa_null_sha, tls_rsa_aes_128_sha, tls_rsa_aes_256_sha\n2) support 2 cipher names, one for DS and another for AS.\n   tls_rsa_export1024_with_des_cbc_sha & rsa_des_56_sha\n   tls_rsa_export1024_with_rc4_56_sha & rsa_rc4_56_sha\n   tls_rsa_aes_128_sha & rsa_aes_128_sha\n   tls_rsa_aes_256_sha & rsa_aes_256_sha\n   rsa_fips_des_sha & fips_des_sha\n   rsa_fips_3des_sha & fips_3des_sha\n3) added CipherPreferenceDialog, which takes tlsonly or (tlsonly \n   and dsstyle) options.\n   . tlsonly does not include SSLV3 ciphers in TLS cipher list\n     if true\n   . dsstyle returns DS style cipher names if true"
					},
					{
						"isprivate": "0",
						"commentid": "3519042",
						"comment_count": "13",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 17:29:48 +0000",
						"thetext": "Created attachment 476829\n389-ds-console: git patch file (master)\n\nDescription: added new ciphers:\n    rsa_null_sha, tls_rsa_aes_128_sha, tls_rsa_aes_256_sha"
					},
					{
						"isprivate": "0",
						"commentid": "3519055",
						"comment_count": "14",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 17:36:37 +0000",
						"thetext": "Created attachment 476831\n389-ds-admin-console: git patch file (master)\n\nDescription: replaced CipherPreferenceDialog with one which generates\nTLS cipher list that does not include SSL3.0-only ciphers to avoid\nlisting duplicated ciphers on SSL 3.0 pane and TLS pane."
					},
					{
						"isprivate": "0",
						"commentid": "3519102",
						"comment_count": "15",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 17:57:00 +0000",
						"thetext": "Created attachment 476835\nsteps to verify\n\nhow to untar the attachment\ncd /tmp\ntar xvzf /path/to/downloaded/attachment(151705.tar.gz)\n\non browser\nfile:///tmp/151705/151705.html"
					},
					{
						"isprivate": "0",
						"commentid": "3519141",
						"comment_count": "16",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 18:13:54 +0000",
						"thetext": "Reviewed by Rich (Thank you!!!)\n\nPushed to master.\n\nDirectory Server:\n$ git merge 151705\nUpdating 5a41728..b7bf3cb\nFast-forward\n ldap/servers/slapd/ssl.c |    8 ++++++++\n 1 files changed, 8 insertions(+), 0 deletions(-)\n$ git push\nCounting objects: 11, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 935 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   5a41728..b7bf3cb  master -> master\n\nAdmin Server:\n$ git merge work\nUpdating cbd46e4..9e3d762\nFast-forward\n admserv/cgi-src40/sec-activate.c |   21 +++++++++++++++++++--\n 1 files changed, 19 insertions(+), 2 deletions(-)\n$ git push\nCounting objects: 9, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (5/5), 882 bytes, done.\nTotal 5 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/admin.git\n   cbd46e4..9e3d762  master -> master\n\nidm-console-framework:\nChecking in client/security/CipherPreferenceDialog.java;\n/cvs/dirsec/console/src/com/netscape/management/client/security/CipherPreferenceDialog.java,v  <--  CipherPreferenceDialog.java\nnew revision: 1.3; previous revision: 1.2\ndone\nChecking in client/security/securityResource.properties;\n/cvs/dirsec/console/src/com/netscape/management/client/security/securityResource.properties,v  <--  securityResource.properties\nnew revision: 1.4; previous revision: 1.3\ndone\n\n389-ds-console:\n$ git merge work\nUpdating 21eaba8..77b69ba\nFast-forward\n .../admin/dirserv/panel/EncryptionPanel.java       |   14 ++++++++++----\n 1 files changed, 10 insertions(+), 4 deletions(-)\n$ git push\nCounting objects: 17, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (9/9), 844 bytes, done.\nTotal 9 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds-console.git\n   21eaba8..77b69ba  master -> master\n\n389-ds-admin-console:\n$ git merge work\nUpdating d3e6a17..42c10a6\nFast-forward\n .../management/admserv/panel/TurnOnSSL.java        |    4 ++--\n 1 files changed, 2 insertions(+), 2 deletions(-)\n$ git push\nCounting objects: 17, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (9/9), 799 bytes, done.\nTotal 9 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/admin-console.git\n   d3e6a17..42c10a6  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3822350",
						"comment_count": "17",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-06-20 10:20:01 +0000",
						"thetext": "Created attachment 505577\nScreen_Verified\n\n[Test scenario]\n\nSet up the servers\n# setup-ds-admin.pl\n\nSSL are not enabled.\n# egrep -i --color nsSSL3 slapd-ID/dse.ldif\nnsSSL3: off\n\n<ami>\n[root@testvm 151705]#  egrep -i --color nsSSL3 /etc/dirsrv/slapd-testvm/dse.ldif\nnsSSL3: off\n</ami>\n\n# egrep -i --color NSSCipherSuite admin-serv/console.conf\nNSSCipherSuite +rsa_rc4_128_md5,+rsa_rc4_128_sha,+rsa_3des_sha,-rsa_des_sha,\n -rsa_rc4_40_md5,-rsa_rc2_40_md5,-rsa_null_md5,-rsa_null_sha,+fips_3des_sha,\n -fips_des_sha,-fortezza,-fortezza_rc4_128_sha,-fortezza_null,-rsa_des_56_sha,\n -rsa_rc4_56_sha,+rsa_aes_128_sha,+rsa_aes_256_sha\n\n<ami>\n[root@testvm 151705]# egrep -i --color NSSCipherSuite /etc/dirsrv/admin-serv/console.conf\nNSSCipherSuite +rsa_rc4_128_md5,+rsa_rc4_128_sha,+rsa_3des_sha,-rsa_des_sha,\n-rsa_rc4_40_md5,-rsa_rc2_40_md5,-rsa_null_md5,-rsa_null_sha,+fips_3des_sha,\n-fips_des_sha,-fortezza,-fortezza_rc4_128_sha,-fortezza_null,-rsa_des_56_sha,\n-rsa_rc4_56_sha,+rsa_aes_128_sha,+rsa_aes_256_sha\n</ami>\n\n\nSSL is set up. (FYI: Script setupssl2.sh is available at http://directory.fedoraproject.org/wiki/Howto:SSL)\n# egrep -i --color nsSSL3 slapd-ID/dse.ldif\nnsSSL3: on\nnsSSL3Ciphers: -rsa_null_md5,-rsa_null_sha,+rsa_rc4_128_md5,+rsa_rc4_40_md5,+r\n sa_rc2_40_md5,+rsa_des_sha,+rsa_fips_des_sha,+rsa_3des_sha,+rsa_fips_3des_sh\n a,+fortezza,+fortezza_rc4_128_sha,+fortezza_null,+tls_rsa_export1024_with_rc\n 4_56_sha,+tls_rsa_export1024_with_des_cbc_sha,+tls_rsa_aes_128_sha,+tls_rsa_\n aes_256_sha\n\n<ami>\n[root@testvm scripts]# egrep -i --color nsSSL3 /etc/dirsrv/slapd-testvm/dse.ldif\nnsSSL3: on\nnsSSL3Ciphers: -rsa_null_md5,+rsa_fips_3des_sha,+rsa_fips_des_sha,+rsa_3des_sh\n</ami>\n\n\nDS Console | Configuration | Encryption | Click Cipher: Settings button.\n\n\nNote: \"None None MD5\" and \"RC4 128 MD5\" on SSL 3.0 and \"AES 128 SHA\" and \"AES 256 SHA\" are added.\n\nDisable AES 128 SHA.\n# egrep tls_rsa_aes_128_sha /etc/dirsrv/slapd-ID/dse.ldif\n 4_56_sha,+tls_rsa_export1024_with_des_cbc_sha,-tls_rsa_aes_128_sha,+tls_rsa_\n\nRestart the Console and open Cipher Preference dialog.  AES 128 SHA is still disabled.\n\n<ami>\n-- Yes, AES 128 SHA is still disabled.\n</ami>\n\nAdmin Server\nAS Console | Configuration | Encryption\nClick Enable SSL for this serv.\nClick Use this cipher family: RSA\nClick Cipher: Settings\n\nSSL2.0\n\n\nSSL3.0\n\n\nTLS\n\n\nldapsearch ...  -b \"cn=encryption,cn=configuration,cn=admin-serv-ID,cn=389 Administration Server,cn=Server Group,cn=FQDN,ou=DN,o=NetscapeRoot\" \"(cn=*)\" nsSSL3Ciphers\n...\nnsSSL3Ciphers: +rsa_rc2_40_md5,+rsa_rc4_128_md5,+rsa_3des_sha,+rsa_rc4_40_md5,\n -rsa_null_sha,+fips_des_sha,+fips_3des_sha,+rsa_des_sha,-rsa_null_md5,+rsa_a\n es_128_sha,+rsa_aes_256_sha,+rsa_des_56_sha,+rsa_rc4_56_sha\n\nDisable SSL3.0, RC2 (Export) 40 MD5\n\n<ami>\n[root@testvm scripts]# ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=encryption,cn=configuration,cn=admin-serv-testvm,cn=389 administration server,cn=server group,cn=testvm.pnq.redhat.com,ou=pnq.redhat.com,o=netscaperoot\" \"(cn=*)\"\n# extended LDIF\n#\n\n# encryption, configuration, admin-serv-testvm, 389 Administration Server, Se\n rver Group, testvm.pnq.redhat.com, pnq.redhat.com, NetscapeRoot\ndn: cn=encryption,cn=configuration,cn=admin-serv-testvm,cn=389 Administration \n Server,cn=Server Group,cn=testvm.pnq.redhat.com,ou=pnq.redhat.com,o=NetscapeRoot\ncn: encryption\nobjectClass: nsEncryptionConfig\nobjectClass: top\nnsCertfile: blank\nnsKeyfile: blank\nnsSSL2: off\nnsSSL3: on\nnsSSLSessionTimeout: 0\nnsSSL3SessionTimeout: 0\nnsSSLClientAuth: off\nnsSSL2Ciphers: -des,-rc2export,-rc4export,-desede3,-rc4,-rc2\nnsSSL3Ciphers: +rsa_rc2_40_md5,+rsa_rc4_128_md5,+rsa_3des_sha,+rsa_rc4_40_md5,\n -rsa_null_sha,+fips_des_sha,+fips_3des_sha,+rsa_des_sha,-rsa_null_md5,+rsa_ae\n s_128_sha,+rsa_aes_256_sha,+rsa_des_56_sha,+rsa_rc4_56_sha\n\n# RSA, encryption, configuration, admin-serv-testvm, 389 Administration Serve\n r, Server Group, testvm.pnq.redhat.com, pnq.redhat.com, NetscapeRoot\ndn: cn=RSA,cn=encryption,cn=configuration,cn=admin-serv-testvm,cn=389 Administ\n ration Server,cn=Server Group,cn=testvm.pnq.redhat.com,ou=pnq.redhat.com,o=Ne\n tscapeRoot\ncn: RSA\nobjectClass: nsEncryptionModule\nobjectClass: top\nnsSSLToken: internal (software)\nnsSSLPersonalitySSL: Admin-Cert\nnsSSLActivation: on\n\n</ami>\n\n\nldapsearch ...  -b \"cn=encryption,cn=configuration,cn=admin-serv-ID,cn=389 Administration Server,cn=Server Group,cn=FQDN,ou=DN,o=NetscapeRoot\" \"(cn=*)\" nsSSL3Ciphers\n...\nnsSSL3Ciphers: -rsa_rc2_40_md5,+rsa_rc4_128_md5,+rsa_3des_sha,+rsa_rc4_40_md5,\n -rsa_null_sha,+fips_des_sha,+fips_3des_sha,+rsa_des_sha,-rsa_null_md5,+rsa_a\n es_128_sha,+rsa_aes_256_sha,+rsa_des_56_sha,+rsa_rc4_56_sha\n\nNSSCipherSuite \"-des,-rc2export,-rc4export,-desede3,-rc4,-rc2,-rsa_rc2_40_md5,+rsa_rc4_128_md5,+rsa_3des_sha,\n +rsa_rc4_40_md5,-rsa_null_sha,+fips_des_sha,+fips_3des_sha,+rsa_des_sha,-rsa_null_md5,-rsa_aes_128_sha,\n +rsa_aes_256_sha,+rsa_des_56_sha,+rsa_rc4_56_sha\"\n\n<ami>\nldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=encryption,cn=configuration,cn=admin-serv-testvm,cn=389 administration server,cn=server group,cn=testvm.pnq.redhat.com,ou=pnq.redhat.com,o=netscaperoot\" \"(cn=*)\" nsSSL3Ciphers\n\n# encryption, configuration, admin-serv-testvm, 389 Administration Server, Se\n rver Group, testvm.pnq.redhat.com, pnq.redhat.com, NetscapeRoot\ndn: cn=encryption,cn=configuration,cn=admin-serv-testvm,cn=389 Administration \n Server,cn=Server Group,cn=testvm.pnq.redhat.com,ou=pnq.redhat.com,o=NetscapeR\n oot\nnsSSL3Ciphers: +rsa_rc2_40_md5,+rsa_rc4_128_md5,+rsa_3des_sha,+rsa_rc4_40_md5,\n -rsa_null_sha,+fips_des_sha,+fips_3des_sha,+rsa_des_sha,-rsa_null_md5,+rsa_ae\n s_128_sha,+rsa_aes_256_sha,+rsa_des_56_sha,+rsa_rc4_56_sha\n\n\nRestart the servers and check the values match.\nNote: once SSL on AS is enabled, you need to access the AS with https://host:port.\n\nPFA for the screen shots. Marking VERIFIED."
					}
				]
			}
		},
		{
			"bug_id": 604881,
			"title": "server log files have incorrect permissions/ownerships",
			"bugzilla": {
				"bug_id": "604881",
				"creation_ts": "2010-06-16 22:11:11 +0000",
				"short_desc": "server log files have incorrect permissions/ownerships",
				"delta_ts": "2016-05-06 14:44:20 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "434915",
						"error": "NotPermitted"
					},
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "676729",
						"creation_ts": "2011-02-10 23:26:08 +0000",
						"short_desc": "server log files have incorrect permissions/ownerships",
						"delta_ts": "2015-01-04 23:46:18 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"604881"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3532104",
								"comment_count": "0",
								"who": {
									"text": "nhosoi",
									"name": "Noriko Hosoi"
								},
								"bug_when": "2011-02-10 23:26:08 +0000",
								"thetext": "Description of problem:\nCloning Bug 604881 - server log files have incorrect permissions/ownerships"
							},
							{
								"isprivate": "0",
								"commentid": "3532105",
								"comment_count": "1",
								"who": {
									"text": "nhosoi",
									"name": "Noriko Hosoi"
								},
								"bug_when": "2011-02-10 23:29:06 +0000",
								"thetext": "The patch for this has been pushed to the 389-ds-base-1.2.8 branch.\n\n$ git cherry-pick 513e5a83ff806e9dcfa9b32287e2ce7b6ff95ddf\nFinished one cherry-pick.\n[ds128-local 96bb64a] Bug 604881 - admin server log files have incorrect\npermissions/ownerships\n 1 files changed, 6 insertions(+), 6 deletions(-)\n$ git push origin ds128-local:389-ds-base-1.2.8\nCounting objects: 11, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 884 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   ceec7ba..96bb64a  ds128-local -> 389-ds-base-1.2.8"
							},
							{
								"isprivate": "0",
								"commentid": "3695188",
								"comment_count": "4",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-04-25 06:20:49 +0000",
								"thetext": "Hi,\n\nI have tested this bug :\n\nSteps:\n1. cd /var/log/dirsrv/slapd-amitesthost\n2. [root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\n-rw-------. 1 nobody nobody 1853 Apr 13 18:33 errors\ndrwxrwx---. 2 nobody nobody 4096 Apr 13 19:09 .\n-rw-------. 1 nobody nobody 5996 Apr 13 19:35 access\n3.chown root:root errors access\n[root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\ndrwxrwx---. 2 root   root   4096 Apr 13 19:09 .\n-rw-------. 1 root   root   5996 Apr 13 19:35 access\n-rw-------. 1 root   root   2507 Apr 14 18:35 errors\n4. service dirsrv restart\n5. [root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\ndrwxrwx---. 2 root   root   4096 Apr 13 19:09 .\n-rw-------. 1 nobody nobody 5996 Apr 13 19:35 access\n-rw-------. 1 nobody nobody 3161 Apr 14 19:01 errors\n\nTest passed, Marking it as verified.\n\n- Amita"
							},
							{
								"isprivate": "0",
								"commentid": "3744594",
								"comment_count": "5",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:32 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "2932443",
						"comment_count": "0",
						"who": {
							"text": "ckannan",
							"name": "Chandrasekar Kannan"
						},
						"bug_when": "2010-06-16 22:11:11 +0000",
						"thetext": "When changing admin server log file path/filenames via console, I noticed the old filenames have incorrect ownerships"
					},
					{
						"isprivate": "0",
						"commentid": "2932446",
						"comment_count": "1",
						"who": {
							"text": "ckannan",
							"name": "Chandrasekar Kannan"
						},
						"bug_when": "2010-06-16 22:14:42 +0000",
						"thetext": "[root@nocp8 admin-serv]# ls -alrt\ntotal 48\ndrwxr-xr-x 4 root   root   4096 Jun 16 14:10 ..\ndrwx------ 2 nobody nobody 4096 Jun 16 14:18 .\n-rw-r--r-- 1 root   root   1470 Jun 16 14:18 access\n-rw-r--r-- 1 root   root   2615 Jun 16 14:18 error\n-rw-r--r-- 1 nobody nobody 2202 Jun 16 15:06 error2\n-rw-r--r-- 1 nobody nobody 1356 Jun 16 15:06 access2\n[root@nocp8 admin-serv]# pwd\n/var/log/dirsrv/admin-serv"
					},
					{
						"isprivate": "0",
						"commentid": "3528032",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-09 00:06:55 +0000",
						"thetext": "Created attachment 477717\ngit patch file (master)\n\nDescription: Log files generated in the server's startup time has\nthe server's owner (nsslapd-localuser) for the owner and the group\nwho starts the server (ordinarily, root).  Once the server goes\ninto the daemon stage, new log files are owned by owner: nsslapd-\nlocaluser and group: the local user's primary group.  The latter\nis the correct ownership of the log files.\nThis patch sets the correct ownership to the files generated in\nthe server's startup time, as well."
					},
					{
						"isprivate": "0",
						"commentid": "3531982",
						"comment_count": "5",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-10 22:11:32 +0000",
						"thetext": "Created attachment 478131\nAS: git patch file (master)\n\nDescription: Log files first generated by the Admin Server/Apache\nhas the owner (root, root), but the log files created later via\nConsole/CGI are owned by the Admin User/Group (e.g., nobody, nobody).\nTo make them consistent, this patch modifies the install script to\ncall chown to change the owner to the original log files."
					},
					{
						"isprivate": "0",
						"commentid": "3532071",
						"comment_count": "6",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-10 23:11:03 +0000",
						"thetext": "Reviewed by Rich and Nathan (Thank you!!!)\n\nPushed to master.\n\nDS\n$ git merge 604881\nUpdating 1132e09..513e5a8\nFast-forward\n ldap/servers/slapd/main.c |   12 ++++++------\n 1 files changed, 6 insertions(+), 6 deletions(-)\n$ git push\nCounting objects: 11, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 885 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   1132e09..513e5a8  master -> master\n\nAS\n$ git merge work\nUpdating a9085ef..a997fc5\nFast-forward\n admserv/newinst/src/AdminServer.pm.in |   16 ++++++++++++++++\n 1 files changed, 16 insertions(+), 0 deletions(-)\n$ git push\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (6/6), 936 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/admin.git\n   a9085ef..a997fc5  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3532088",
						"comment_count": "7",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-10 23:15:45 +0000",
						"thetext": "Cherry-picked and pushed to 389-ds-base-1.2.8.\n\n$ git cherry-pick 513e5a83ff806e9dcfa9b32287e2ce7b6ff95ddf\nFinished one cherry-pick.\n[ds128-local 96bb64a] Bug 604881 - admin server log files have incorrect permissions/ownerships\n 1 files changed, 6 insertions(+), 6 deletions(-)\n$ git push origin ds128-local:389-ds-base-1.2.8\nCounting objects: 11, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 884 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   ceec7ba..96bb64a  ds128-local -> 389-ds-base-1.2.8"
					},
					{
						"isprivate": "0",
						"commentid": "3532097",
						"comment_count": "8",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-10 23:22:07 +0000",
						"thetext": "Since this bug covers both the directory and the admin server, changing the summary from:\n  admin server log files have incorrect permissions/ownerships\nto\n  server log files have incorrect permissions/ownerships"
					},
					{
						"isprivate": "0",
						"commentid": "3674745",
						"comment_count": "9",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-04-14 13:27:43 +0000",
						"thetext": "Hi,\n\nI have tested this bug :\n\nSteps:\n1. cd /var/log/dirsrv/slapd-amitesthost\n2. [root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\n-rw-------. 1 nobody nobody 1853 Apr 13 18:33 errors\ndrwxrwx---. 2 nobody nobody 4096 Apr 13 19:09 .\n-rw-------. 1 nobody nobody 5996 Apr 13 19:35 access\n3.chown root:root errors access\n[root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\ndrwxrwx---. 2 root   root   4096 Apr 13 19:09 .\n-rw-------. 1 root   root   5996 Apr 13 19:35 access\n-rw-------. 1 root   root   2507 Apr 14 18:35 errors\n4. service dirsrv restart\n5. [root@amitesthost slapd-amitesthost]# ls -alrt\ntotal 32\ndrwxr-xr-x. 3 root   root   4096 Apr 13 10:55 ..\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 errors.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 audit.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 13 10:55 audit\n-rw-------. 1 nobody nobody   63 Apr 13 10:55 access.rotationinfo\ndrwxrwx---. 2 root   root   4096 Apr 13 19:09 .\n-rw-------. 1 nobody nobody 5996 Apr 13 19:35 access\n-rw-------. 1 nobody nobody 3161 Apr 14 19:01 errors\n\nTest passed, Marking it as verified."
					}
				]
			}
		},
		{
			"bug_id": 615052,
			"title": "intrinsics and 64-bit atomics code fails to compile on PA-RISC",
			"bugzilla": {
				"bug_id": "615052",
				"creation_ts": "2010-07-15 20:32:38 +0000",
				"short_desc": "intrinsics and 64-bit atomics code fails to compile on PA-RISC",
				"delta_ts": "2015-01-04 23:43:20 +0000",
				"bug_status": "CLOSED",
				"resolution": "NOTABUG",
				"priority": "low",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "576869",
						"alias": "389_1.2.7",
						"creation_ts": "2010-03-25 14:25:35 +0000",
						"short_desc": "Tracking bug for 389 Directory Server 1.2.7",
						"delta_ts": "2015-01-04 23:41:56 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"189985",
							"194531",
							"305131",
							"472131",
							"489379",
							"498097",
							"513166",
							"522055",
							"525822",
							"531642",
							"553636",
							"555296",
							"572018",
							"573886",
							"573889",
							"583622",
							"586966",
							"590062",
							"591313",
							"592397",
							"601946",
							"602456",
							"602505",
							"602510",
							"602530",
							"602531",
							"602532",
							"603943",
							"606439",
							"606545",
							"609255",
							"609590",
							"610119",
							"610177",
							"610276",
							"610281",
							"611790",
							"611850",
							"612264",
							"613056",
							"614242",
							"614511",
							"615052",
							"615100",
							"616213",
							"616260",
							"616500",
							"616850",
							"617363",
							"617630",
							"618454",
							"618858",
							"619122",
							"621008",
							"622628",
							"622903",
							"623118",
							"623507",
							"624994",
							"625014",
							"625950",
							"629681",
							"629710",
							"631124",
							"632670",
							"632736",
							"633168",
							"634011",
							"635009",
							"635987",
							"637852",
							"639289",
							"640027",
							"640854",
							"642782",
							"643532",
							"643937",
							"644013",
							"644608",
							"644929",
							"645061",
							"651571",
							"656392",
							"656441",
							"656515",
							"658309",
							"658583",
							"658584",
							"658591",
							"661792",
							"663597"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "2739048",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2010-03-25 14:25:35 +0000",
								"thetext": "Tracking bug for 389 Directory Server 1.2.7"
							}
						]
					},
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3010045",
						"comment_count": "0",
						"who": {
							"text": "ulf.weltman",
							"name": "Ulf Weltman"
						},
						"bug_when": "2010-07-15 20:32:38 +0000",
						"thetext": "PA-RISC doesn't have instructions for atomic manipulation of 64-bit integers, so use pthread mutex to protect this code.  That code is already there, we just need to make sure ATOMIC_64BIT_OPERATIONS is not set for PA-RISC.\n\nAlso, pragma INLINE for listing functions that should be inlined is not supported by PA-RISC's compiler.  Using the __inline keyword works with both PA-RISC and IA64 compilers in ANSI C mode."
					},
					{
						"isprivate": "0",
						"commentid": "3010047",
						"comment_count": "1",
						"who": {
							"text": "ulf.weltman",
							"name": "Ulf Weltman"
						},
						"bug_when": "2010-07-15 20:33:31 +0000",
						"thetext": "Created attachment 432218\npatch proposal"
					},
					{
						"isprivate": "0",
						"commentid": "3519463",
						"comment_count": "3",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 19:18:33 +0000",
						"thetext": "Created attachment 476851\ngit patch file (master) -- applyed 432218: patch proposal to configure.ac and intrinsics.h\n\nNote: configure has been regenerated with autogen.sh script on F-14."
					},
					{
						"isprivate": "0",
						"commentid": "3519474",
						"comment_count": "5",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 19:22:54 +0000",
						"thetext": "Pushed to master on behalf of Ulf Weltman (ulf.weltman@hp.com).\n\n$ git merge 615052\nUpdating b7bf3cb..926d8cc\nFast-forward\n configure                       |    3 ---\n configure.ac                    |    1 -\n ldap/servers/slapd/intrinsics.h |    7 +++----\n 3 files changed, 3 insertions(+), 8 deletions(-)\n$ git push\nCounting objects: 15, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (8/8), done.\nWriting objects: 100% (8/8), 1.11 KiB, done.\nTotal 8 (delta 6), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   b7bf3cb..926d8cc  master -> master"
					}
				]
			}
		},
		{
			"bug_id": 616213,
			"title": "insufficient stack size for HP-UX on PA-RISC",
			"bugzilla": {
				"bug_id": "616213",
				"creation_ts": "2010-07-19 20:33:59 +0000",
				"short_desc": "insufficient stack size for HP-UX on PA-RISC",
				"delta_ts": "2015-01-04 23:43:20 +0000",
				"bug_status": "CLOSED",
				"resolution": "NOTABUG",
				"priority": "low",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "576869",
						"alias": "389_1.2.7",
						"creation_ts": "2010-03-25 14:25:35 +0000",
						"short_desc": "Tracking bug for 389 Directory Server 1.2.7",
						"delta_ts": "2015-01-04 23:41:56 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"189985",
							"194531",
							"305131",
							"472131",
							"489379",
							"498097",
							"513166",
							"522055",
							"525822",
							"531642",
							"553636",
							"555296",
							"572018",
							"573886",
							"573889",
							"583622",
							"586966",
							"590062",
							"591313",
							"592397",
							"601946",
							"602456",
							"602505",
							"602510",
							"602530",
							"602531",
							"602532",
							"603943",
							"606439",
							"606545",
							"609255",
							"609590",
							"610119",
							"610177",
							"610276",
							"610281",
							"611790",
							"611850",
							"612264",
							"613056",
							"614242",
							"614511",
							"615052",
							"615100",
							"616213",
							"616260",
							"616500",
							"616850",
							"617363",
							"617630",
							"618454",
							"618858",
							"619122",
							"621008",
							"622628",
							"622903",
							"623118",
							"623507",
							"624994",
							"625014",
							"625950",
							"629681",
							"629710",
							"631124",
							"632670",
							"632736",
							"633168",
							"634011",
							"635009",
							"635987",
							"637852",
							"639289",
							"640027",
							"640854",
							"642782",
							"643532",
							"643937",
							"644013",
							"644608",
							"644929",
							"645061",
							"651571",
							"656392",
							"656441",
							"656515",
							"658309",
							"658583",
							"658584",
							"658591",
							"661792",
							"663597"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "2739048",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2010-03-25 14:25:35 +0000",
								"thetext": "Tracking bug for 389 Directory Server 1.2.7"
							}
						]
					},
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3017283",
						"comment_count": "0",
						"who": {
							"text": "ulf.weltman",
							"name": "Ulf Weltman"
						},
						"bug_when": "2010-07-19 20:33:59 +0000",
						"thetext": "Default stack size is 64K on PA and this is insufficient, ACL tests crash.  Just set to 256K for all HP-UX."
					},
					{
						"isprivate": "0",
						"commentid": "3017285",
						"comment_count": "1",
						"who": {
							"text": "ulf.weltman",
							"name": "Ulf Weltman"
						},
						"bug_when": "2010-07-19 20:34:41 +0000",
						"thetext": "Created attachment 432992\npatch proposal"
					},
					{
						"isprivate": "0",
						"commentid": "3519552",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-03 19:47:58 +0000",
						"thetext": "Pushed to master on behalf of Ulf Weltman (ulf.weltman@hp.com).\n\n$ git merge 616213\nUpdating 926d8cc..be92452\nFast-forward\n ldap/servers/slapd/slapi-plugin.h |    9 +++++----\n 1 files changed, 5 insertions(+), 4 deletions(-)\n$ git push\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 813 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   926d8cc..be92452  master -> master"
					}
				]
			}
		},
		{
			"bug_id": 624547,
			"title": "attrcrypt should query the given slot/token for supported ciphers",
			"bugzilla": {
				"bug_id": "624547",
				"creation_ts": "2010-08-16 20:34:35 +0000",
				"short_desc": "attrcrypt should query the given slot/token for supported ciphers",
				"delta_ts": "2015-12-10 18:38:31 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "medium",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3498073",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-25 01:35:21 +0000",
						"thetext": "Created attachment 475097\ngit patch file (master)\n\nThe reported problem was caused by the bug in ldbm_attrcrypt.c which did not expect to have an external PKCS #11 token.  This patch successfully initializes ldbm_attrcrypt.\n\nBut ldbm_attrcrypt fails once trying to encrypt an attribute. e.g.:\ndn: cn=givenname,cn=encrypted attributes,cn=userRoot,cn=ldbm database,cn=plugi\n ns,cn=config\nobjectClass: top\nobjectClass: nsAttributeEncryption\ncn: givenname\nnsEncryptionAlgorithm: AES [ or 3DES ]\n\nerror log:\n[..] attrcrypt - _back_crypt_crypto_op: failed on cipher AES : -8192 - An I/O error occurred during security authorization.\n[..] - Error: attrcrypt_crypto_op_values failed in attrcrypt_encrypt_entry\n[..] - attrcrypt_encrypt_entry failed in id2entry_add"
					},
					{
						"isprivate": "0",
						"commentid": "3504770",
						"comment_count": "7",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-27 20:01:46 +0000",
						"thetext": "Created attachment 475673\ngit patch file (master)\n\nDescription:\n1. To retrieve a certificate from an external token (i.e., not\n   \"internal (software)\"), \"<token>:<cert_nickname> should have\n   been passed.  The <token> part was missing.\n2. The key to be used for encryption and decryption internally\n   needs to have ENCRYPT and DECRYPT attribute set, respectively.\n   The correct attributes were not set.  Note: these attributes\n   are automatically set for the softoken in nss, but not for the\n   external token.  This is why attrcrypt worked for the softoken,\n   but not for the external token.  The attributes need to be set\n   when the key is generated as well as when the key is unwrapped.\n3. Adding a code to check if the underlying system supports the\n   cipher or not before generating a key.  If it is not supported,\n   it issues a message not to choose the cipher for the attrcrypt/\n   changelog encryption.  If none of the ciphers are supported and\n   if attrcrypt/changelog encryption is enabled, the server fails\n   to start."
					},
					{
						"isprivate": "0",
						"commentid": "3504846",
						"comment_count": "8",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-27 20:42:30 +0000",
						"thetext": "Reviewed by Nathan (Thank you!!!)\n\nPushed to master.\n\n$ git merge 624547\nUpdating 7ece306..57dcdf1\nFast-forward\n ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c |  141 ++++++++++++++++++++----\n ldap/servers/slapd/proto-slap.h               |    3 +\n ldap/servers/slapd/security_wrappers.c        |   36 ++++++-\n 3 files changed, 151 insertions(+), 29 deletions(-)\n\n$ git push\nCounting objects: 17, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (9/9), done.\nWriting objects: 100% (9/9), 3.26 KiB, done.\nTotal 9 (delta 7), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   7ece306..57dcdf1  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3896354",
						"comment_count": "11",
						"who": {
							"text": "ckannan",
							"name": "Chandrasekar Kannan"
						},
						"bug_when": "2011-07-19 14:07:01 +0000",
						"thetext": "I tried to verify this bug. But I was not able to setup ds (use the wizard and generate key pair to setup ssl certs) with our newest nethsm6k.dsdev.sjc.redhat.com. that hardware token is in fips mode. my machine is selinux permissive. I'm still troubleshooting the problem."
					}
				]
			}
		},
		{
			"bug_id": 646381,
			"title": "Faulty password for nsmultiplexorcredentials does not give any error message in logs",
			"bugzilla": {
				"bug_id": "646381",
				"creation_ts": "2010-10-25 09:36:03 +0000",
				"short_desc": "Faulty password for nsmultiplexorcredentials does not give any error message in logs",
				"delta_ts": "2015-12-07 17:08:17 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "low",
				"bug_severity": "low",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3233440",
						"comment_count": "0",
						"who": {
							"text": "gerhardus.geldenhuis",
							"name": "Gerhardus Geldenhuis"
						},
						"bug_when": "2010-10-25 09:36:03 +0000",
						"thetext": "Description of problem:\n~~~~~~~~~~~~~~~~~~~~~~~\nIf the password in nsmultiplexorcredentials for a chaining setup is wrong there is no error message in the log to notify you that the credentials is faulty when the chaining connection is used. Specifically if a user changes his/her password then chaining will be used in our setup. In case of a faulty password the user will see the following error message:\n\nNew UNIX password:\nRetype new UNIX password:\nLDAP password information update failed: Operations error\n\nVersion-Release number of selected component (if applicable):\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n389-admin-1.1.11-1.el5\n389-admin-console-1.1.5-1.el5\n389-admin-console-doc-1.1.5-1.el5\n389-adminutil-1.1.8-4.el5\n389-console-1.1.4-1.el5\n389-ds-1.2.1-1.el5\n389-ds-base-1.2.6.1-1.el5\n389-ds-console-1.2.3-1.el5\n389-ds-console-doc-1.2.3-1.el5\n389-dsgw-1.1.5-1.el5\n\n\nHow reproducible:\n~~~~~~~~~~~~~~~~~\nReliably, changing the password via the console to the correct version fixes \n\n\nSteps to Reproduce:\n~~~~~~~~~~~~~~~~~~~\n\n0. Description of environment\nMaster01 ( Provider database )\nMaster02 ( Consumer database, with chaining for writes back to master01 )\nClient01 ( Firewall between client01 and master02, authenticates against master02 )\n\n1. Setup chaining using the following ldif\n\nchangetype: add\nobjectClass: top\nobjectClass: extensibleObject\nobjectClass: nsBackendInstance\ncn: chainingBackend\nnsslapd-suffix: dc=company\nnsmultiplexorbinddn: cn=replication manager,cn=config\nnsusestarttls: off\nnsfarmserverurl: ldaps://%localmasterfqdn1%:636 %localmasterfqdn2%:636/\nnsmultiplexorcredentials: faultysecret\nnsbindconnectionslimit: 5\nnsconcurrentoperationslimit: 5\nnsconnectionlife: 130\nnsbindtimeout: 3\nnsbindretrylimit: 3\nnsmaxresponsedelay: 3\nnsmaxtestresponsedelay: 5\n\ndn: cn=dc\\3dcompany,cn=mapping tree,cn=config\nchangetype: modify\nadd: nsslapd-backend\nnsslapd-backend: chainingBackend\n-\nreplace: nsslapd-state\nnsslapd-state: backend\n-\nreplace: nsslapd-distribution-plugin\nnsslapd-distribution-plugin: /usr/lib64/dirsrv/plugins/libreplication-plugin.so\n-\nreplace: nsslapd-distribution-funct\nnsslapd-distribution-funct: repl_chain_on_update\n\n\ndn: cn=config,cn=chaining database,cn=plugins,cn=config\nchangetype: modify\nadd: nsTransmittedControls\nnsTransmittedControls: 2.16.840.1.113730.3.4.12\n\n\n2. Setup password policies\n\ndn: cn=config\nchangetype: modify\nreplace: passwordMaxAge\npasswordMaxAge: 7776000\n-\nreplace: passwordExp\npasswordExp: on\n-\nreplace: passwordHistory\npasswordHistory: on\n-\nreplace: passwordWarning\npasswordWarning: 604800\n-\nreplace: nsslapd-pwpolicy-local\nnsslapd-pwpolicy-local: on\n-\nreplace: passwordInHistory\npasswordInHistory: 12\n-\nreplace: passwordCheckSyntax\npasswordCheckSyntax: on\n-\nreplace: passwordGraceLimit\npasswordGraceLimit: 3\n-\nreplace: passwordMaxRepeats\npasswordMaxRepeats: 0\n-\nreplace: passwordMinLength\npasswordMinLength: 8\n-\nreplace: passwordMinAlphas\npasswordMinAlphas: 0\n-\nreplace: passwordMinDigits\npasswordMinDigits: 0\n-\nreplace: passwordMinSpecials\npasswordMinSpecials: 0\n-\nreplace: passwordMinLowers\npasswordMinLowers: 0\n-\nreplace: passwordMinCategories\npasswordMinCategories: 3\n-\nreplace: passwordMinUppers\npasswordMinUppers: 0\n-\nreplace: passwordMinTokenLength\npasswordMinTokenLength: 3\n-\nreplace: passwordMin8bit\npasswordMin8bit: 0\n-\nreplace: passwordMinAge\npasswordMinAge: 86400\n-\nreplace: passwordMustChange\npasswordMustChange: on\n\n\ndn: cn=config\nchangetype: modify\nreplace: passwordIsGlobalPolicy\npasswordIsGlobalPolicy: on\n\n\n3. Login on client01 as any user in directory\n\n4. Try to change password as user using passwd command\n  \nActual results:\nLDAP password information update failed: Operations error\n\nExpected results:\nExpects to be able to change password and if not see a relevant error in the log that tells me that the chaining authentication failed.\n\nAdditional info:\nI have enabled the following log levels in the error log on both master01 and master02:\ncces Control Summary\nPlug-ins\nHeavy Trace Output\nConnection Management\nLog Communications with shell databases\n\nwhile looking into this problem. The other log levels did not seem relevant. I have not seen an appropriate error message in either master01 or master02 or client01 that would indicate that there was an authentication error with the chaining setup.\n\nI can do more tests and recheck error messages in log levels if required."
					},
					{
						"isprivate": "0",
						"commentid": "3500513",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-26 00:40:13 +0000",
						"thetext": "Created attachment 475308\ngit patch file (master)\n\nDescription: Chaning db plugin was terse not to reveal the config\nerror to end users as well as to prevent error log overflow by\nevery single error possibly caused by end users.\nThis patch returns this generic error text to end users:\n  ldap_add: Operations error (1)\n  additional info: database configuration error - \\\n  please contact the system administrator\nAnd more detailed messages are logged in the errors log.  E.g.,\n  chaining database - Internal credentials decoding error;\n  password storage schemes do not match or encrypted password\n  is corrupted.\n  chaining database - cb_get_connection failed (49) Invalid credentials\nNote: the messages are logged just once in the errors log."
					},
					{
						"isprivate": "0",
						"commentid": "3500533",
						"comment_count": "5",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-26 01:14:16 +0000",
						"thetext": "Reviewed by Nathan (Thank you!!!)\n\nPushed to master.\n\n$ git merge 646381\nUpdating a7fe1a3..7ece306\nFast-forward\n ldap/servers/plugins/chainingdb/cb.h               |    2 +\n ldap/servers/plugins/chainingdb/cb_add.c           |   76 ++++++++++-----\n ldap/servers/plugins/chainingdb/cb_bind.c          |   62 ++++++++-----\n ldap/servers/plugins/chainingdb/cb_compare.c       |   55 +++++++----\n .../servers/plugins/chainingdb/cb_conn_stateless.c |   71 ++++++++++-----\n ldap/servers/plugins/chainingdb/cb_delete.c        |   80 ++++++++++------\n ldap/servers/plugins/chainingdb/cb_modify.c        |   74 ++++++++++-----\n ldap/servers/plugins/chainingdb/cb_modrdn.c        |   82 +++++++++++------\n ldap/servers/plugins/chainingdb/cb_search.c        |   99 ++++++++++++++------\n ldap/servers/slapd/pw.c                            |    4 +-\n 10 files changed, 404 insertions(+), 201 deletions(-)\n\n$ git push\nCounting objects: 33, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (17/17), done.\nWriting objects: 100% (17/17), 5.91 KiB, done.\nTotal 17 (delta 15), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   a7fe1a3..7ece306  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3501062",
						"comment_count": "6",
						"who": {
							"text": "gerhardus.geldenhuis",
							"name": "Gerhardus Geldenhuis"
						},
						"bug_when": "2011-01-26 09:57:13 +0000",
						"thetext": "Thanks! That will really be helpful for anyone running into a similar problem again.\n\nWill the message always show up in the errors log or is it tied to log level?"
					},
					{
						"isprivate": "0",
						"commentid": "3502052",
						"comment_count": "7",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-26 16:58:35 +0000",
						"thetext": "(In reply to comment #6)\n> Will the message always show up in the errors log or is it tied to log level?\n\nThey are logged without setting any special log level (but just once).\nThank you for your report!"
					},
					{
						"isprivate": "0",
						"commentid": "3917654",
						"comment_count": "8",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-07-26 21:52:03 +0000",
						"thetext": "Steps to verify:\n1. Set up chaining backend.\n2. Set bogus password in \n    dn: cn=chainbe1,cn=chaining database,cn=plugins,cn=config\n    nsmultiplexorcredentials: bogus <== not a true password.\n3. Run any operation which is fowarded to the chained backend.\n   The operation should fail and it returns this generic error text to end users:\n    ldap_<OP>: Operations error (1)\n    additional info: database configuration error - \\\n    please contact the system administrator\n   And more detailed message(s) are logged in the errors log.  E.g.,\n    chaining database - cb_get_connection failed (49) Invalid credentials"
					},
					{
						"isprivate": "0",
						"commentid": "4019448",
						"comment_count": "9",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-09-15 12:19:53 +0000",
						"thetext": "1. Done the chainonupdate setup.\n\n2. [root@snmaptest ~]# ldapmodify -D \"cn=directory manager\" -w Secret123 -p 34206 -x -h localhost -f /home/bug.ldif\nmodifying entry \"cn=chainbe1,cn=chaining database,cn=plugins,cn=config\n\n3. earlier passwd was :\n nsmultiplexorcredentials: {DES}5ARfALKjUhSVvyIRPHFtAg==\n\nNow\nnsmultiplexorcredentials: {DES}PHzkunoHFUc\n\n4. Still I am able to do below operation :\n\n[root@snmaptest ~]# ldapadd -x -h localhost -p 34202 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: uid=amitaji1,ou=People,o=airius.com\n> cn: ami1\n> sn: ami1\n> objectClass: top\n> objectClass: person\n> objectClass: inetOrgPerson\n> uid: ami1\n> mail: ami1@airius.com\n> telephoneNumber: +1 408 555 1221\n> EOF\nadding new entry \"uid=amitaji1,ou=People,o=airius.com\"\n\nWhat operation I should to hit the error?"
					},
					{
						"isprivate": "0",
						"commentid": "4019613",
						"comment_count": "10",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-09-15 13:16:39 +0000",
						"thetext": "(In reply to comment #9)\n> 1. Done the chainonupdate setup.\n> \n> 2. [root@snmaptest ~]# ldapmodify -D \"cn=directory manager\" -w Secret123 -p\n> 34206 -x -h localhost -f /home/bug.ldif\n> modifying entry \"cn=chainbe1,cn=chaining database,cn=plugins,cn=config\n> \n> 3. earlier passwd was :\n>  nsmultiplexorcredentials: {DES}5ARfALKjUhSVvyIRPHFtAg==\n> \n> Now\n> nsmultiplexorcredentials: {DES}PHzkunoHFUc\n> \n> 4. Still I am able to do below operation :\n> \n> [root@snmaptest ~]# ldapadd -x -h localhost -p 34202 -D \"cn=Directory Manager\"\n> -w Secret123 << EOF\n> > dn: uid=amitaji1,ou=People,o=airius.com\n> > cn: ami1\n> > sn: ami1\n> > objectClass: top\n> > objectClass: person\n> > objectClass: inetOrgPerson\n> > uid: ami1\n> > mail: ami1@airius.com\n> > telephoneNumber: +1 408 555 1221\n> > EOF\n> adding new entry \"uid=amitaji1,ou=People,o=airius.com\"\n> \n> What operation I should to hit the error?\n\nYou have to use a user other than \"cn=Directory Manager\" - operations done by directory manager are done against the local directory server and are not chained."
					},
					{
						"isprivate": "0",
						"commentid": "4022009",
						"comment_count": "11",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-09-16 06:32:06 +0000",
						"thetext": "S1PORT=34202\nS1PORTS=34212\nS2PORT=34204\nS2PORTS=34214\nC1PORT=34206\nC1PORTS=34216\nC2PORT=34208\nC2PORTS=34218\n\nCurrently : nsmultiplexorcredentials: {DES}5ARfALKjUhSVvyIRPHFtAg==\n\n[root@snmaptest ~]# ldapmodify -D \"cn=directory manager\" -w Secret123 -p 34206 -x -h localhost -f /home/bug.ldif\nmodifying entry \"cn=chainbe1,cn=chaining database,cn=plugins,cn=config\"\n\nAfter modify\nnsmultiplexorcredentials: {DES}PHzkunoHFUc=\n\nTrying binding with normal user:\n[root@snmaptest ~]# ldapsearch -x -h localhost -p 34208 -D \"uid=ams,ou=People,o=airius.com\" -w Secret123 -b \"o=airius.com\" | more\n# extended LDIF\n#\n# LDAPv3\n# base <o=airius.com> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# airius.com\ndn: o=airius.com\nobjectClass: top\nobjectClass: organization\no: airius.com\n\n# Groups, airius.com\ndn: ou=Groups,o=airius.com\nobjectClass: top\nobjectClass: organizationalunit\nou: Groups\n\n# Directory Administrators, Groups, airius.com\ndn: cn=Directory Administrators,ou=Groups,o=airius.com\ncn: Directory Administrators\nobjectClass: top\nobjectClass: groupofuniquenames\nou: Groups\nuniqueMember: uid=kvaughan,ou=People,o=airius.com\nuniqueMember: uid=rdaugherty,ou=People,o=airius.com\nuniqueMember: uid=hmiller,ou=People,o=airius.com\n\n# People, airius.com\n\nAlso, I observed :\n[root@snmaptest ~]# ldapadd -x -h localhost -p 34206 -D \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\n> dn: uid=sghai1,ou=People,o=airius.com\n> cn: sghai11\n> sn: sghai11\n> objectClass: top\n> objectClass: person\n> objectClass: inetOrgPerson\n> uid: sghai11\n> mail: s1@airius.com\n> telephoneNumber: +1 408 555 1221\n> EOF\nadding new entry \"uid=sghai1,ou=People,o=airius.com\"\nldap_add: Insufficient access (50)\n\tadditional info: database configuration error - please contact the system administrator\n\n[root@snmaptest ~]# ldapadd -x -h localhost -p 34202 -D \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\ndn: uid=sghai1,ou=People,o=airius.com\ncn: sghai11\nsn: sghai11\nobjectClass: top\nobjectClass: person\nobjectClass: inetOrgPerson\nuid: sghai11\nmail: s1@airius.com\ntelephoneNumber: +1 408 555 1221\nEOF\n\nadding new entry \"uid=sghai1,ou=People,o=airius.com\"\n\n[root@snmaptest ~]# ldapadd -x -h localhost -p 34206 -D \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\ndn: uid=sghai11,ou=People,o=airius.com\ncn: sghai111\nsn: sghai111\nobjectClass: top\nobjectClass: person\nobjectClass: inetOrgPerson\nuid: sghai111\nmail: s1@airius.com\ntelephoneNumber: +1 408 555 1221\nEOF\n\nadding new entry \"uid=sghai11,ou=People,o=airius.com\"\nldap_add: Insufficient access (50)\n\tadditional info: database configuration error - please contact the system administrator\n\n[root@snmaptest ~]# ldapadd -x -h localhost -p 34204 -D \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\ndn: uid=sghai11,ou=People,o=airius.com\ncn: sghai111\nsn: sghai111\nobjectClass: top\nobjectClass: person\nobjectClass: inetOrgPerson\nuid: sghai111\nmail: s1@airius.com\ntelephoneNumber: +1 408 555 1221\nEOF\n\nadding new entry \"uid=sghai11,ou=People,o=airius.com\"\n\n\nPlease guide."
					},
					{
						"isprivate": "0",
						"commentid": "4023620",
						"comment_count": "12",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-09-16 14:59:43 +0000",
						"thetext": "(In reply to comment #11)\n> S1PORT=34202\n> S1PORTS=34212\n> S2PORT=34204\n> S2PORTS=34214\n> C1PORT=34206\n> C1PORTS=34216\n> C2PORT=34208\n> C2PORTS=34218\n> \n> Currently : nsmultiplexorcredentials: {DES}5ARfALKjUhSVvyIRPHFtAg==\n> \n> [root@snmaptest ~]# ldapmodify -D \"cn=directory manager\" -w Secret123 -p 34206\n> -x -h localhost -f /home/bug.ldif\n> modifying entry \"cn=chainbe1,cn=chaining database,cn=plugins,cn=config\"\n> \n> After modify\n> nsmultiplexorcredentials: {DES}PHzkunoHFUc=\n> \n> Trying binding with normal user:\n> [root@snmaptest ~]# ldapsearch -x -h localhost -p 34208 -D\n> \"uid=ams,ou=People,o=airius.com\" -w Secret123 -b \"o=airius.com\" | more\n> # extended LDIF\n> #\n> # LDAPv3\n> # base <o=airius.com> with scope subtree\n> # filter: (objectclass=*)\n> # requesting: ALL\n> #\n> \n> # airius.com\n> dn: o=airius.com\n> objectClass: top\n> objectClass: organization\n> o: airius.com\n> \n> # Groups, airius.com\n> dn: ou=Groups,o=airius.com\n> objectClass: top\n> objectClass: organizationalunit\n> ou: Groups\n> \n> # Directory Administrators, Groups, airius.com\n> dn: cn=Directory Administrators,ou=Groups,o=airius.com\n> cn: Directory Administrators\n> objectClass: top\n> objectClass: groupofuniquenames\n> ou: Groups\n> uniqueMember: uid=kvaughan,ou=People,o=airius.com\n> uniqueMember: uid=rdaugherty,ou=People,o=airius.com\n> uniqueMember: uid=hmiller,ou=People,o=airius.com\n> \n> # People, airius.com\n\nOk.  Either 34208 (C2PORT) is chained with correct configuration, or else the operation is going against its local database.  This looks correct.\n\n> \n> Also, I observed :\n> [root@snmaptest ~]# ldapadd -x -h localhost -p 34206 -D\n> \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\n> > dn: uid=sghai1,ou=People,o=airius.com\n> > cn: sghai11\n> > sn: sghai11\n> > objectClass: top\n> > objectClass: person\n> > objectClass: inetOrgPerson\n> > uid: sghai11\n> > mail: s1@airius.com\n> > telephoneNumber: +1 408 555 1221\n> > EOF\n> adding new entry \"uid=sghai1,ou=People,o=airius.com\"\n> ldap_add: Insufficient access (50)\n>  additional info: database configuration error - please contact the system\n> administrator\n\nThis looks correct.  34206 (C1PORT) has the bogus multiplexor password.\n\n> \n> [root@snmaptest ~]# ldapadd -x -h localhost -p 34202 -D\n> \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\n> dn: uid=sghai1,ou=People,o=airius.com\n> cn: sghai11\n> sn: sghai11\n> objectClass: top\n> objectClass: person\n> objectClass: inetOrgPerson\n> uid: sghai11\n> mail: s1@airius.com\n> telephoneNumber: +1 408 555 1221\n> EOF\n> \n> adding new entry \"uid=sghai1,ou=People,o=airius.com\"\n\nThis looks correct - 34202 (S1PORT) is a master.\n> \n> [root@snmaptest ~]# ldapadd -x -h localhost -p 34206 -D\n> \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\n> dn: uid=sghai11,ou=People,o=airius.com\n> cn: sghai111\n> sn: sghai111\n> objectClass: top\n> objectClass: person\n> objectClass: inetOrgPerson\n> uid: sghai111\n> mail: s1@airius.com\n> telephoneNumber: +1 408 555 1221\n> EOF\n> \n> adding new entry \"uid=sghai11,ou=People,o=airius.com\"\n> ldap_add: Insufficient access (50)\n>  additional info: database configuration error - please contact the system\n> administrator\n\nThis looks correct.  34206 (C1PORT) has the bogus multiplexor password.\n\n> \n> [root@snmaptest ~]# ldapadd -x -h localhost -p 34204 -D\n> \"uid=ams,ou=People,o=airius.com\" -w Secret123 << EOF\n> dn: uid=sghai11,ou=People,o=airius.com\n> cn: sghai111\n> sn: sghai111\n> objectClass: top\n> objectClass: person\n> objectClass: inetOrgPerson\n> uid: sghai111\n> mail: s1@airius.com\n> telephoneNumber: +1 408 555 1221\n> EOF\n> \n> adding new entry \"uid=sghai11,ou=People,o=airius.com\"\n\nThis looks correct - 34204 (S2PORT) is a master.\n\n> \n> \n> Please guide."
					},
					{
						"isprivate": "0",
						"commentid": "4028964",
						"comment_count": "13",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-09-20 08:07:11 +0000",
						"thetext": "Ok, then I am marking this bug as VERIFIED."
					},
					{
						"isprivate": "0",
						"commentid": "4073469",
						"comment_count": "14",
						"who": {
							"text": "gerhardus.geldenhuis",
							"name": "Gerhardus Geldenhuis"
						},
						"bug_when": "2011-10-11 11:26:57 +0000",
						"thetext": "Why on earth is this bug/enhancement marked as \"VERIFIED\" if it have already been confirmed and a patch released? It seems a lot of duplication of effort for no gain."
					},
					{
						"isprivate": "0",
						"commentid": "4077709",
						"comment_count": "15",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-10-12 14:52:11 +0000",
						"thetext": "(In reply to comment #14)\n> Why on earth is this bug/enhancement marked as \"VERIFIED\" if it have already\n> been confirmed and a patch released? It seems a lot of duplication of effort\n> for no gain.\n\nOur internal QE organization has to perform their own verification (for most bugs) for the RHEL version of 389-ds-base.  It may seem like wasted effort, but the only way we can be sure to support the paying RHEL customers is if we can reproduce the bug in house and verify that the bug fixes the problem."
					}
				]
			}
		},
		{
			"bug_id": 656390,
			"title": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
			"bugzilla": {
				"bug_id": "656390",
				"alias": "389_1.2.8",
				"creation_ts": "2010-11-23 16:17:56 +0000",
				"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
				"delta_ts": "2015-01-04 23:44:59 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"depends_on": [
					"182507",
					"197886",
					"201652",
					"252249",
					"430321",
					"450016",
					"481195",
					"505722",
					"509897",
					"514190",
					"515329",
					"518890",
					"527912",
					"543633",
					"555577",
					"567282",
					"576534",
					"588480",
					"588791",
					"604881",
					"622907",
					"624485",
					"624547",
					"638511",
					"641944",
					"642046",
					"644784",
					"646381",
					"653007",
					"654054",
					"654057",
					"656734",
					"659131",
					"659776",
					"661102",
					"663191",
					"667935",
					"668385",
					"668862",
					"668909",
					"669205",
					"670616",
					"671033",
					"672313",
					"674430",
					"674852",
					"675113",
					"675265",
					"675320",
					"675853",
					"676053",
					"676407",
					"676655",
					"676666",
					"676689",
					"676729",
					"676733",
					"677440",
					"677464",
					"677465",
					"677467",
					"677483",
					"677705",
					"677774",
					"678369",
					"678646",
					"679542",
					"679978",
					"680284",
					"680305",
					"680555",
					"680558",
					"681015",
					"681332",
					"681351",
					"681379",
					"681550",
					"681611",
					"681720",
					"681726",
					"683250",
					"684349",
					"684996",
					"689866",
					"689889",
					"689952",
					"690526",
					"690955",
					"691486",
					"692331",
					"692937",
					"692991",
					"693451",
					"693455",
					"693466",
					"693473",
					"693503",
					"693516",
					"693519",
					"693520",
					"693522",
					"693523",
					"693597",
					"693598",
					"693868",
					"693962",
					"694927",
					"695779",
					"696407",
					"700145",
					"701057"
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3369423",
						"comment_count": "0",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2010-11-23 16:17:56 +0000",
						"thetext": "Tracking bug for 389 1.2.8 release."
					}
				]
			}
		},
		{
			"bug_id": 666076,
			"title": "dirsrv crash (1.2.7.5) with multiple simple paged result searches",
			"bugzilla": {
				"bug_id": "666076",
				"creation_ts": "2010-12-28 20:13:56 +0000",
				"short_desc": "dirsrv crash (1.2.7.5) with multiple simple paged result searches",
				"delta_ts": "2015-01-04 23:45:26 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "670914",
						"alias": "CVE-2011-0019",
						"creation_ts": "2011-01-19 16:41:59 +0000",
						"short_desc": "CVE-2011-0019 Directory Server: crash with multiple simple paged result searches",
						"delta_ts": "2019-09-29 12:42:02 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "Security",
						"priority": "medium",
						"bug_severity": "medium",
						"depends_on": [
							"666076",
							"670922",
							"679495"
						],
						"external_bugs": {
							"text": "RHSA-2011:0293",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3488597",
								"comment_count": "0",
								"who": {
									"text": "vdanen",
									"name": "Vincent Danen"
								},
								"bug_when": "2011-01-19 16:41:59 +0000",
								"thetext": "A flaw was found in the way that the Red Hat Directory Server handled simple paged result searches.  If an unauthenticated user were able to send multiple simple paged search requests to Directory Server, it could cause the server to crash."
							},
							{
								"isprivate": "0",
								"commentid": "3488604",
								"comment_count": "1",
								"who": {
									"text": "vdanen",
									"name": "Vincent Danen"
								},
								"bug_when": "2011-01-19 16:43:48 +0000",
								"thetext": "The 'upstream' bug is bug #666076."
							},
							{
								"isprivate": "0",
								"commentid": "3553285",
								"comment_count": "5",
								"who": {
									"text": "jlieskov",
									"name": "Jan Lieskovsky"
								},
								"bug_when": "2011-02-22 17:08:18 +0000",
								"thetext": "Upstream bug report:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=666076"
							},
							{
								"isprivate": "0",
								"commentid": "3553414",
								"comment_count": "6",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-02-22 17:46:06 +0000",
								"thetext": "This issue has been addressed in following products:\n\n  Red Hat Directory Server 8 for RHEL 4\n  Red Hat Directory Server 8 for RHEL 5\n\nVia RHSA-2011:0293 https://rhn.redhat.com/errata/RHSA-2011-0293.html"
							}
						]
					},
					{
						"bug_id": "679495",
						"creation_ts": "2011-02-22 18:07:42 +0000",
						"short_desc": "dirsrv crash (1.2.7.5) with multiple simple paged result searches",
						"delta_ts": "2015-01-04 23:46:36 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"666076"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "670914",
								"alias": "CVE-2011-0019",
								"creation_ts": "2011-01-19 16:41:59 +0000",
								"short_desc": "CVE-2011-0019 Directory Server: crash with multiple simple paged result searches",
								"delta_ts": "2019-09-29 12:42:02 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "Security",
								"priority": "medium",
								"bug_severity": "medium",
								"depends_on": [
									"666076",
									"670922",
									"679495"
								],
								"external_bugs": {
									"text": "RHSA-2011:0293",
									"name": "Red Hat Product Errata"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3488597",
										"comment_count": "0",
										"who": {
											"text": "vdanen",
											"name": "Vincent Danen"
										},
										"bug_when": "2011-01-19 16:41:59 +0000",
										"thetext": "A flaw was found in the way that the Red Hat Directory Server handled simple paged result searches.  If an unauthenticated user were able to send multiple simple paged search requests to Directory Server, it could cause the server to crash."
									},
									{
										"isprivate": "0",
										"commentid": "3488604",
										"comment_count": "1",
										"who": {
											"text": "vdanen",
											"name": "Vincent Danen"
										},
										"bug_when": "2011-01-19 16:43:48 +0000",
										"thetext": "The 'upstream' bug is bug #666076."
									},
									{
										"isprivate": "0",
										"commentid": "3553285",
										"comment_count": "5",
										"who": {
											"text": "jlieskov",
											"name": "Jan Lieskovsky"
										},
										"bug_when": "2011-02-22 17:08:18 +0000",
										"thetext": "Upstream bug report:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=666076"
									},
									{
										"isprivate": "0",
										"commentid": "3553414",
										"comment_count": "6",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2011-02-22 17:46:06 +0000",
										"thetext": "This issue has been addressed in following products:\n\n  Red Hat Directory Server 8 for RHEL 4\n  Red Hat Directory Server 8 for RHEL 5\n\nVia RHSA-2011:0293 https://rhn.redhat.com/errata/RHSA-2011-0293.html"
									}
								]
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3706587",
								"comment_count": "3",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-04-29 14:05:29 +0000",
								"thetext": "Hi Rich,\n\nPlease help me with the Verification steps.\n\nThanks,\nAmita"
							},
							{
								"isprivate": "0",
								"commentid": "3706626",
								"comment_count": "4",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-04-29 14:18:32 +0000",
								"thetext": "Sankar verified it with 8.2:\nhttps://bugzilla.redhat.com/show_bug.cgi?id=666076#c36\ncan you ask him what he did to verify?"
							},
							{
								"isprivate": "0",
								"commentid": "3709960",
								"comment_count": "5",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-05-02 14:30:49 +0000",
								"thetext": "Verified by Sankarr."
							},
							{
								"isprivate": "0",
								"commentid": "3744609",
								"comment_count": "6",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:57 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"external_bugs": {
					"text": "RHSA-2011:0293",
					"name": "Red Hat Product Errata"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3446083",
						"comment_count": "0",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2010-12-28 20:13:56 +0000",
						"thetext": "Created attachment 470999\nfull backtrace\n\nDescription of problem:\nslapd crashed\n\nVersion-Release number of selected component (if applicable):\n1.2.7.5-1.el5 (x86_64)\n\nHow reproducible:\njust once so far (but has happened on earlier versions)\n\nSteps to Reproduce:\n1. run slapd\n2. wait a day, a week\n3. panic\n\nAdditional info:\nHere's a short backtrace and full backtrace (attached).  May well be a dupe of 656734, but I thought it might be easier to raise separately and merge if needs be rather than put it in and find that was wrong.\n\nAn automated upgrade (now disabled) upgraded us from 1.2.7.1 to 1.2.7.4 which caused us major problems due to the memory leak.  I had to revert to 1.2.7.1 and we did see a few crashes, I've now upgraded to 1.2.7.5 (hoping that perhaps it was some incompatibility between 1.2.7.1 and data touched by 1.2.7.4) however it's just crashed.\n\nI do wonder if we need to rebuild the indexes, I've also not run a dbverify yet.\n\nProgram terminated with signal 6, Aborted.\n#0  0x00000032a2630265 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00000032a2630265 in raise () from /lib64/libc.so.6\n#1  0x00000032a2631d10 in abort () from /lib64/libc.so.6\n#2  0x00000032a266a84b in __libc_message () from /lib64/libc.so.6\n#3  0x00000032a267230f in _int_free () from /lib64/libc.so.6\n#4  0x00000032a267276b in free () from /lib64/libc.so.6\n#5  0x00002b712ae57af6 in slapi_ch_free (ptr=0x4cdddcf0)\n    at ldap/servers/slapd/ch_malloc.c:363\n#6  0x00002b712e93ba65 in idl_free (idl=0x2aaab1b29060)\n    at ldap/servers/slapd/back-ldbm/idl_common.c:94\n#7  0x00002b712e963e2e in delete_search_result_set (sr=0x4cdddd80)\n    at ldap/servers/slapd/back-ldbm/ldbm_search.c:1490\n#8  0x00002b712e9640e8 in ldbm_back_next_search_entry_ext (\n    pb=0x2aaaad28aef0, use_extension=0)\n    at ldap/servers/slapd/back-ldbm/ldbm_search.c:1236\n#9  0x00002b712ae8fe21 in iterate (pb=0x2aaaad28aef0, be=0x101cf270, \n    send_result=1, pnentries=0x4cde06a4, pagesize=500, \n    pr_statp=0x4cde0698) at ldap/servers/slapd/opshared.c:1130\n#10 0x00002b712ae90352 in send_results_ext (pb=0x2aaaad28aef0, \n    send_result=1, nentries=0x4cde06a4, pagesize=500, \n    pr_stat=0x4cde0698) at ldap/servers/slapd/opshared.c:1515\n#11 0x00002b712ae90c9d in op_shared_search (pb=0x2aaaad28aef0, \n    send_result=1) at ldap/servers/slapd/opshared.c:591\n#12 0x000000000042513f in do_search (pb=0x2aaaad28aef0)\n---Type <return> to continue, or q <return> to quit---\n    at ldap/servers/slapd/search.c:381\n#13 0x00000000004135ee in connection_threadmain ()\n    at ldap/servers/slapd/connection.c:597\n#14 0x00000032a4a284ad in ?? () from /usr/lib64/libnspr4.so\n#15 0x00000032a2e0673d in start_thread () from /lib64/libpthread.so.0\n#16 0x00000032a26d3f6d in clone () from /lib64/libc.so.6"
					},
					{
						"isprivate": "0",
						"commentid": "3456597",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-05 23:48:59 +0000",
						"thetext": "The search is running into the lookthrough limit and exiting early.  I suppose you could work around the problem by increasing your lookthrough limit.  I was unable to reproduce by simply making a search hit the limit.  The stack trace sure looks like it is doing a free of already freed memory or perhaps uninitialized memory.  Looking at the code, I don't know where this could happen.\n\nHow many entries should be returned from the search?  That is, how many match\nbase dc=public,dc=people,dc=ds,dc=example,dc=com\nscope subtree\nfilter (&(objectClass=inetOrgPerson)(memberOf=*Enterprise*))\n?\n\nIf you can reproduce it easily, would you be able to run valgrind on this server to get more detailed memory access debugging?  It will slow the server somewhat."
					},
					{
						"isprivate": "0",
						"commentid": "3457061",
						"comment_count": "3",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-06 08:56:10 +0000",
						"thetext": "Hi Rich, thanks for looking at this.  We are going to perform a nice big cleanup of LDAP in the not-too-distant future since it's not setup very well ATM.  Currently there are 3443 entries returned by the query (a plain ldapsearch is showing success - shouldn't it be reporting that it hit lookthrough limit?)\n\nOddly we also have this set in the DB (would it be useful to attach dse.ldif or a dump of cn=config?):\ndn: cn=config,cn=ldbm database,cn=plugins,cn=config\nnsslapd-lookthroughlimit: -1\n\nUnder dc=public,dc=people,dc=ds,dc=example,dc=com there are 97617 entries (post-cleanup this will drop probably to those 3443 entries and not much else).\n\nWe do have scripts which sync other systems to LDAP (as well as syncing other systems from LDAP).  One thing I've seen those (legacy) scripts do is update all the attributes (even if they are _already_ set to the correct value) - so there are likely to be lots of updates happening from time to time.\n\nWe definitely couldn't run valgrind on this box, it's pushed quite hard as it is.  I can look at running it on a separate test box and I could run half of those update scripts (the ones that update LDAP - I couldn't run the ones that update other systems from LDAP as we don't have a full test environment yet).\n\nIt's currently falling over about every two days, looking at exactly when:\n[root@ds2 core]# ls -l\ntotal 687192\n-rw------- 1 root nobody 623874048 Jan  6 02:24 core.ns-slapd.99.12161.6.1294280650\n-rw------- 1 root nobody 563785728 Jan  4 02:14 core.ns-slapd.99.21142.11.1294107249\n-rw------- 1 root nobody 615436288 Jan  3 15:24 core.ns-slapd.99.22195.6.1294068249\n-rw------- 1 root nobody 562569216 Jan  3 19:24 core.ns-slapd.99.2607.11.1294082649\n[root@ds2 core]# rm core.ns-slapd.99.2607.11.1294082649 core.ns-slapd.99.22195.6\n\nSadly there's nothing in the update script logs to reveal what might be the trigger."
					},
					{
						"isprivate": "0",
						"commentid": "3457832",
						"comment_count": "4",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-06 15:46:54 +0000",
						"thetext": "(In reply to comment #3)\n> Hi Rich, thanks for looking at this.  We are going to perform a nice big\n> cleanup of LDAP in the not-too-distant future since it's not setup very well\n> ATM.  Currently there are 3443 entries returned by the query (a plain\n> ldapsearch is showing success - shouldn't it be reporting that it hit\n> lookthrough limit?)\n\nIt depends on what you mean by \"plain ldapsearch\".  The search filter is the critical factor in determining when the lookthrough limit is hit.  If by \"plain\" you mean \"running ldapsearch without specifying a search filter\" then the default search filter of \"objectclass=*\" is used.  Are you running the search as directory manager or a regular user?  lookthrough limit does not apply to directory manager.\n\n> \n> Oddly we also have this set in the DB (would it be useful to attach dse.ldif or\n> a dump of cn=config?):\n> dn: cn=config,cn=ldbm database,cn=plugins,cn=config\n> nsslapd-lookthroughlimit: -1\n\nThis means to use the default value of lookthrough limit which is 5000.\n \n> Under dc=public,dc=people,dc=ds,dc=example,dc=com there are 97617 entries\n> (post-cleanup this will drop probably to those 3443 entries and not much else).\n\nSo because of the search filter\n(&(objectClass=inetOrgPerson)(memberOf=*Enterprise*))\nit has to look through all (or at least more than 5000) of the 97617 entries to find a match.\n\n> \n> We do have scripts which sync other systems to LDAP (as well as syncing other\n> systems from LDAP).  One thing I've seen those (legacy) scripts do is update\n> all the attributes (even if they are _already_ set to the correct value) - so\n> there are likely to be lots of updates happening from time to time.\n\nCan you paste excerpts from your directory server access log from around the time of the crash?  We can try to see if there are other operations happening at the time of the search.  The core dump did not show any operations other than the search request.  The access log is buffered by default for performance reasons, so it may be that what we are looking for was not written to disk before the crash.  You can turn off access log buffering, but that will also impact performance somewhat.\n\nhttp://docs.redhat.com/docs/en-US/Red_Hat_Directory_Server/8.2/html/Configuration_and_Command-Line_Tool_Reference/Core_Server_Configuration_Reference.html#cnconfig-nsslapd_accesslog_logbuffering_Log_Buffering\n\nand see also\n\nhttp://docs.redhat.com/docs/en-US/Red_Hat_Directory_Server/8.2/html-single/Administration_Guide/index.html#using-named-pipe\n\n> \n> We definitely couldn't run valgrind on this box, it's pushed quite hard as it\n> is.  I can look at running it on a separate test box and I could run half of\n> those update scripts (the ones that update LDAP - I couldn't run the ones that\n> update other systems from LDAP as we don't have a full test environment yet).\n> \n> It's currently falling over about every two days, looking at exactly when:\n> [root@ds2 core]# ls -l\n> total 687192\n> -rw------- 1 root nobody 623874048 Jan  6 02:24\n> core.ns-slapd.99.12161.6.1294280650\n> -rw------- 1 root nobody 563785728 Jan  4 02:14\n> core.ns-slapd.99.21142.11.1294107249\n> -rw------- 1 root nobody 615436288 Jan  3 15:24\n> core.ns-slapd.99.22195.6.1294068249\n> -rw------- 1 root nobody 562569216 Jan  3 19:24\n> core.ns-slapd.99.2607.11.1294082649\n> [root@ds2 core]# rm core.ns-slapd.99.2607.11.1294082649\n> core.ns-slapd.99.22195.6\n> \n> Sadly there's nothing in the update script logs to reveal what might be the\n> trigger.\n\nThe directory server access log (sans buffering) could tell us what's going on.\n\nDo all of these cores have the same thread stack traces?  If you like, you can attach the full stack traces from all of these cores to this bug."
					},
					{
						"isprivate": "0",
						"commentid": "3458145",
						"comment_count": "5",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-06 17:50:31 +0000",
						"thetext": "I'm was running ldapsearch without any filters, not as the directory owner but I an in the ldap administrators group.  \n\nThanks for the note about lookthroughlimit - I'm very surprised that's not biting us elsewhere.  Annoyingly I even have a comment that says \"-1 = unlimited\" so it's as if I've read it somewhere but apparently not. \n\nI looked at two or three stack traces and they looked identical.  I'll go through the access logs next time it crashes.  I have a small script I used last time to figure out what was \"in flight\" at the time of the crash.   If nothing shows up I'll turn buffering off and keep a close eye on it!\n\nThanks"
					},
					{
						"isprivate": "0",
						"commentid": "3458683",
						"comment_count": "6",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-06 22:10:28 +0000",
						"thetext": "(In reply to comment #5)\n> I'm was running ldapsearch without any filters, not as the directory owner but\n> I an in the ldap administrators group.  \n\nOk.  So lookthrough limit will apply in that case.\n\n> Thanks for the note about lookthroughlimit - I'm very surprised that's not\n> biting us elsewhere.  Annoyingly I even have a comment that says \"-1 =\n> unlimited\" so it's as if I've read it somewhere but apparently not. \n> \n> I looked at two or three stack traces and they looked identical.  I'll go\n> through the access logs next time it crashes.  I have a small script I used\n> last time to figure out what was \"in flight\" at the time of the crash.   If\n> nothing shows up I'll turn buffering off and keep a close eye on it!\n\nThanks.\n\n> \n> Thanks"
					},
					{
						"isprivate": "0",
						"commentid": "3461795",
						"comment_count": "7",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-07 16:27:56 +0000",
						"thetext": "Incidentally I found where I'd got the -1=unlimited from - it's here (4.4.1.1)\n\nnsLookthroughLimit cn=config,cn=ldbm database,cn=plugins,cn=config\n-1 to maximum 32-bit integer in entries (where -1 is unlimited) (default=5000)\n\nhttp://docs.redhat.com/docs/en-US/Red_Hat_Directory_Server/8.2/html/Configuration_and_Command-Line_Tool_Reference/Database_Plug_in_Attributes.html\n\nnsslapd-lookthroughlimit seems to be only in RHDS 7.1.\n\nIt's just crashed, the restart script is taking a copy of access now:\n$ grep err access.apb |grep -v err=0\n[07/Jan/2011:14:58:55 +0000] conn=42065 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:55 +0000] conn=42066 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42070 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42071 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42072 op=0 RESULT err=49 tag=97 nentries=0 etime=0\n\n\nin order:\n[07/Jan/2011:14:58:55 +0000] conn=42065 fd=152 slot=152 connection from 94.229.175.69 to 94.229.175.61\n[07/Jan/2011:14:58:55 +0000] conn=42065 op=0 BIND dn=\"uid=letuan,dc=staff,dc=people,dc=ds,dc=example,dc=com\" method=128 version=3\n[07/Jan/2011:14:58:55 +0000] conn=42065 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:55 +0000] conn=42065 op=-1 fd=152 closed - B1\n\n[07/Jan/2011:14:58:55 +0000] conn=42066 fd=152 slot=152 connection from 94.229.175.69 to 94.229.175.61\n[07/Jan/2011:14:58:55 +0000] conn=42066 op=0 BIND dn=\"uid=letuan,dc=vendor,dc=people,dc=ds,dc=example,dc=com\" method=128 version=3\n[07/Jan/2011:14:58:55 +0000] conn=42066 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:55 +0000] conn=42066 op=-1 fd=152 closed - B1\n\n[07/Jan/2011:14:58:56 +0000] conn=42070 fd=152 slot=152 connection from 94.229.175.69 to 94.229.175.61\n[07/Jan/2011:14:58:56 +0000] conn=42070 op=0 BIND dn=\"uid=sumerjabri,dc=staff,dc=people,dc=ds,dc=example,dc=com\" method=128 version=3\n[07/Jan/2011:14:58:56 +0000] conn=42070 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42070 op=-1 fd=152 closed - B1\n\n[07/Jan/2011:14:58:56 +0000] conn=42071 fd=161 slot=161 connection from 94.229.175.69 to 94.229.175.61\n[07/Jan/2011:14:58:56 +0000] conn=42071 op=0 BIND dn=\"uid=sumerjabri,dc=vendor,dc=people,dc=ds,dc=example,dc=com\" method=128 version=3\n[07/Jan/2011:14:58:56 +0000] conn=42071 op=0 RESULT err=32 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42071 op=-1 fd=161 closed - B1\n\n[07/Jan/2011:14:58:56 +0000] conn=42072 fd=167 slot=167 connection from 94.229.175.69 to 94.229.175.61\n[07/Jan/2011:14:58:56 +0000] conn=42072 op=0 BIND dn=\"uid=sumerjabri,dc=public,dc=people,dc=ds,dc=example,dc=com\" method=128 version=3\n[07/Jan/2011:14:58:56 +0000] conn=42072 op=0 RESULT err=49 tag=97 nentries=0 etime=0\n[07/Jan/2011:14:58:56 +0000] conn=42072 op=-1 fd=167 closed - B1\n\nI've also run my script which prints out all in-flight connections and nothing shows up there.  Looks like I'll have to turn log buffering off.\n\nshort backtrace looks the same:\nProgram terminated with signal 6, Aborted.\n#0  0x00000032a2630265 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00000032a2630265 in raise () from /lib64/libc.so.6\n#1  0x00000032a2631d10 in abort () from /lib64/libc.so.6\n#2  0x00000032a266a84b in __libc_message () from /lib64/libc.so.6\n#3  0x00000032a267230f in _int_free () from /lib64/libc.so.6\n#4  0x00000032a267276b in free () from /lib64/libc.so.6\n#5  0x00002b708b120af6 in slapi_ch_free (ptr=0x490b7cf0)\n    at ldap/servers/slapd/ch_malloc.c:363\n#6  0x00002b708ec04a65 in idl_free (idl=0x6363c50)\n    at ldap/servers/slapd/back-ldbm/idl_common.c:94\n#7  0x00002b708ec2ce2e in delete_search_result_set (sr=0x490b7d80)\n    at ldap/servers/slapd/back-ldbm/ldbm_search.c:1490\n#8  0x00002b708ec2d0e8 in ldbm_back_next_search_entry_ext (pb=0x2aaab12f9540, \n    use_extension=0) at ldap/servers/slapd/back-ldbm/ldbm_search.c:1236\n#9  0x00002b708b158e21 in iterate (pb=0x2aaab12f9540, be=0x3bfb1c0, \n    send_result=1, pnentries=0x490ba6a4, pagesize=500, pr_statp=0x490ba698)\n    at ldap/servers/slapd/opshared.c:1130\n#10 0x00002b708b159352 in send_results_ext (pb=0x2aaab12f9540, send_result=1, \n    nentries=0x490ba6a4, pagesize=500, pr_stat=0x490ba698)\n    at ldap/servers/slapd/opshared.c:1515\n#11 0x00002b708b159c9d in op_shared_search (pb=0x2aaab12f9540, send_result=1)\n    at ldap/servers/slapd/opshared.c:591\n#12 0x000000000042513f in do_search (pb=0x2aaab12f9540)\n    at ldap/servers/slapd/search.c:381\n---Type <return> to continue, or q <return> to quit---\n#13 0x00000000004135ee in connection_threadmain ()\n    at ldap/servers/slapd/connection.c:597\n#14 0x00000032a4a284ad in ?? () from /usr/lib64/libnspr4.so\n#15 0x00000032a2e0673d in start_thread () from /lib64/libpthread.so.0\n#16 0x00000032a26d3f6d in clone () from /lib64/libc.so.6"
					},
					{
						"isprivate": "0",
						"commentid": "3461810",
						"comment_count": "8",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-07 16:33:18 +0000",
						"thetext": "Meh, I forgot to paste in the error log for that latest crash:\n\n[07/Jan/2011:14:44:10 +0000] - get_ldapmessage_controls failed: 12 (Unavailable \ncritical extension) (op=Abandon)\n[07/Jan/2011:14:49:10 +0000] - get_ldapmessage_controls failed: 12 (Unavailable \ncritical extension) (op=Abandon)\n[07/Jan/2011:14:59:11 +0000] - PR_Write(154) Netscape Portable Runtime error -59\n61 (TCP connection reset by peer.)\n        389-Directory/1.2.7.5 B2010.350.198\n        ds2.man.alfresco.com:636 (/etc/dirsrv/slapd-ds2)\n\n[07/Jan/2011:14:59:13 +0000] - 389-Directory/1.2.7.5 B2010.350.198 starting up\n[07/Jan/2011:14:59:13 +0000] - Detected Disorderly Shutdown last time Directory \nServer was running, recovering database.\n\n\nhttp://markmail.org/message/jyi43y7q2iuo6f7m suggests that the critical extension error would not be responsible for the crash though.  That PR_Write error I've not seen in earlier logs either."
					},
					{
						"isprivate": "0",
						"commentid": "3462406",
						"comment_count": "9",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-07 21:48:26 +0000",
						"thetext": "looks like the crash is caused by a simple paged results search.  That's a good clue.\n\nThe stuff from the access log isn't much help - we know the crash is occurring due to a search request, not a bind request.\n\nI think you've done enough for now, thanks.  I'll try to reproduce using a simple paged search.  I'll let you know if I need any more information."
					},
					{
						"isprivate": "0",
						"commentid": "3465856",
						"comment_count": "10",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-11 01:33:40 +0000",
						"thetext": "I am still unable to reproduce the circumstances of the crash.  I am very puzzled about this from the original full stack trace:\n\n#8  0x00002b712e9640e8 in ldbm_back_next_search_entry_ext (\n    pb=0x2aaaad28aef0, use_extension=0)\n    at ldap/servers/slapd/back-ldbm/ldbm_search.c:1236\n        be = 0x101cf270\n        inst = 0x10247fb0\n        li = 0x10141ea0\n        scope = 2\n        managedsait = 0\n        attr = 0x0\n        filter = 0x2aaaacb61280\n        base = 0x2aaaac485830 \"dc=public,dc=people,dc=ds,dc=example,dc=com\"\n        sr = 0x2aaab0c15780\n        id = <value optimized out>\n        e = 0x2aaaad0555a0\n        nentries = 348\n        curtime = <value optimized out>\n        stoptime = 1293565146\n        optime = 1293561546\n        tlimit = 3600\n        llimit = -1\n        slimit = 997648\n        isroot = 0\n        urls = 0x0\n        err = 0\n        basesdn = {flag = 0 '\\000', \n          dn = 0x2aaaac485830 \"dc=public,dc=people,dc=ds,dc=example,dc=com\", \n          ndn = 0x2aaaac485830 \"dc=public,dc=people,dc=ds,dc=example,dc=com\", ndn_len = 44}\n        target_uniqueid = 0x0\n        rc = -1\n        estimate = 0\n\nThis is from ldbm_search.c:1236 in the 1.2.7.5 code:\n        /* check lookthrough limit */\n        if ( llimit != -1 && sr->sr_lookthroughcount >= llimit )\n        {\n            slapi_send_ldap_result( pb, LDAP_ADMINLIMIT_EXCEEDED, NULL, NULL, nentries, urls );\n            /* in case paged results, clean up the conn */\n            pagedresults_set_search_result(pb->pb_conn, NULL);\n            slapi_pblock_set( pb, SLAPI_SEARCH_RESULT_SET, NULL );\n            slapi_pblock_set( pb, SLAPI_SEARCH_RESULT_SET_SIZE_ESTIMATE, &estimate );\n            if ( use_extension ) {\n                slapi_pblock_set( pb, SLAPI_SEARCH_RESULT_ENTRY_EXT, NULL );\n            } \n            slapi_pblock_set( pb, SLAPI_SEARCH_RESULT_ENTRY, NULL );\n**** line 1236            delete_search_result_set( &sr );\n            rc = SLAPI_FAIL_GENERAL;\n            goto bail;\n        }\n\nNote that in the stack trace, llimit is -1 - since llimit == -1, the if condition should be FALSE, and this block of code should never be entered.  So, one of two things:\n1) this is not really 1.2.7.5 - can you confirm with\n /usr/sbin/ns-slapd -V\n2) the stack is being corrupted\n\nCould you post a full stack trace from one of the other core dumps?\nWhat is your sizelimit?"
					},
					{
						"isprivate": "0",
						"commentid": "3466243",
						"comment_count": "11",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-11 08:35:01 +0000",
						"thetext": "Sure:\n\n/usr/sbin/ns-slapd -v\n389 Project\n389-Directory/1.2.7.5 B2010.350.198\n\nHmm, the most recent one is different - I'll attach the full version (different backtrace), the short form is:\n\n(gdb) bt\n#0  0x00002aabb7ff83c7 in cache_return (cache=0x1ad5d28, ptr=0x39043b0)\n    at ldap/servers/slapd/back-ldbm/cache.c:1027\n#1  0x00002aabb8034455 in ldbm_back_next_search_entry_ext (pb=0x2aaaad365350, \n    use_extension=0) at ldap/servers/slapd/back-ldbm/ldbm_search.c:1171\n#2  0x00002aabb455fe21 in iterate (pb=0x2aaaad365350, be=0x1ad71c0, \n    send_result=1, pnentries=0x52ebe6a4, pagesize=500, pr_statp=0x52ebe698)\n    at ldap/servers/slapd/opshared.c:1130\n#3  0x00002aabb4560352 in send_results_ext (pb=0x2aaaad365350, send_result=1, \n    nentries=0x52ebe6a4, pagesize=500, pr_stat=0x52ebe698)\n    at ldap/servers/slapd/opshared.c:1515\n#4  0x00002aabb4560c9d in op_shared_search (pb=0x2aaaad365350, send_result=1)\n    at ldap/servers/slapd/opshared.c:591\n#5  0x000000000042513f in do_search (pb=0x2aaaad365350)\n    at ldap/servers/slapd/search.c:381\n#6  0x00000000004135ee in connection_threadmain ()\n    at ldap/servers/slapd/connection.c:597\n#7  0x00000032a4a284ad in ?? () from /usr/lib64/libnspr4.so\n#8  0x00000032a2e0673d in start_thread () from /lib64/libpthread.so.0\n#9  0x00000032a26d3f6d in clone () from /lib64/libc.so.6\n\nThe one before that is like the normal ones (I'll attach that as duplicate backtrace):\n\n(gdb) bt\n#0  0x00000032a2630265 in raise () from /lib64/libc.so.6\n#1  0x00000032a2631d10 in abort () from /lib64/libc.so.6\n#2  0x00000032a266a84b in __libc_message () from /lib64/libc.so.6\n#3  0x00000032a267230f in _int_free () from /lib64/libc.so.6\n#4  0x00000032a267276b in free () from /lib64/libc.so.6\n#5  0x00002af8c0d48af6 in slapi_ch_free (ptr=0x4e743d80)\n    at ldap/servers/slapd/ch_malloc.c:363\n#6  0x00002af8c48550e8 in ldbm_back_next_search_entry_ext (pb=0x2aaaada486a0, \n    use_extension=0) at ldap/servers/slapd/back-ldbm/ldbm_search.c:1236\n#7  0x00002af8c0d80e21 in iterate (pb=0x2aaaada486a0, be=0x2ebb1c0, \n    send_result=1, pnentries=0x4e7466a4, pagesize=500, pr_statp=0x4e746698)\n    at ldap/servers/slapd/opshared.c:1130\n#8  0x00002af8c0d81352 in send_results_ext (pb=0x2aaaada486a0, send_result=1, \n    nentries=0x4e7466a4, pagesize=500, pr_stat=0x4e746698)\n    at ldap/servers/slapd/opshared.c:1515\n#9  0x00002af8c0d81c9d in op_shared_search (pb=0x2aaaada486a0, send_result=1)\n    at ldap/servers/slapd/opshared.c:591\n#10 0x000000000042513f in do_search (pb=0x2aaaada486a0)\n    at ldap/servers/slapd/search.c:381\n#11 0x00000000004135ee in connection_threadmain ()\n    at ldap/servers/slapd/connection.c:597\n#12 0x00000032a4a284ad in ?? () from /usr/lib64/libnspr4.so\n#13 0x00000032a2e0673d in start_thread () from /lib64/libpthread.so.0\n---Type <return> to continue, or q <return> to quit---\n#14 0x00000032a26d3f6d in clone () from /lib64/libc.so.6"
					},
					{
						"isprivate": "0",
						"commentid": "3466246",
						"comment_count": "12",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-11 08:35:54 +0000",
						"thetext": "Created attachment 472754\ndifferent backtrace"
					},
					{
						"isprivate": "0",
						"commentid": "3466253",
						"comment_count": "13",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-11 08:38:08 +0000",
						"thetext": "Created attachment 472756\nduplicate backtrace"
					},
					{
						"isprivate": "0",
						"commentid": "3472641",
						"comment_count": "14",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-13 01:09:49 +0000",
						"thetext": "What client program is it that is generating these search requests?"
					},
					{
						"isprivate": "0",
						"commentid": "3474059",
						"comment_count": "15",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-13 10:55:50 +0000",
						"thetext": "There are a huge variety, to get a helpful answer I may well need to turn off log buffering so that I can catch the one that's triggering it.\n\nWe use quite a range I'm afraid:\n- RHEL5 boxes with LDAP authentication:\n-- nss_ldap-253-25.el5_5.3  (just chose one box out of many, they are all rhel5)\n- Java applications JDK 1.6 (Sun JNDI LDAP service provider)\n- apache using mod_auth*_ldap (RHEL5 httpd 2.2.3-43.el5_5.3)\n- bespoke perl code (Net::LDAP v0.39)\n- openldap client (ldapsearch)\n- apache directory studio"
					},
					{
						"isprivate": "0",
						"commentid": "3475375",
						"comment_count": "16",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-13 18:48:51 +0000",
						"thetext": "It has to be some application that can\n* open a connection\n* issue async operations on the connection\n* issue Simple Paged Search requests\n\nThat rules out nss_ldap, mod_auth_ldap, openldap client\n\nso, could be JNDI apps, Net::LDAP perl code, and apache directory studio\n\nI have been able to reproduce the crash by issuing multiple simultaneous Simple Paged Search requests on the same connection (using python-ldap).  I have also found a workaround - just set nsslapd-maxthreadsperconn: 1 in cn=config in your dse.ldif - you have to shutdown the server first before editing dse.ldif."
					},
					{
						"isprivate": "0",
						"commentid": "3482120",
						"comment_count": "17",
						"who": {
							"text": "adrian",
							"name": "Adrian Bridgett"
						},
						"bug_when": "2011-01-17 09:35:21 +0000",
						"thetext": "Thanks Rich, \n\nI made that change on Friday morning and it's not crashed since. I think the Net::LDAP perl is the most likely culprit TBH as it performs some (horribly inefficient - e.g. modifying attributes and setting them to their current values...) synchronisation from a bespoke system to LDAP. \n\nI'll keep an eye on it to see if it crashes but I thought you might appreciate confirmation that the workaround seems to be working here as well."
					},
					{
						"isprivate": "0",
						"commentid": "3486188",
						"comment_count": "18",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-18 16:54:20 +0000",
						"thetext": "Good to know the workaround works for you - thanks for the update.  Please let us know if you see any weird side effects from the use of the workaround."
					},
					{
						"isprivate": "0",
						"commentid": "3488397",
						"comment_count": "24",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-19 15:42:42 +0000",
						"thetext": "Created attachment 474301\npatch that applies to master\n\nThis patch applies to master"
					},
					{
						"isprivate": "0",
						"commentid": "3488399",
						"comment_count": "25",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-19 15:43:21 +0000",
						"thetext": "Created attachment 474302\npatch that applies to 8.2\n\nThis patch applies to 8.2"
					},
					{
						"isprivate": "0",
						"commentid": "3489261",
						"comment_count": "33",
						"who": {
							"text": "vdanen",
							"name": "Vincent Danen"
						},
						"bug_when": "2011-01-19 21:42:54 +0000",
						"thetext": "Adding Dmitry to the bug since ALT Linux ships 389."
					},
					{
						"isprivate": "0",
						"commentid": "3489266",
						"comment_count": "34",
						"who": {
							"text": "vdanen",
							"name": "Vincent Danen"
						},
						"bug_when": "2011-01-19 21:44:20 +0000",
						"thetext": "This issue has the name CVE-2011-0019."
					},
					{
						"isprivate": "0",
						"commentid": "3490861",
						"comment_count": "35",
						"who": {
							"text": "vdanen",
							"name": "Vincent Danen"
						},
						"bug_when": "2011-01-20 16:25:58 +0000",
						"thetext": "Adding Alex to the bug since Gentoo has started to ship 389 as well."
					},
					{
						"isprivate": "0",
						"commentid": "3553418",
						"comment_count": "37",
						"who": {
							"text": "errata-xmlrpc",
							"name": "errata-xmlrpc"
						},
						"bug_when": "2011-02-22 17:46:18 +0000",
						"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHSA-2011-0293.html"
					},
					{
						"isprivate": "0",
						"commentid": "3553466",
						"comment_count": "38",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-22 18:06:06 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   ce0dc22..a123b54  master -> master\ncommit a123b5466aae3eac4193451ac587d90ef1b61815\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Jan 13 13:44:15 2011 -0700\n    Fix Description: Only allow one simple paged results search per-connection\n    at a time.  The new function pagedresults_check_or_set_processing() will\n    check the flag in the connection to see if pagedresults processing is in\n    progress.  If so, the function will return True and the search will terminat\n    with LDAP_UNWILLING_TO_PERFORM (as per section 3 in RFC 2696, a server is\n    allowed to return unwillingToPerform if there is a limit to the number of\n    outstanding paged search requests from a given client).  The processing\n    flag will be reset once the search result has been sent to the client.\n    Since the problem is multiple threads in the same connection accessing\n    the pagedresults data, the workaround is to just set\n     nsslapd-maxthreadsperconn: 1\n    in cn=config in dse.ldif.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   1847a51..5d4895c  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit 5d4895c4d6a412476f4b831e1d0654931c3934f9\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Jan 13 13:44:15 2011 -0700"
					}
				]
			}
		},
		{
			"bug_id": 667935,
			"title": "DS pipe log script's logregex.py plugin is not redirecting the log output to the text file",
			"bugzilla": {
				"bug_id": "667935",
				"creation_ts": "2011-01-07 11:09:40 +0000",
				"short_desc": "DS pipe log script's logregex.py plugin is not redirecting the log output to the text file",
				"delta_ts": "2015-12-07 17:06:37 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3460187",
						"comment_count": "0",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-01-07 11:09:40 +0000",
						"thetext": "Description of problem: \n\nDS pipe log script failed to redirect the output to a text file when the logregex.py plugin is used. The output is getting redirected only after killing the process with \"kill $pid\" or \"Ctrl+C\".\n\nSteps to Reproduce:\n1. Configure access logs for named pipe. Set these access log attributes using ldapmodify.\n    nsslapd-accesslog-maxlogsperdir: 1\n    nsslapd-accesslog-logexpirationtime: -1\n    nsslapd-accesslog-logrotationtime: -1\n    nsslapd-accesslog: /var/log/dirsrv/slapd-$inst_name/access.pipe\n    nsslapd-accesslog-logbuffering: off\n \n2. Run the ds-logpipe.py script.\n    /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-inst/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n3. Run ldapsearch to search for unavailable entries. Ldapsearch should return error 32(no such object).\n4. Check the \"/tmp/test_acces\" file for log entries.\n  \nActual results:\n\nNo errors redirected to the output file.\n\nExpected results:\n\nerror messages should be logged into the redirected file.\n\nAdditional info:\n\nIt redirects the output to a file once the ds-logpipe.py process is killed."
					},
					{
						"isprivate": "0",
						"commentid": "3512894",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-01 15:09:42 +0000",
						"thetext": "Created attachment 476412\n0001-Bug-667935-DS-pipe-log-script-s-logregex.py-plugin-i.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3513384",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-01 17:06:31 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   68d53e3..3c2d82e  master -> master\ncommit 3c2d82e345522ae0eb349759a96b01e5efe9eff1\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Mon Jan 31 19:08:40 2011 -0700\n    Reviewed by: nkinder (Thanks!)\n    Branch: master\n    Fix Description: The logregex plugin function is really just a thin wrapper\n    around the builtin plugin - the only difference is that logregex will only\n    store those lines that match the given regexes.  The fix is to just remove\n    the post function, and make the plugin just call the main plugin function\n    with the line if it matches the regexes.  The only tricky part is that we\n    have to increment total lines in the logregex plugin and decrement it when\n    we call the main pluginfunction, in order to keep an accurate count of the\n    total number of lines read.  I also cleaned up an error message and made\n    the print out flush.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no"
					},
					{
						"isprivate": "0",
						"commentid": "3728061",
						"comment_count": "3",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-11 10:48:11 +0000",
						"thetext": "Steps to Reproduce:\n1. Configure access logs for named pipe. Set these access log attributes using\nldapmodify.\n\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog\nnsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access.pipe\n-\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-logbuffering\nnsslapd-accesslog-logbuffering: off\n-\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-maxlogsperdir\nnsslapd-accesslog-maxlogsperdir: 1\n- \nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-logexpirationtime\nnsslapd-accesslog-logexpirationtime: -1\n- \nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-logrotationtime\nnsslapd-accesslog-logrotationtime: -1\n\n\n2. Run the ds-logpipe.py script.\n    /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n\n3. Run ldapsearch to search for unavailable entries. Ldapsearch should return\nerror 32(no such object).\n\n[root@testvm yum.repos.d]# ldapsearch -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=xyz\"\n# extended LDIF\n#\n# LDAPv3\n# base <cn=xyz> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# search result\nsearch: 2\nresult: 32 No such object\n\n# numResponses: 1\n[root@testvm yum.repos.d]# ldapsearch -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=hello\"\n# extended LDIF\n#\n# LDAPv3\n# base <cn=hello> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# search result\nsearch: 2\nresult: 32 No such object\n\n# numResponses: 1\n[root@testvm yum.repos.d]# ldapsearch -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=bye\"\n# extended LDIF\n#\n# LDAPv3\n# base <cn=bye> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# search result\nsearch: 2\nresult: 32 No such object\n\n# numResponses: 1\n\n4. Check the \"/tmp/test_acces\" file for log entries.\n\nNo errors redirected to the output file.\n\nNote : now there is no output even after killing the process and control+c, \nIs it what is expected now after the fix?"
					},
					{
						"isprivate": "0",
						"commentid": "3728359",
						"comment_count": "4",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-11 13:16:30 +0000",
						"thetext": "(In reply to comment #3)\n> Steps to Reproduce:\n> 1. Configure access logs for named pipe. Set these access log attributes using\n> ldapmodify.\n> \n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-accesslog\n> nsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access.pipe\n> -\n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-accesslog-logbuffering\n> nsslapd-accesslog-logbuffering: off\n> -\n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-accesslog-maxlogsperdir\n> nsslapd-accesslog-maxlogsperdir: 1\n> - \n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-accesslog-logexpirationtime\n> nsslapd-accesslog-logexpirationtime: -1\n> - \n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-accesslog-logrotationtime\n> nsslapd-accesslog-logrotationtime: -1\n\nIt is better to do all of these modifications as a single ldapmodify command as described here - http://directory.fedoraproject.org/wiki/Named_Pipe_Log_Script#Directory_Server_Log_Configuration\n\n> \n> \n> 2. Run the ds-logpipe.py script.\n>     /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access.pipe\n> --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> /tmp/test_access &\n\nYou have to do this before you modify the server.  When you make this change:\n> replace: nsslapd-accesslog\n> nsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access.pipe\n\nIf access.pipe does not exist, the server will create it as a regular file, not a pipe (unless you have a step 0 mkfifo /var/log/dirsrv/slapd-testvm/access.pipe).\n\n> \n> 3. Run ldapsearch to search for unavailable entries. Ldapsearch should return\n> error 32(no such object).\n> \n> <snip>\n> \n> 4. Check the \"/tmp/test_acces\" file for log entries.\n> \n> No errors redirected to the output file.\n> \n> Note : now there is no output even after killing the process and control+c, \n> Is it what is expected now after the fix?\n\nls -al /var/log/dirsrv/slapd-testvm\nls -al /tmp/test_acces"
					},
					{
						"isprivate": "0",
						"commentid": "3729887",
						"comment_count": "5",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-12 06:47:59 +0000",
						"thetext": "Method 1\n===========\nstep 0 mkfifo /var/log/dirsrv/slapd-testvm/access115.pipe\n\nstep 1 ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f namepipeconfig.ldif\n\nnamepipeconfig.ldif\n======================\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-maxlogsperdir\nnsslapd-accesslog-maxlogsperdir: 1\n-\nreplace: nsslapd-accesslog-logexpirationtime\nnsslapd-accesslog-logexpirationtime: -1\n-\nreplace: nsslapd-accesslog-logrotationtime\nnsslapd-accesslog-logrotationtime: -1\n-\nreplace: nsslapd-accesslog\nnsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access115.pipe\n-\nreplace: nsslapd-accesslog-logbuffering\nnsslapd-accesslog-logbuffering: off\n\nGetting error here \n********************\nmodifying entry \"cn=config\"\nldap_modify: Server is unwilling to perform (53)\n\tadditional info: Cannot open accesslog directory \"/var/log/dirsrv/slapd-testvm/access115.pipe\", client accesses will not be logged.\n\n[root@testvm amsharma]# ls -l /var/log/dirsrv/slapd-testvm\ntotal 1084\n-rw-------. 1 nobody nobody 191445 May 11 12:46 access\nprw-------. 1 root   root        0 May 12 11:44 access111.pipe\nprw-r--r--. 1 root   root        0 May 12 11:51 access112.pipe\nprw-r--r--. 1 root   root        0 May 12 11:59 access115.pipe\nprw-------. 1 root   root        0 May 11 13:48 access11.pipe\nprw-------. 1 root   root        0 May 11 13:18 access1.pipe\n\n\nOk, let us try now the Method 2\n=================================\nStep 1\nExecute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access999.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n[1] 11841\n\nStep 2\nMake server changes\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f namepipeconfig.ldif\n\nOfcourse, I have changed in namepipeconfig.ldif-\nreplace: nsslapd-accesslog\nnsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access999.pipe\n\nHere Got the error as\n************************* \n<<modifying entry \"cn=config\"\nldap_modify: Server is unwilling to perform (53)\n\tadditional info: Cannot open accesslog directory \"/var/log/dirsrv/slapd-testvm/access999.pipe\", client accesses will not be logged.\n\n[root@testvm amsharma]# ls -l /var/log/dirsrv/slapd-testvm\ntotal 1084\n-rw-------. 1 nobody nobody 191445 May 11 12:46 access\nprw-------. 1 root   root        0 May 12 11:44 access111.pipe\nprw-r--r--. 1 root   root        0 May 12 11:51 access112.pipe\nprw-r--r--. 1 root   root        0 May 12 11:59 access115.pipe\nprw-------. 1 root   root        0 May 11 13:48 access11.pipe\nprw-------. 1 root   root        0 May 11 13:18 access1.pipe\n-rw-------. 1 nobody nobody 121922 May  6 18:37 access.20110506-180733\n-rw-------. 1 nobody nobody 682531 May 10 15:37 access.20110509-165423\nprw-------. 1 root   root        0 May 12 12:06 access999.pipe\n\nvim /tmp/test_access - empty\n\n# kill -9 11841\n>>\n\nStep 3\nRun ldapsearch to search for unavailable entries. Ldapsearch should return error 32(no such object).\n\nStep 4\nCheck the \"/tmp/test_acces\" file for log entries.\nls -al /var/log/dirsrv/slapd-testvm\nls -al /tmp/test_acces\n\n Method 3\n===============\nStep 1 \nMake server changes\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f namepipeconfig.ldif\nmodifying entry \"cn=config\"\n\nStep 2\nExecute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access555.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n[1] 11861\n\nStep 3\nRun ldapsearch to search for unavailable entries. Ldapsearch should return error 32(no such object).\n\nhere I got \n*****************\n[root@testvm amsharma]# ldapsearch -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -b \"cn=hello\"\n# extended LDIF\n#\n# LDAPv3\n# base <cn=hello> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# search result\nsearch: 2\nresult: 32 No such object\n\n# numResponses: 1\n[1]+  Exit 1                  /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access555.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access\n\nStep 4\nCheck the \"/tmp/test_acces\" file for log entries.\nls -al /var/log/dirsrv/slapd-testvm\nls -al /tmp/test_acces\n\n[root@testvm amsharma]# ls -al /var/log/dirsrv/slapd-testvm\ntotal 1100\ndrwxrwx---. 2 nobody nobody   4096 May 12 12:11 .\ndrwxr-xr-x. 4 root   root     4096 May 10 17:21 ..\n-rw-------. 1 nobody nobody 191445 May 11 12:46 access\nprw-------. 1 root   root        0 May 12 11:44 access111.pipe\nprw-r--r--. 1 root   root        0 May 12 11:51 access112.pipe\nprw-r--r--. 1 root   root        0 May 12 11:59 access115.pipe\nprw-------. 1 root   root        0 May 11 13:48 access11.pipe\nprw-------. 1 root   root        0 May 11 13:18 access1.pipe\n-rw-------. 1 nobody nobody 121922 May  6 18:37 access.20110506-180733\n-rw-------. 1 nobody nobody 682531 May 10 15:37 access.20110509-165423\n-rw-------. 1 nobody nobody   1511 May 12 12:12 access555.pipe\n-rw-------. 1 nobody nobody     63 May 12 12:11 access555.pipe.rotationinfo\nprw-------. 1 root   root        0 May 12 12:06 access999.pipe\n\nvim /tmp/test_access\nError: /var/log/dirsrv/slapd-testvm/access555.pipe exists and is not a log pipe\nuse a filename other than /var/log/dirsrv/slapd-testvm/access555.pipe\n\nMethod 4\n===========\n1. Make server changes\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f namepipeconfig.ldif\n\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog-maxlogsperdir\nnsslapd-accesslog-maxlogsperdir: 1\n-\nreplace: nsslapd-accesslog-logexpirationtime\nnsslapd-accesslog-logexpirationtime: -1\n-\nreplace: nsslapd-accesslog-logrotationtime\nnsslapd-accesslog-logrotationtime: -1\n-\nreplace: nsslapd-accesslog-logbuffering\nnsslapd-accesslog-logbuffering: off\n\n2. Execute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access666.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n[1] 11881\n\n3. Now -- \nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=config\nchangetype: modify\nreplace: nsslapd-accesslog\nnsslapd-accesslog: /var/log/dirsrv/slapd-testvm/access666.pipe\n\nGot the error\n===========\nmodifying entry \"cn=config\"\nldap_modify: Server is unwilling to perform (53)\n\tadditional info: Cannot open accesslog directory \"/var/log/dirsrv/slapd-testvm/access666.pipe\", client accesses will not be logged.\n\n4. Run ldapsearch to search for unavailable entries. Ldapsearch should return error 32(no such object).\n\n5. Check the \"/tmp/test_acces\" file for log entries.\nls -al /var/log/dirsrv/slapd-testvm\nprw-------. 1 root   root        0 May 12 12:17 access666.pipe\n\nls -al /tmp/test_access\n-rw-r--r--. 1 root root 0 May 12 12:17 /tmp/test_access\nFile is still empty\n\n6. kill -9 11881\n\nFile is still empty.\n\nI am facing error in any of the case, and the file is still empty.\nPlease advice."
					},
					{
						"isprivate": "0",
						"commentid": "3731004",
						"comment_count": "6",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-12 16:19:28 +0000",
						"thetext": "Method 2 should work.  I think the problem is permissions.  I'm assuming the server is running as userid \"nobody\" (according to the ownership of the /var/log/dirsrv/slapd-testvm directory.  Note that you are running the test as root, and the pipe files look like this:\nprw-r--r--. 1 root   root        0 May 12 11:51 access112.pipe\netc.  This means the server cannot write to the pipe, hence the UNWILLING_TO_PERFORM error.  The log pipe script has a flag just for this purpose: -u userid.  So try it like this:\n\n1) /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access999.pipe -u nobody\n--plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n/tmp/test_access &\n2) ldapmodify ....."
					},
					{
						"isprivate": "0",
						"commentid": "3732042",
						"comment_count": "7",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-13 06:11:04 +0000",
						"thetext": "yeah, correct.....\n\nStep 1\nExecute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -u nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n\n\nStep 2\nMake server changes\nldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f namepipeconfig.ldif\n\n\nStep 3\nRun ldapsearch to search for unavailable entries. Ldapsearch should return\nerror 32(no such object).\n\nStep 4\nCheck the \"/tmp/test_acces\" file for log entries.\nls -al /var/log/dirsrv/slapd-testvm -rw-------. 1 nobody nobody     63 May 13 11:35 access123.pipe.rotationinfo\nls -al /tmp/test_access -rw-r--r--. 1 root root 0 May 13 11:34 /tmp/test_access\n\nBut the original problem is still intact...\n/tmp/test_access is empty and even after killing the process of name pipe, nothing logged into the file..\nIs it also related to some permissions??\nOkie, I tried after\nls -al /tmp/test_access\nrwxrwxrwx. 1 root root 0 May 13 11:43 /tmp/test_access\n\nBut still :(\n\nPlease advice.."
					},
					{
						"isprivate": "0",
						"commentid": "3733483",
						"comment_count": "8",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-13 20:35:43 +0000",
						"thetext": "(In reply to comment #7)\n> yeah, correct.....\n> \n> Step 1\n> Execute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -u\n> nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> /tmp/test_access &\n\nTry adding the -d option - let's see if there are any errors running the log pipe script\n\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n> \n> \n> Step 2\n> Make server changes\n> ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f\n> namepipeconfig.ldif\n\nAny errors this time?\n \n> \n> Step 3\n> Run ldapsearch to search for unavailable entries. Ldapsearch should return\n> error 32(no such object).\n> \n> Step 4\n> Check the \"/tmp/test_acces\" file for log entries.\n> ls -al /var/log/dirsrv/slapd-testvm -rw-------. 1 nobody nobody     63 May 13\n> 11:35 access123.pipe.rotationinfo\n> ls -al /tmp/test_access -rw-r--r--. 1 root root 0 May 13 11:34 /tmp/test_access\n> \n> But the original problem is still intact...\n> /tmp/test_access is empty and even after killing the process of name pipe,\n> nothing logged into the file..\n> Is it also related to some permissions??\n\nI don't think so.\n\nLet's see if the -d flag tells us anything"
					},
					{
						"isprivate": "0",
						"commentid": "3735702",
						"comment_count": "9",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-16 09:20:42 +0000",
						"thetext": "(In reply to comment #8)\n> (In reply to comment #7)\n> > yeah, correct.....\n> > \n> > Step 1\n> > Execute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -u\n> > nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> > /tmp/test_access &\n> \n> Try adding the -d option - let's see if there are any errors running the log\n> pipe script\n> \n> /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody\n> --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> /tmp/test_access &\n> > \nokie, tried.\n> > \n> > Step 2\n> > Make server changes\n> > ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f\n> > namepipeconfig.ldif\n> \n> Any errors this time?\n> \nno till now.\n> > \n> > Step 3\n> > Run ldapsearch to search for unavailable entries. Ldapsearch should return\n> > error 32(no such object).\n> > \n> > Step 4\n> > Check the \"/tmp/test_acces\" file for log entries.\n> > ls -al /var/log/dirsrv/slapd-testvm -rw-------. 1 nobody nobody     63 May 13\n> > 11:35 access123.pipe.rotationinfo\n> > ls -al /tmp/test_access -rw-r--r--. 1 root root 0 May 13 11:34 /tmp/test_access\n> > \n> > But the original problem is still intact...\n> > /tmp/test_access is empty and even after killing the process of name pipe,\n> > nothing logged into the file..\n> > Is it also related to some permissions??\n> \n> I don't think so.\n> \n> Let's see if the -d flag tells us anything\nStill getting no contents in the text file>\nIf I do kill -9 pid then again no contents.\nIf I do kill pid then --\ncontents of /tmp/test_access\n==============================\nCreating log pipe /var/log/dirsrv/slapd-testvm/access606.pipe\nListening to log pipe /var/log/dirsrv/slapd-testvm/access606.pipe number of lines 1000\nRead 0 total lines\n/var/log/dirsrv/slapd-testvm/access606.pipe ============================================================\n~"
					},
					{
						"isprivate": "0",
						"commentid": "3736675",
						"comment_count": "10",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-16 17:26:11 +0000",
						"thetext": "(In reply to comment #9)\n> (In reply to comment #8)\n> > (In reply to comment #7)\n> > > yeah, correct.....\n> > > \n> > > Step 1\n> > > Execute - /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -u\n> > > nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> > > /tmp/test_access &\n> > \n> > Try adding the -d option - let's see if there are any errors running the log\n> > pipe script\n> > \n> > /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody\n> > --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n> > /tmp/test_access &\n> > > \n> okie, tried.\n> > > \n> > > Step 2\n> > > Make server changes\n> > > ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -f\n> > > namepipeconfig.ldif\n> > \n> > Any errors this time?\n> > \n> no till now.\n> > > \n> > > Step 3\n> > > Run ldapsearch to search for unavailable entries. Ldapsearch should return\n> > > error 32(no such object).\n> > > \n> > > Step 4\n> > > Check the \"/tmp/test_acces\" file for log entries.\n> > > ls -al /var/log/dirsrv/slapd-testvm -rw-------. 1 nobody nobody     63 May 13\n> > > 11:35 access123.pipe.rotationinfo\n> > > ls -al /tmp/test_access -rw-r--r--. 1 root root 0 May 13 11:34 /tmp/test_access\n> > > \n> > > But the original problem is still intact...\n> > > /tmp/test_access is empty and even after killing the process of name pipe,\n> > > nothing logged into the file..\n> > > Is it also related to some permissions??\n> > \n> > I don't think so.\n> > \n> > Let's see if the -d flag tells us anything\n> Still getting no contents in the text file>\n> If I do kill -9 pid then again no contents.\n> If I do kill pid then --\n> contents of /tmp/test_access\n> ==============================\n> Creating log pipe /var/log/dirsrv/slapd-testvm/access606.pipe\n> Listening to log pipe /var/log/dirsrv/slapd-testvm/access606.pipe number of\n> lines 1000\n> Read 0 total lines\n> /var/log/dirsrv/slapd-testvm/access606.pipe\n> ============================================================\n> ~\n\nOk, try this - open two windows - in the first window, run\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody\n\nin the second window, use ldapmodify to make the directory server log to /var/log/dirsrv/slapd-testvm/access123.pipe, then use ldapsearch to send search requests to the directory server - after several ldapsearch requests, do Ctrl-C in the first window to stop the log pipe - do you see any output?\n\nIf that is working, set up everything again, use two windows again - in the first window run\n\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\"\n\nin the second window run the ldapmodify to tell directory server to use the log pipe, then run ldapsearch to search for unavailable entries (e.g. ldapsearch -x ... -s base -b \"cn=notfound\"\n\nafter several ldapsearch requests, do Ctrl-C in the first window to stop the log pipe - do you see any output?"
					},
					{
						"isprivate": "0",
						"commentid": "3738699",
						"comment_count": "11",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-17 13:56:02 +0000",
						"thetext": "Ok, try this - open two windows - in the first window, run\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody\n\nin the second window, use ldapmodify to make the directory server log to\n/var/log/dirsrv/slapd-testvm/access123.pipe, then use ldapsearch to send search\nrequests to the directory server - after several ldapsearch requests, do Ctrl-C\nin the first window to stop the log pipe - do you see any output?\n\n\n<Amita>\n\n[root@testvm ~]# /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access0.pipe -d -u nobody\nCreating log pipe /var/log/dirsrv/slapd-testvm/access0.pipe\nListening to log pipe /var/log/dirsrv/slapd-testvm/access0.pipe number of lines 1000\n^C\n<After Control + c>\nRead 0 total lines\n/var/log/dirsrv/slapd-testvm/access0.pipe ============================================================\n[root@testvm ~]# \n\n</Amita>\n\n\n\n\nIf that is working, set up everything again, use two windows again - in the\nfirst window run\n\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access909.pipe -d -u nobody\n--plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\"\n\nin the second window run the ldapmodify to tell directory server to use the log\npipe, then run ldapsearch to search for unavailable entries (e.g. ldapsearch -x\n... -s base -b \"cn=notfound\"\n\nafter several ldapsearch requests, do Ctrl-C in the first window to stop the\nlog pipe - do you see any output?\n\n<Amita>\nAfter control + c\n\n[root@testvm ~]# /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access9000.pipe -d -u nobody --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\"\nCreating log pipe /var/log/dirsrv/slapd-testvm/access9000.pipe\nListening to log pipe /var/log/dirsrv/slapd-testvm/access9000.pipe number of lines 1000\n^CRead 0 total lines\n/var/log/dirsrv/slapd-testvm/access9000.pipe ============================================================\n[root@testvm ~]# ls -l /var/log/dirsrv/slapd-testvm/\ntotal 192\nprw-------. 1 nobody root        0 May 17 18:28 access0.pipe\n-rw-------. 1 nobody nobody 172896 May 17 19:23 access123.pipe\n-rw-------. 1 nobody nobody     63 May 16 15:28 access123.pipe.rotationinfo\nprw-------. 1 nobody root        0 May 17 19:22 access9000.pipe\nprw-------. 1 nobody root        0 May 17 19:18 access909.pipe\n-rw-------. 1 nobody nobody      0 May 16 15:28 audit\n-rw-------. 1 nobody nobody     63 May 16 15:28 audit.rotationinfo\n-rw-------. 1 nobody nobody   3715 May 17 16:47 errors\n-rw-------. 1 nobody nobody     63 May 16 15:28 errors.rotationinfo"
					},
					{
						"isprivate": "0",
						"commentid": "3739238",
						"comment_count": "12",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-17 17:23:50 +0000",
						"thetext": "(In reply to comment #11)\n> Ok, try this - open two windows - in the first window, run\n> /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access123.pipe -d -u nobody\n> \n> in the second window, use ldapmodify to make the directory server log to\n> /var/log/dirsrv/slapd-testvm/access123.pipe, then use ldapsearch to send search\n> requests to the directory server - after several ldapsearch requests, do Ctrl-C\n> in the first window to stop the log pipe - do you see any output?\n> \n> \n> <Amita>\n> \n> [root@testvm ~]# /usr/bin/ds-logpipe.py\n> /var/log/dirsrv/slapd-testvm/access0.pipe -d -u nobody\n> Creating log pipe /var/log/dirsrv/slapd-testvm/access0.pipe\n> Listening to log pipe /var/log/dirsrv/slapd-testvm/access0.pipe number of lines\n> 1000\n> ^C\n> <After Control + c>\n> Read 0 total lines\n> /var/log/dirsrv/slapd-testvm/access0.pipe\n> ============================================================\n> [root@testvm ~]# \n\nThe directory server is not opening the write end of the pipe.  In fact, you should see several closes and reopens of the pipe when you do the ldapmodify on the directory server to tell it to use /var/log/dirsrv/slapd-testvm/access0.pipe.  After you run ds-logpipe.py, you did the ldapmodify?  If so, can you post the file you passed to ldapmodify to tell it to log to /var/log/dirsrv/slapd-testvm/access0.pipe?\n\n> \n> </Amita>\n> \n> \n> \n> \n> If that is working, set up everything again, use two windows again - in the\n> first window run\n> \n> /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-testvm/access909.pipe -d -u nobody\n> --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\"\n> \n> in the second window run the ldapmodify to tell directory server to use the log\n> pipe, then run ldapsearch to search for unavailable entries (e.g. ldapsearch -x\n> ... -s base -b \"cn=notfound\"\n> \n> after several ldapsearch requests, do Ctrl-C in the first window to stop the\n> log pipe - do you see any output?\n> \n> <Amita>\n> After control + c\n> \n> [root@testvm ~]# /usr/bin/ds-logpipe.py\n> /var/log/dirsrv/slapd-testvm/access9000.pipe -d -u nobody\n> --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\"\n> Creating log pipe /var/log/dirsrv/slapd-testvm/access9000.pipe\n> Listening to log pipe /var/log/dirsrv/slapd-testvm/access9000.pipe number of\n> lines 1000\n> ^CRead 0 total lines\n> /var/log/dirsrv/slapd-testvm/access9000.pipe\n> ============================================================\n\nThis isn't going to work until we can confirm that the directory server is actually writing to the log pipe.\n\n> [root@testvm ~]# ls -l /var/log/dirsrv/slapd-testvm/\n> total 192\n> prw-------. 1 nobody root        0 May 17 18:28 access0.pipe\n> -rw-------. 1 nobody nobody 172896 May 17 19:23 access123.pipe\n> -rw-------. 1 nobody nobody     63 May 16 15:28 access123.pipe.rotationinfo\n> prw-------. 1 nobody root        0 May 17 19:22 access9000.pipe\n> prw-------. 1 nobody root        0 May 17 19:18 access909.pipe\n> -rw-------. 1 nobody nobody      0 May 16 15:28 audit\n> -rw-------. 1 nobody nobody     63 May 16 15:28 audit.rotationinfo\n> -rw-------. 1 nobody nobody   3715 May 17 16:47 errors\n> -rw-------. 1 nobody nobody     63 May 16 15:28 errors.rotationinfo"
					},
					{
						"isprivate": "0",
						"commentid": "3814636",
						"comment_count": "13",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-06-15 13:36:05 +0000",
						"thetext": "I still see the same old problem. The pipe log output is not getting redirected to the text file, until the ds-logpipe.py script is killed(ctl+c).\n1). Configure named pipe for access log. \nRun ds-logpipe.py script at terminal 1:\n        /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-inferno/access -t 60 --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=\" > /tmp/test_new\n2). Restart the dirsrv services.\n3). From terminal 2, run multiple ldapsearch to get err=32 and err=49.\n4). From termial 3, run cat < /tmp/test_new\n      Result: No contents\n5). Kill the ds-logpipe.py script at terminal 1 and cat the file from terminal 3.\n      Result: Able to see the \"err=*\" lines printed.\n[15/Jun/2011:15:47:56 -0400] conn=12 op=0 RESULT err=0 tag=97 nentries=0 etime=0 dn=\"cn=directory manager\"\n[15/Jun/2011:15:47:56 -0400] conn=12 op=1 RESULT err=32 tag=101 nentries=0 etime=0\n[15/Jun/2011:15:47:57 -0400] conn=13 op=0 RESULT err=0 tag=97 nentries=0 etime=0 dn=\"cn=directory manager\"\n[15/Jun/2011:15:47:57 -0400] conn=13 op=1 RESULT err=32 tag=101 nentries=0 etime=0\n[15/Jun/2011:15:47:57 -0400] conn=14 op=0 RESULT err=0 tag=97 nentries=0 etime=0 dn=\"cn=directory manager\""
					},
					{
						"isprivate": "0",
						"commentid": "3815314",
						"comment_count": "14",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-06-15 17:33:53 +0000",
						"thetext": "(In reply to comment #13)\n> I still see the same old problem. The pipe log output is not getting redirected\n> to the text file, until the ds-logpipe.py script is killed(ctl+c).\n\nThis is working as designed.  When using ds-logpipe.py with no plugin, or using the logregex plugin, all of the server output is buffered inside the script, and is only printed upon exit or kill -1.\n\nNote that this is different than the behavior of the failedbinds.py plugin, which _does write_ to the given log file as the events happen."
					},
					{
						"isprivate": "0",
						"commentid": "3892904",
						"comment_count": "15",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-07-18 07:35:21 +0000",
						"thetext": "Based On Comment 14, marking as VERIFIED."
					}
				]
			}
		},
		{
			"bug_id": 668385,
			"title": "DS pipe log script is executed as many times as the dirsrv service is restarted",
			"bugzilla": {
				"bug_id": "668385",
				"creation_ts": "2011-01-10 11:10:53 +0000",
				"short_desc": "DS pipe log script is executed as many times as the dirsrv service is restarted",
				"delta_ts": "2015-12-07 16:47:36 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "676666",
						"creation_ts": "2011-02-10 16:48:04 +0000",
						"short_desc": "DS pipe log script is executed as many times as the dirsrv service is restarted",
						"delta_ts": "2015-01-04 23:46:18 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"668385"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3531492",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-10 16:48:04 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #668385 +++\n\nDescription of problem: \nDS pipe log script is getting executed as many times as the service is restarted.\nThis happens when you place the ds-logpipe.py script in the /etc/sysconfig/dirsrv-$inst_name file to start the DS pipelog script when the instance is started.\n\n\nVersion-Release number of selected component (if applicable): DS90\n\n\nHow reproducible: Consistently\n\n\nSteps to Reproduce:\n1. Configure access logs for named pipe. Set these access log attributes using\nldapmodify.\n    nsslapd-accesslog-maxlogsperdir: 1\n    nsslapd-accesslog-logexpirationtime: -1\n    nsslapd-accesslog-logrotationtime: -1\n    nsslapd-accesslog: /var/log/dirsrv/slapd-$inst_name/access.pipe\n    nsslapd-accesslog-logbuffering: off\n\n2. Append the below line into the /etc/sysconfig/dirsrv-$inst_name file.\n    /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-inst/access.pipe\n--plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n/tmp/test_access &\n3. Restart the DS instance using the \"service restart dirsrv\" command\n4. Make sure the ds-logpipe.py script is started after running the above command.\n5. Restart the dirsrv service one more time.\n6. ds-logpipe.py is being executed everytime the service restarted.  \n\nActual results:\nDS pipe log script is getting executed as many times as the service is restarted.\n\nExpected results: It is expected to run only one instance of the DS pipe log script.\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-07 22:11:42 EST ---\n\nCreated attachment 477547\n0001-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-10 11:47:37 EST ---\n\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   30cb812..1132e09  master -> master\ncommit 1132e09752c8f9aba7a963bfc91a8941000012ca\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 3 18:42:37 2011 -0700\n    Reviewed by: nkinder (Thanks!)\n    Branch: master\n    Fix Description: The main thing was adding a pid file for the script itself,\n    so it can know if it is running or not.  This is the new '-i' argument.\n    The other tricky part was figuring out, when reading the pipe, it is hard to\n    know if the server has really exited or not, and therefore, if the script\n    can exit.  When the server is starting up, when it daemonizes, it will close\n    and reopen the log file descriptors.  We can detect this as reading just\n    an eof (line == None) from the pipe and nothing else.  In this case, we\n    can just reopen the log.\n    When we open the log file, if reading from a server, we always set a timer\n    because the open will block until something writes to the pipe.  However,\n    readline() will always return and will never block.  Even at eof, if the\n    other side has closed the pipe, readline() will just return None.\n    The documentation on the wiki has been updated with the new information\n    about how to set up the init scripts to use the logpipe.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   f0e39fd..ceec7ba  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit ceec7ba4e3b9d8baadf2a34591658484606fab9b\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 3 18:42:37 2011 -0700"
							},
							{
								"isprivate": "0",
								"commentid": "3638166",
								"comment_count": "3",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-03-29 21:29:59 +0000",
								"thetext": "Checking in 0009-bump-version-to-1.2.8.rc3.patch;\n/cvs/dist/rpms/389-ds-base/RHEL-6/0009-bump-version-to-1.2.8.rc3.patch,v  <--  0009-bump-version-to-1.2.8.rc3.patch\ninitial revision: 1.1\ndone\nRCS file: /cvs/dist/rpms/389-ds-base/RHEL-6/0010-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch,v\ndone\nChecking in 0010-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch;\n/cvs/dist/rpms/389-ds-base/RHEL-6/0010-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch,v  <--  0010-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch\ninitial revision: 1.1\ndone\nRCS file: /cvs/dist/rpms/389-ds-base/RHEL-6/0011-bump-version-to-1.2.8.rc4-bump-ds-console-version-to.patch,v\ndone\nChecking in 0011-bump-version-to-1.2.8.rc4-bump-ds-console-version-to.patch;\n/cvs/dist/rpms/389-ds-base/RHEL-6/0011-bump-version-to-1.2.8.rc4-bump-ds-console-version-to.patch,v  <--  0011-bump-version-to-1.2.8.rc4-bump-ds-console-version-to.patch\ninitial revision: 1.1\ndone\nChecking in 389-ds-base-git.sh;\n/cvs/dist/rpms/389-ds-base/RHEL-6/389-ds-base-git.sh,v  <--  389-ds-base-git.sh\nnew revision: 1.11; previous revision: 1.10\ndone\nChecking in 389-ds-base.spec;\n/cvs/dist/rpms/389-ds-base/RHEL-6/389-ds-base.spec,v  <--  389-ds-base.spec\nnew revision: 1.20; previous revision: 1.19\ndone"
							},
							{
								"isprivate": "0",
								"commentid": "3680015",
								"comment_count": "5",
								"who": {
									"text": "ckannan",
									"name": "Chandrasekar Kannan"
								},
								"bug_when": "2011-04-17 18:47:37 +0000",
								"thetext": "\nTested with the latest 389-ds-base and it fails. \n\n[root@ds90-rhel6-32vm slapd-ds90]# rpm -qi 389-ds-base\nName        : 389-ds-base                  Relocations: (not relocatable)\nVersion     : 1.2.8.2                           Vendor: Red Hat, Inc.\nRelease     : 1.el6                         Build Date: Thu 14 Apr 2011 06:53:22 PM EDT\nInstall Date: Sun 17 Apr 2011 01:33:14 PM EDT      Build Host: x86-003.build.bos.redhat.com\nGroup       : System Environment/Daemons    Source RPM: 389-ds-base-1.2.8.2-1.el6.src.rpm\nSize        : 4094342                          License: GPLv2 with exceptions\nSignature   : (none)\nPackager    : Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>\nURL         : http://port389.org/\nSummary     : 389 Directory Server (base)\nDescription :\n389 Directory Server is an LDAPv3 compliant server.  The base package includes\nthe LDAP server and command line utilities for server administration.\n[root@ds90-rhel6-32vm slapd-ds90]# \n\n\n[root@ds90-rhel6-32vm slapd-ds90]# cat /etc/sysconfig/dirsrv-ds90\n# This file is sourced by dirsrv upon startup to set\n# the default environment for a single specific  directory\n# server instances.  To set defaults for all instances, edit\n# the file in the same directory called dirsrv.\n\n# These settings are used by the start-dirsrv and\n# start-slapd scripts (as well as their associates stop\n# and restart scripts).  Do not edit them unless you know\n# what you are doing.\nSERVER_DIR=/usr/lib/dirsrv ; export SERVER_DIR\nSERVERBIN_DIR=/usr/sbin ; export SERVERBIN_DIR\nCONFIG_DIR=/etc/dirsrv/slapd-ds90 ; export CONFIG_DIR\nINST_DIR=/usr/lib/dirsrv/slapd-ds90 ; export INST_DIR\nRUN_DIR=/var/run/dirsrv ; export RUN_DIR\nDS_ROOT= ; export DS_ROOT\nPRODUCT_NAME=slapd ; export PRODUCT_NAME\n\n# Put custom instance specific settings below here.\n/usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" > /tmp/test_access &\n[root@ds90-rhel6-32vm slapd-ds90]# \n[root@ds90-rhel6-32vm slapd-ds90]# ls -al /var/log/dirsrv/slapd-ds90\ntotal 32\ndrwxrwx---. 2 nobody nobody 4096 Apr 17 14:39 .\ndrwxr-xr-x. 4 root   root   4096 Apr 17 13:46 ..\n-rw-------. 1 nobody nobody    0 Apr 17 13:46 access\nprw-------. 1 nobody nobody    0 Apr 17 14:37 access.pipe\n-rw-------. 1 nobody nobody   63 Apr 17 14:39 access.pipe.rotationinfo\n-rw-------. 1 nobody nobody   63 Apr 17 13:46 access.rotationinfo\n-rw-------. 1 nobody nobody    0 Apr 17 13:46 audit\n-rw-------. 1 nobody nobody   63 Apr 17 13:46 audit.rotationinfo\n-rw-------. 1 nobody nobody 7159 Apr 17 14:39 errors\n-rw-------. 1 nobody nobody   63 Apr 17 13:46 errors.rotationinfo\n[root@ds90-rhel6-32vm slapd-ds90]# ps -ef |grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nroot     17841     1  0 14:39 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     17935 16232  0 14:43 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm slapd-ds90]# service  dirsrv restart ds90\nShutting down dirsrv: \n    ds90...                                                [  OK  ]\nStarting dirsrv: \n    ds90...                                                [  OK  ]\n[root@ds90-rhel6-32vm slapd-ds90]# ps -ef |grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nroot     17841     1  0 14:39 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     17969     1  0 14:43 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     18038 16232  0 14:44 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm slapd-ds90]# service  dirsrv restart ds90\nShutting down dirsrv: \n    ds90...                                                [  OK  ]\nStarting dirsrv: \n    ds90...                                                [  OK  ]\n[root@ds90-rhel6-32vm slapd-ds90]# ps -ef |grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nroot     17841     1  0 14:39 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     17969     1  0 14:43 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     18070     1  2 14:44 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=err=32\nroot     18138 16232  0 14:44 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm slapd-ds90]#"
							},
							{
								"isprivate": "0",
								"commentid": "3680018",
								"comment_count": "6",
								"who": {
									"text": "ckannan",
									"name": "Chandrasekar Kannan"
								},
								"bug_when": "2011-04-17 19:04:52 +0000",
								"thetext": "The steps to reproduce the bug were old. I have now tested with updated documentation from the wiki... and it passes.\n\n[root@ds90-rhel6-32vm sysconfig]# cat /etc/sysconfig/dirsrv-ds90\n# This file is sourced by dirsrv upon startup to set\n# the default environment for a single specific  directory\n# server instances.  To set defaults for all instances, edit\n# the file in the same directory called dirsrv.\n\n# These settings are used by the start-dirsrv and\n# start-slapd scripts (as well as their associates stop\n# and restart scripts).  Do not edit them unless you know\n# what you are doing.\nSERVER_DIR=/usr/lib/dirsrv ; export SERVER_DIR\nSERVERBIN_DIR=/usr/sbin ; export SERVERBIN_DIR\nCONFIG_DIR=/etc/dirsrv/slapd-ds90 ; export CONFIG_DIR\nINST_DIR=/usr/lib/dirsrv/slapd-ds90 ; export INST_DIR\nRUN_DIR=/var/run/dirsrv ; export RUN_DIR\nDS_ROOT= ; export DS_ROOT\nPRODUCT_NAME=slapd ; export PRODUCT_NAME\n\n# Put custom instance specific settings below here.\naccpidfile=$RUN_DIR/dslogpipe-ds90-acc.pid\n# see if there is already a logpipe running - doing a stop or\n# restart (which first calls stop) should have made the old\n# one exit, but let's make sure we kill it first\nif [ -f $accpidfile ] ; then\n  accpid=`cat $accpidfile`\n  if [ -n \"$accpid\" ] ; then\n    kill \"$accpid\" > /dev/null 2>&1\n  fi\nfi\n# only log failed binds\npython /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe -u nobody \\\n -s $RUN_DIR/slapd-ds90.pid \\\n -i $accpidfile --plugin=/usr/share/dirsrv/data/failedbinds.py \\\n failedbinds.logfile=/var/log/dirsrv/slapd-ds90/access.failedbinds &\n# sleep gives the script a chance to create the pipe, if necessary\nsleep 1\n[root@ds90-rhel6-32vm sysconfig]# \n[root@ds90-rhel6-32vm sysconfig]# \n[root@ds90-rhel6-32vm sysconfig]# ps -ef | grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nroot     18497 16232  0 15:02 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm sysconfig]# service  dirsrv stop ds90\nShutting down dirsrv: \n    ds90...                                                [  OK  ]\n[root@ds90-rhel6-32vm sysconfig]# service  dirsrv start ds90\nStarting dirsrv: \n    ds90...                                                [  OK  ]\n[root@ds90-rhel6-32vm sysconfig]# \n[root@ds90-rhel6-32vm sysconfig]# \n[root@ds90-rhel6-32vm sysconfig]# ps -ef | grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nnobody   18552     1  0 15:02 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe -u nobody -s /var/run/dirsrv/slapd-ds90.pid -i /var/run/dirsrv/dslogpipe-ds90-acc.pid --plugin=/usr/share/dirsrv/data/failedbinds.py failedbinds.logfile=/var/log/dirsrv/slapd-ds90/access.failedbinds\nroot     18621 16232  0 15:03 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm sysconfig]# service  dirsrv restart ds90\nShutting down dirsrv: \n    ds90...                                                [  OK  ]\nStarting dirsrv: \n    ds90...                                                [  OK  ]\n[root@ds90-rhel6-32vm sysconfig]# ps -ef | grep log\nroot      1121     1  0 Apr10 ?        00:01:02 /sbin/rsyslogd -c 4\ngdm       1783  1745  0 Apr10 ?        00:00:00 plymouth-log-viewer --icon\ngdm       1798     1  0 Apr10 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog\nnobody   18655     1  0 15:03 pts/1    00:00:00 python /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-ds90/access.pipe -u nobody -s /var/run/dirsrv/slapd-ds90.pid -i /var/run/dirsrv/dslogpipe-ds90-acc.pid --plugin=/usr/share/dirsrv/data/failedbinds.py failedbinds.logfile=/var/log/dirsrv/slapd-ds90/access.failedbinds\nroot     18724 16232  0 15:03 pts/1    00:00:00 grep log\n[root@ds90-rhel6-32vm sysconfig]#"
							},
							{
								"isprivate": "0",
								"commentid": "3744592",
								"comment_count": "7",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:28 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3464194",
						"comment_count": "0",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-01-10 11:10:53 +0000",
						"thetext": "Description of problem: \nDS pipe log script is getting executed as many times as the service is restarted.\nThis happens when you place the ds-logpipe.py script in the /etc/sysconfig/dirsrv-$inst_name file to start the DS pipelog script when the instance is started.\n\n\nVersion-Release number of selected component (if applicable): DS90\n\n\nHow reproducible: Consistently\n\n\nSteps to Reproduce:\n1. Configure access logs for named pipe. Set these access log attributes using\nldapmodify.\n    nsslapd-accesslog-maxlogsperdir: 1\n    nsslapd-accesslog-logexpirationtime: -1\n    nsslapd-accesslog-logrotationtime: -1\n    nsslapd-accesslog: /var/log/dirsrv/slapd-$inst_name/access.pipe\n    nsslapd-accesslog-logbuffering: off\n\n2. Append the below line into the /etc/sysconfig/dirsrv-$inst_name file.\n    /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-inst/access.pipe\n--plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=32\" >\n/tmp/test_access &\n3. Restart the DS instance using the \"service restart dirsrv\" command\n4. Make sure the ds-logpipe.py script is started after running the above command.\n5. Restart the dirsrv service one more time.\n6. ds-logpipe.py is being executed everytime the service restarted.  \n\nActual results:\nDS pipe log script is getting executed as many times as the service is restarted.\n\nExpected results: It is expected to run only one instance of the DS pipe log script."
					},
					{
						"isprivate": "0",
						"commentid": "3525647",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-08 03:11:42 +0000",
						"thetext": "Created attachment 477547\n0001-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3531491",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-10 16:47:37 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   30cb812..1132e09  master -> master\ncommit 1132e09752c8f9aba7a963bfc91a8941000012ca\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 3 18:42:37 2011 -0700\n    Reviewed by: nkinder (Thanks!)\n    Branch: master\n    Fix Description: The main thing was adding a pid file for the script itself,\n    so it can know if it is running or not.  This is the new '-i' argument.\n    The other tricky part was figuring out, when reading the pipe, it is hard to\n    know if the server has really exited or not, and therefore, if the script\n    can exit.  When the server is starting up, when it daemonizes, it will close\n    and reopen the log file descriptors.  We can detect this as reading just\n    an eof (line == None) from the pipe and nothing else.  In this case, we\n    can just reopen the log.\n    When we open the log file, if reading from a server, we always set a timer\n    because the open will block until something writes to the pipe.  However,\n    readline() will always return and will never block.  Even at eof, if the\n    other side has closed the pipe, readline() will just return None.\n    The documentation on the wiki has been updated with the new information\n    about how to set up the init scripts to use the logpipe.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   f0e39fd..ceec7ba  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit ceec7ba4e3b9d8baadf2a34591658484606fab9b\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 3 18:42:37 2011 -0700"
					},
					{
						"isprivate": "0",
						"commentid": "3633717",
						"comment_count": "3",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-03-28 14:49:17 +0000",
						"thetext": "I encountered few more problems when I was testing the fix.\n\n1. Restart/Stop the slapd instance when the DS pipe log script is running.\n\nResult: DS pipe log script is killed and the DS fails to start.\n\n2. When DS is stopped, run the DS pipe log script and then start the DS instance.\n\nResult: DS pipe log script is killed and the DS fails to start.\n\n3. Put the DS pipe log script in the startup script(/etc/sysconfig/dirsrv-$inst).\n\nResult: Instance failed to restart/start when the DS pipe log script is already running/not running.\n\nUltimately, this fix caused many problems and I also see that the pipe log script is failing redirect the error messages to the pipe file."
					},
					{
						"isprivate": "0",
						"commentid": "3633747",
						"comment_count": "4",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-03-28 14:55:54 +0000",
						"thetext": "(In reply to comment #3)\n> I encountered few more problems when I was testing the fix.\n> \n> 1. Restart/Stop the slapd instance when the DS pipe log script is running.\n> \n> Result: DS pipe log script is killed and the DS fails to start.\n\nIn this case, do you have the DS log pipe script configured to start in the /etc/sysconfig/dirsrv-instance file?  Can you provide the exact steps and configuration to reproduce this problem?\n\n> \n> 2. When DS is stopped, run the DS pipe log script and then start the DS\n> instance.\n> \n> Result: DS pipe log script is killed and the DS fails to start.\n\nIf you have the log pipe script configured to start in the /etc/sysconfig/dirsrv-instance file, then you cannot also run the DS log pipe script separately for the same log file.\n\n> \n> 3. Put the DS pipe log script in the startup\n> script(/etc/sysconfig/dirsrv-$inst).\n> \n> Result: Instance failed to restart/start when the DS pipe log script is already\n> running/not running.\n> \n> Ultimately, this fix caused many problems and I also see that the pipe log\n> script is failing redirect the error messages to the pipe file.\n\nCan you provide the exact configuration and steps to reproduce?  Note that if you have the DS log pipe configured in /etc/sysconfig/dirsrv-$inst, you cannot manually run the DS log pipe - it must be started and stopped with the directory server using service or the stop/start/restart-slapd scripts."
					},
					{
						"isprivate": "0",
						"commentid": "3635655",
						"comment_count": "5",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-03-29 05:58:08 +0000",
						"thetext": "(In reply to comment #4)\n> (In reply to comment #3)\n> > I encountered few more problems when I was testing the fix.\n> > \n> > 1. Restart/Stop the slapd instance when the DS pipe log script is running.\n> > \n> > Result: DS pipe log script is killed and the DS fails to start.\n> \n> In this case, do you have the DS log pipe script configured to start in the\n> /etc/sysconfig/dirsrv-instance file?  Can you provide the exact steps and\n> configuration to reproduce this problem?\n> \nSteps to reproduce:\n1. Create the directory server instance and change the \"cn=config\" entry for the named pipe log.\n2. Remove the access log file from /var/log/dirsrv/slapd-$inst/.\n3. Run /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-$inst/access -t 60 --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=\"\n4. Restart the directory server instance to apply the (cn=config) changes.\n5. Server fails to restart since the ds-logpipe.py script is killed when stopping the server.\n\n6. Server can be brought back alive only if I re-run the ds-logpipe.py script or if I remove the named pipe file.\n\n> > \n> > 2. When DS is stopped, run the DS pipe log script and then start the DS\n> > instance.\n> > \n> > Result: DS pipe log script is killed and the DS fails to start.\n> \n> If you have the log pipe script configured to start in the\n> /etc/sysconfig/dirsrv-instance file, then you cannot also run the DS log pipe\n> script separately for the same log file.\n> \nI do not have the log pipe script configured in the /etc/sysconfig/dirsrv-instance file.\n> > \n> > 3. Put the DS pipe log script in the startup\n> > script(/etc/sysconfig/dirsrv-$inst).\n> > \n> > Result: Instance failed to restart/start when the DS pipe log script is already\n> > running/not running.\n> > \n> > Ultimately, this fix caused many problems and I also see that the pipe log\n> > script is failing redirect the error messages to the pipe file.\n> \n> Can you provide the exact configuration and steps to reproduce?  Note that if\n> you have the DS log pipe configured in /etc/sysconfig/dirsrv-$inst, you cannot\n> manually run the DS log pipe - it must be started and stopped with the\n> directory server using service or the stop/start/restart-slapd scripts.\n\nI am using the service command to stop/start/restart the dirsrv instances."
					},
					{
						"isprivate": "0",
						"commentid": "3637340",
						"comment_count": "6",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-03-29 16:53:53 +0000",
						"thetext": "(In reply to comment #5)\n> (In reply to comment #4)\n> > (In reply to comment #3)\n> > > I encountered few more problems when I was testing the fix.\n> > > \n> > > 1. Restart/Stop the slapd instance when the DS pipe log script is running.\n> > > \n> > > Result: DS pipe log script is killed and the DS fails to start.\n> > \n> > In this case, do you have the DS log pipe script configured to start in the\n> > /etc/sysconfig/dirsrv-instance file?  Can you provide the exact steps and\n> > configuration to reproduce this problem?\n> > \n> Steps to reproduce:\n> 1. Create the directory server instance and change the \"cn=config\" entry for\n> the named pipe log.\n> 2. Remove the access log file from /var/log/dirsrv/slapd-$inst/.\n> 3. Run /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-$inst/access -t 60\n> --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=\"\n\n-t only applies when using -s or --serverpid - otherwise it does nothing - please file a bug to update the script help, man page, and documentation \n\n> 4. Restart the directory server instance to apply the (cn=config) changes.\n> 5. Server fails to restart since the ds-logpipe.py script is killed when\n> stopping the server.\n> \n> 6. Server can be brought back alive only if I re-run the ds-logpipe.py script\n> or if I remove the named pipe file.\n\nOk.  This is definitely a bug.\n\n> \n> > > \n> > > 2. When DS is stopped, run the DS pipe log script and then start the DS\n> > > instance.\n> > > \n> > > Result: DS pipe log script is killed and the DS fails to start.\n> > \n> > If you have the log pipe script configured to start in the\n> > /etc/sysconfig/dirsrv-instance file, then you cannot also run the DS log pipe\n> > script separately for the same log file.\n> > \n> I do not have the log pipe script configured in the\n> /etc/sysconfig/dirsrv-instance file.\n\nOk.  This is the same bug - the script has the same problem with start and with restart. \n\n> > > \n> > > 3. Put the DS pipe log script in the startup\n> > > script(/etc/sysconfig/dirsrv-$inst).\n> > > \n> > > Result: Instance failed to restart/start when the DS pipe log script is already\n> > > running/not running.\n> > > \n> > > Ultimately, this fix caused many problems and I also see that the pipe log\n> > > script is failing redirect the error messages to the pipe file.\n> > \n> > Can you provide the exact configuration and steps to reproduce?  Note that if\n> > you have the DS log pipe configured in /etc/sysconfig/dirsrv-$inst, you cannot\n> > manually run the DS log pipe - it must be started and stopped with the\n> > directory server using service or the stop/start/restart-slapd scripts.\n> \n> I am using the service command to stop/start/restart the dirsrv instances.\n\nIs the problem that you run ds-logpipe first, then configure the ds-logpipe in /etc/sysconfig/dirsrv-$inst, then try to start the server?  That won't work.  You can't mix running ds-logpipe manually _and_ having it run from /etc/sysconfig/dirsrv-$inst"
					},
					{
						"isprivate": "0",
						"commentid": "3637951",
						"comment_count": "7",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-03-29 20:10:41 +0000",
						"thetext": "Created attachment 488552\n0001-Bug-668385-DS-pipe-log-script-is-executed-as-many-ti.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3638127",
						"comment_count": "8",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-03-29 21:13:36 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   0699244..bb02e98  master -> master\ncommit bb02e98ee264fe37f4ab6495872a470170277b12\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Mar 29 14:09:02 2011 -0600\n389-ds-base-1.2.8 branch\ncommit 51788359843fb9da1b5572c31b25822164462aa4\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Mar 29 14:09:02 2011 -0600"
					},
					{
						"isprivate": "0",
						"commentid": "3638715",
						"comment_count": "9",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-03-30 05:08:06 +0000",
						"thetext": "(In reply to comment #6)\n> (In reply to comment #5)\n> > (In reply to comment #4)\n> > > (In reply to comment #3)\n> > > > I encountered few more problems when I was testing the fix.\n> > > > \n> > > > 1. Restart/Stop the slapd instance when the DS pipe log script is running.\n> > > > \n> > > > Result: DS pipe log script is killed and the DS fails to start.\n> > > \n> > > In this case, do you have the DS log pipe script configured to start in the\n> > > /etc/sysconfig/dirsrv-instance file?  Can you provide the exact steps and\n> > > configuration to reproduce this problem?\n> > > \n> > Steps to reproduce:\n> > 1. Create the directory server instance and change the \"cn=config\" entry for\n> > the named pipe log.\n> > 2. Remove the access log file from /var/log/dirsrv/slapd-$inst/.\n> > 3. Run /usr/bin/ds-logpipe.py /var/log/dirsrv/slapd-$inst/access -t 60\n> > --plugin=/usr/share/dirsrv/data/logregex.py logregex.regex=\"err=\"\n> \n> -t only applies when using -s or --serverpid - otherwise it does nothing -\n> please file a bug to update the script help, man page, and documentation \n> \nCreated a new bug for this. Bug #691980.\n> > 4. Restart the directory server instance to apply the (cn=config) changes.\n> > 5. Server fails to restart since the ds-logpipe.py script is killed when\n> > stopping the server.\n> > \n> > 6. Server can be brought back alive only if I re-run the ds-logpipe.py script\n> > or if I remove the named pipe file.\n> \n> Ok.  This is definitely a bug.\n> \nI am not creating a new bug for this since its a regression.\n> > \n> > > > \n> > > > 2. When DS is stopped, run the DS pipe log script and then start the DS\n> > > > instance.\n> > > > \n> > > > Result: DS pipe log script is killed and the DS fails to start.\n> > > \n> > > If you have the log pipe script configured to start in the\n> > > /etc/sysconfig/dirsrv-instance file, then you cannot also run the DS log pipe\n> > > script separately for the same log file.\n> > > \n> > I do not have the log pipe script configured in the\n> > /etc/sysconfig/dirsrv-instance file.\n> \n> Ok.  This is the same bug - the script has the same problem with start and with\n> restart. \n> \n> > > > \n> > > > 3. Put the DS pipe log script in the startup\n> > > > script(/etc/sysconfig/dirsrv-$inst).\n> > > > \n> > > > Result: Instance failed to restart/start when the DS pipe log script is already\n> > > > running/not running.\n> > > > \n> > > > Ultimately, this fix caused many problems and I also see that the pipe log\n> > > > script is failing redirect the error messages to the pipe file.\n> > > \n> > > Can you provide the exact configuration and steps to reproduce?  Note that if\n> > > you have the DS log pipe configured in /etc/sysconfig/dirsrv-$inst, you cannot\n> > > manually run the DS log pipe - it must be started and stopped with the\n> > > directory server using service or the stop/start/restart-slapd scripts.\n> > \n> > I am using the service command to stop/start/restart the dirsrv instances.\n> \n> Is the problem that you run ds-logpipe first, then configure the ds-logpipe in\n> /etc/sysconfig/dirsrv-$inst, then try to start the server?  That won't work. \n> You can't mix running ds-logpipe manually _and_ having it run from\n> /etc/sysconfig/dirsrv-$inst\nYes, I ran the ds-logpipe first and then configured the startup script. But, later I found that configuring only the startup script was also not working.\nAnyways, let me verify the same once I get the new build."
					},
					{
						"isprivate": "0",
						"commentid": "3741225",
						"comment_count": "10",
						"who": {
							"text": "sramling",
							"name": "Sankar Ramalingam"
						},
						"bug_when": "2011-05-18 14:41:07 +0000",
						"thetext": "Fix verified with the RHEL6.1 0day errata build of 389-ds-base."
					}
				]
			}
		},
		{
			"bug_id": 668619,
			"title": "slapd stops responding",
			"bugzilla": {
				"bug_id": "668619",
				"creation_ts": "2011-01-10 22:20:37 +0000",
				"short_desc": "slapd stops responding",
				"delta_ts": "2023-08-14 02:20:39 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "434915",
						"error": "NotPermitted"
					},
					{
						"bug_id": "680121",
						"alias": "CVE-2011-1067",
						"creation_ts": "2011-02-24 12:37:36 +0000",
						"short_desc": "CVE-2011-1067 Directory Server: DoS via Simple Paged Results connections",
						"delta_ts": "2021-02-24 16:27:00 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"keywords": "Security",
						"priority": "low",
						"bug_severity": "low",
						"depends_on": [
							"668619",
							"711513"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3558041",
								"comment_count": "0",
								"who": {
									"text": "jlieskov",
									"name": "Jan Lieskovsky"
								},
								"bug_when": "2011-02-24 12:37:36 +0000",
								"thetext": "Common Vulnerabilities and Exposures assigned an identifier CVE-2011-1067 to\nthe following vulnerability:\n\nslapd (aka ns-slapd) in 389 Directory Server before 1.2.8.a2 does not\nproperly manage the c_timelimit field of the connection table element,\nwhich allows remote attackers to cause a denial of service (daemon\noutage) via Simple Paged Results connections, as demonstrated by using\nmultiple processes to replay TCP sessions, a different vulnerability\nthan CVE-2011-0019.\n\nReferences:\n[1] http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-1067\n[2] http://directory.fedoraproject.org/wiki/Release_Notes\n[3] https://bugzilla.redhat.com/show_bug.cgi?id=668619"
							},
							{
								"isprivate": "0",
								"commentid": "3683980",
								"comment_count": "1",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2011-04-19 09:53:47 +0000",
								"thetext": "Relevant git commit:\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=68d53e3\n\nRich, Noriko, did this affect RH Directory Server 8?"
							},
							{
								"isprivate": "0",
								"commentid": "3684370",
								"comment_count": "2",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-04-19 13:17:42 +0000",
								"thetext": "(In reply to comment #1)\n> Relevant git commit:\n> http://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=68d53e3\n> \n> Rich, Noriko, did this affect RH Directory Server 8?\n\nYes, and we released an errata to fix this in rhds 8.2"
							},
							{
								"isprivate": "0",
								"commentid": "3684607",
								"comment_count": "3",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2011-04-19 14:47:53 +0000",
								"thetext": "(In reply to comment #2)\n> > Rich, Noriko, did this affect RH Directory Server 8?\n> \n> Yes, and we released an errata to fix this in rhds 8.2\n\nI don't see the patch linked in comment #1 applied in the latest 8.2.4 packages from RHSA-2011:0293.  Part of it is not even applicable (there's no pagedresults_cleanup function)."
							},
							{
								"isprivate": "0",
								"commentid": "3684946",
								"comment_count": "4",
								"who": {
									"text": "nhosoi",
									"name": "Noriko Hosoi"
								},
								"bug_when": "2011-04-19 16:26:01 +0000",
								"thetext": "(In reply to comment #3)\n> \n> I don't see the patch linked in comment #1 applied in the latest 8.2.4 packages\n> from RHSA-2011:0293.  Part of it is not even applicable (there's no\n> pagedresults_cleanup function).\n\nRight.  This \"Bug 668619 - slapd stops responding\" was introduced by a preceding fix for 'Bug 567282 - server can not abandon searchRequest of \"simple paged results\"', which is not included in RHDS8.2.  Thus, 8.2 does not have this issue."
							},
							{
								"isprivate": "0",
								"commentid": "3684997",
								"comment_count": "5",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2011-04-19 16:58:57 +0000",
								"thetext": "Thank you, Noriko!\n\nStatement:\n\nNot vulnerable. This issue did not affect Red Hat Directory Server 8 packages."
							}
						]
					},
					{
						"bug_id": "708096",
						"alias": "389_1.2.9",
						"creation_ts": "2011-05-26 18:02:19 +0000",
						"short_desc": "Tracking bug for 389 Directory Server 1.2.9",
						"delta_ts": "2015-01-04 23:48:51 +0000",
						"bug_status": "CLOSED",
						"resolution": "NOTABUG",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"470576",
							"625424",
							"633803",
							"663752",
							"668619",
							"690584",
							"690649",
							"690882",
							"691313",
							"691422",
							"694336",
							"697694",
							"697961",
							"698428",
							"703304",
							"703530",
							"703703",
							"706179",
							"706209",
							"707015",
							"707384",
							"707462",
							"709468",
							"709826",
							"710377",
							"711265",
							"711266",
							"711513",
							"711533",
							"711679",
							"711906",
							"711921",
							"712855",
							"713209",
							"714310",
							"716980",
							"718303",
							"718351",
							"719069",
							"720059",
							"720452",
							"722292",
							"723937",
							"725542",
							"725743",
							"725912",
							"725953",
							"726136",
							"727511",
							"728510",
							"728592",
							"729369",
							"729378",
							"729717",
							"729816",
							"732153",
							"732541",
							"733103",
							"733434",
							"733442",
							"733443",
							"735114",
							"735121",
							"735217",
							"736137"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3762518",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-05-26 18:02:19 +0000"
							},
							{
								"isprivate": "0",
								"commentid": "4285674",
								"comment_count": "1",
								"who": {
									"text": "mkosek",
									"name": "Martin Kosek"
								},
								"bug_when": "2012-01-04 13:22:50 +0000",
								"thetext": "Upstream ticket:\nhttps://fedorahosted.org/389/ticket/40"
							},
							{
								"isprivate": "0",
								"commentid": "6634073",
								"comment_count": "2",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2013-12-18 19:40:52 +0000",
								"thetext": "Closing, as 1.2.9 was released long ago."
							}
						]
					},
					{
						"bug_id": "711513",
						"creation_ts": "2011-06-07 17:21:49 +0000",
						"short_desc": "slapd stops responding",
						"delta_ts": "2015-01-04 23:49:10 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "ZStream",
						"priority": "urgent",
						"bug_severity": "urgent",
						"depends_on": [
							"668619"
						],
						"blocked": [
							{
								"bug_id": "434915",
								"error": "NotPermitted"
							},
							{
								"bug_id": "680121",
								"alias": "CVE-2011-1067",
								"creation_ts": "2011-02-24 12:37:36 +0000",
								"short_desc": "CVE-2011-1067 Directory Server: DoS via Simple Paged Results connections",
								"delta_ts": "2021-02-24 16:27:00 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"keywords": "Security",
								"priority": "low",
								"bug_severity": "low",
								"depends_on": [
									"668619",
									"711513"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3558041",
										"comment_count": "0",
										"who": {
											"text": "jlieskov",
											"name": "Jan Lieskovsky"
										},
										"bug_when": "2011-02-24 12:37:36 +0000",
										"thetext": "Common Vulnerabilities and Exposures assigned an identifier CVE-2011-1067 to\nthe following vulnerability:\n\nslapd (aka ns-slapd) in 389 Directory Server before 1.2.8.a2 does not\nproperly manage the c_timelimit field of the connection table element,\nwhich allows remote attackers to cause a denial of service (daemon\noutage) via Simple Paged Results connections, as demonstrated by using\nmultiple processes to replay TCP sessions, a different vulnerability\nthan CVE-2011-0019.\n\nReferences:\n[1] http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-1067\n[2] http://directory.fedoraproject.org/wiki/Release_Notes\n[3] https://bugzilla.redhat.com/show_bug.cgi?id=668619"
									},
									{
										"isprivate": "0",
										"commentid": "3683980",
										"comment_count": "1",
										"who": {
											"text": "thoger",
											"name": "Tomas Hoger"
										},
										"bug_when": "2011-04-19 09:53:47 +0000",
										"thetext": "Relevant git commit:\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=68d53e3\n\nRich, Noriko, did this affect RH Directory Server 8?"
									},
									{
										"isprivate": "0",
										"commentid": "3684370",
										"comment_count": "2",
										"who": {
											"text": "rmeggins",
											"name": "Rich Megginson"
										},
										"bug_when": "2011-04-19 13:17:42 +0000",
										"thetext": "(In reply to comment #1)\n> Relevant git commit:\n> http://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=68d53e3\n> \n> Rich, Noriko, did this affect RH Directory Server 8?\n\nYes, and we released an errata to fix this in rhds 8.2"
									},
									{
										"isprivate": "0",
										"commentid": "3684607",
										"comment_count": "3",
										"who": {
											"text": "thoger",
											"name": "Tomas Hoger"
										},
										"bug_when": "2011-04-19 14:47:53 +0000",
										"thetext": "(In reply to comment #2)\n> > Rich, Noriko, did this affect RH Directory Server 8?\n> \n> Yes, and we released an errata to fix this in rhds 8.2\n\nI don't see the patch linked in comment #1 applied in the latest 8.2.4 packages from RHSA-2011:0293.  Part of it is not even applicable (there's no pagedresults_cleanup function)."
									},
									{
										"isprivate": "0",
										"commentid": "3684946",
										"comment_count": "4",
										"who": {
											"text": "nhosoi",
											"name": "Noriko Hosoi"
										},
										"bug_when": "2011-04-19 16:26:01 +0000",
										"thetext": "(In reply to comment #3)\n> \n> I don't see the patch linked in comment #1 applied in the latest 8.2.4 packages\n> from RHSA-2011:0293.  Part of it is not even applicable (there's no\n> pagedresults_cleanup function).\n\nRight.  This \"Bug 668619 - slapd stops responding\" was introduced by a preceding fix for 'Bug 567282 - server can not abandon searchRequest of \"simple paged results\"', which is not included in RHDS8.2.  Thus, 8.2 does not have this issue."
									},
									{
										"isprivate": "0",
										"commentid": "3684997",
										"comment_count": "5",
										"who": {
											"text": "thoger",
											"name": "Tomas Hoger"
										},
										"bug_when": "2011-04-19 16:58:57 +0000",
										"thetext": "Thank you, Noriko!\n\nStatement:\n\nNot vulnerable. This issue did not affect Red Hat Directory Server 8 packages."
									}
								]
							},
							{
								"bug_id": "708096",
								"alias": "389_1.2.9",
								"creation_ts": "2011-05-26 18:02:19 +0000",
								"short_desc": "Tracking bug for 389 Directory Server 1.2.9",
								"delta_ts": "2015-01-04 23:48:51 +0000",
								"bug_status": "CLOSED",
								"resolution": "NOTABUG",
								"priority": "high",
								"bug_severity": "high",
								"depends_on": [
									"470576",
									"625424",
									"633803",
									"663752",
									"668619",
									"690584",
									"690649",
									"690882",
									"691313",
									"691422",
									"694336",
									"697694",
									"697961",
									"698428",
									"703304",
									"703530",
									"703703",
									"706179",
									"706209",
									"707015",
									"707384",
									"707462",
									"709468",
									"709826",
									"710377",
									"711265",
									"711266",
									"711513",
									"711533",
									"711679",
									"711906",
									"711921",
									"712855",
									"713209",
									"714310",
									"716980",
									"718303",
									"718351",
									"719069",
									"720059",
									"720452",
									"722292",
									"723937",
									"725542",
									"725743",
									"725912",
									"725953",
									"726136",
									"727511",
									"728510",
									"728592",
									"729369",
									"729378",
									"729717",
									"729816",
									"732153",
									"732541",
									"733103",
									"733434",
									"733442",
									"733443",
									"735114",
									"735121",
									"735217",
									"736137"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3762518",
										"comment_count": "0",
										"who": {
											"text": "rmeggins",
											"name": "Rich Megginson"
										},
										"bug_when": "2011-05-26 18:02:19 +0000"
									},
									{
										"isprivate": "0",
										"commentid": "4285674",
										"comment_count": "1",
										"who": {
											"text": "mkosek",
											"name": "Martin Kosek"
										},
										"bug_when": "2012-01-04 13:22:50 +0000",
										"thetext": "Upstream ticket:\nhttps://fedorahosted.org/389/ticket/40"
									},
									{
										"isprivate": "0",
										"commentid": "6634073",
										"comment_count": "2",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2013-12-18 19:40:52 +0000",
										"thetext": "Closing, as 1.2.9 was released long ago."
									}
								]
							},
							{
								"bug_id": "714614",
								"creation_ts": "2011-06-20 09:12:15 +0000",
								"short_desc": "slapd stops responding",
								"delta_ts": "2015-01-04 23:49:30 +0000",
								"bug_status": "CLOSED",
								"resolution": "NOTABUG",
								"keywords": "ZStream",
								"priority": "urgent",
								"bug_severity": "urgent",
								"depends_on": [
									"711513"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3822210",
										"comment_count": "0",
										"who": {
											"text": "pm-rhel",
											"name": "RHEL Program Management"
										},
										"bug_when": "2011-06-20 09:12:15 +0000",
										"thetext": "This bug has been copied from bug #711513 and has been proposed\nto be backported to 6.1 z-stream (EUS)."
									},
									{
										"isprivate": "0",
										"commentid": "4004138",
										"comment_count": "4",
										"who": {
											"text": "amsharma",
											"name": "Amita Sharma"
										},
										"bug_when": "2011-09-08 11:27:20 +0000",
										"thetext": "Clone https://bugzilla.redhat.com/show_bug.cgi?id=668619 is already VERIFIED"
									}
								]
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:1711",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "4004135",
								"comment_count": "5",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-09-08 11:27:00 +0000",
								"thetext": "Clone https://bugzilla.redhat.com/show_bug.cgi?id=668619 is already VERIFIED"
							},
							{
								"isprivate": "0",
								"commentid": "4197664",
								"comment_count": "6",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-12-06 17:49:02 +0000",
								"thetext": "Since the problem described in this bug report should be\nresolved in a recent advisory, it has been closed with a\nresolution of ERRATA.\n\nFor information on the advisory, and where to find the updated\nfiles, follow the link below.\n\nIf the solution does not work for you, open a new bug report.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-1711.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3465713",
						"comment_count": "0",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-01-10 22:20:37 +0000",
						"thetext": "Created attachment 472701\nreplay script, configs, access log, strace results\n\nDescription of problem:\n\nslapd stops responding to queries; the TCP port remains open, though new\nconnections are unable to bind() or issue LDAP queries. This condition\npersists until slapd is shutdown and restarted.\n\nVersion-Release number of selected component (if applicable):\n\nStock and up-to-date RHEL system; RPM on clean install from EPEL.\n\n# cat /etc/redhat-release \nRed Hat Enterprise Linux Server release 5.5 (Tikanga)\n# rpm -qa | grep 389\n389-console-1.1.4-1.el5\n389-dsgw-1.1.5-1.el5\n389-ds-base-1.2.7.5-1.el5\n389-admin-1.1.13-1.el5\n389-admin-console-1.1.5-1.el5\n389-admin-console-doc-1.1.5-1.el5\n389-ds-1.2.1-1.el5\n389-adminutil-1.1.8-4.el5\n389-ds-console-1.2.3-1.el5\n389-ds-console-doc-1.2.3-1.el5\n\nHow reproducible:\n\nDifficult: requires multiple processes replaying production TCP sessions\nsaved from tcpdump to cause the wedge. A single replay process causes no\nissue, nor does multiple processes replicating the slapd log via\nldapsearch against the server.\n\nSteps to Reproduce:\n\n1. Clean install of a standalone LDAP server, minor configuration tweaks\n   to enable Kerberos support, increase file descriptors, allow\n   anonymous binds. (See dirsrv.sysconfig, dse.ldif, attached.)\n2. Collect production LDAP traffic (actual client requests against\n   the current LDAP servers, which run an older fedora-ds release\n   that do not exhibit this bug): `tcpdump -vv -c 100000 -s 0 -w ldap-\n   traffic port 389`\n3. Run strace against slapd-* process on server.\n4. Replay production LDAP traffic against test standalone server (via\n   ldap-tcpdump-replay script, attached). Requires multiple runs of the\n   script, single run does not suffice?\n5. Wait for server to stop responding...\n\nStarted strace at 20:45 UTC and the test traffic at around then; server\nstopped responding and was automatically restarted by an every-15-\nseconds health check connecting via 127.0.0.1 that saw no problems at\n~20:47:30 but found an unresponsive server at ~20:47:45."
					},
					{
						"isprivate": "0",
						"commentid": "3465727",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-10 22:38:58 +0000",
						"thetext": "This looks like a duplicate of https://bugzilla.redhat.com/show_bug.cgi?id=668548"
					},
					{
						"isprivate": "0",
						"commentid": "3465731",
						"comment_count": "2",
						"who": {
							"text": "thendricks",
							"name": "Todd Hendricks"
						},
						"bug_when": "2011-01-10 22:41:14 +0000",
						"thetext": "I have experienced this issue as well under production load.  I would also add that while the TCP port does remain open, connections to it are immediately disconnected.\n\n# cat /etc/redhat-release \nRed Hat Enterprise Linux Server release 5.5 (Tikanga)\n\n# rpm -qa | grep 389\n389-admin-1.1.13-1.el5\n389-ds-console-doc-1.2.3-1.el5\n389-adminutil-1.1.8-4.el5\n389-console-1.1.4-1.el5\n389-dsgw-1.1.5-1.el5\n389-ds-console-1.2.3-1.el5\n389-admin-console-doc-1.1.5-1.el5\n389-ds-base-1.2.7.5-1.el5\n389-admin-console-1.1.5-1.el5\n389-ds-1.2.1-1.el5\n\naccess:\n\n[10/Jan/2011:12:04:26 -0600] conn=187 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:26 -0600] conn=187 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:26 -0600] conn=188 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:26 -0600] conn=188 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:26 -0600] conn=189 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:26 -0600] conn=189 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:27 -0600] conn=190 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:27 -0600] conn=190 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:27 -0600] conn=191 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:27 -0600] conn=191 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:30 -0600] conn=192 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:30 -0600] conn=192 op=-1 fd=69 closed - T2\n[10/Jan/2011:12:04:31 -0600] conn=193 fd=69 slot=69 connection from 172.16.x.x to 172.16.x.x\n[10/Jan/2011:12:04:31 -0600] conn=193 op=-1 fd=69 closed - T2\n\nerror:\n\n[10/Jan/2011:12:04:26 -0600] - new connection on 69\n[10/Jan/2011:12:04:26 -0600] - activity on 69r\n[10/Jan/2011:12:04:26 -0600] - new connection on 69\n[10/Jan/2011:12:04:26 -0600] - activity on 69r\n[10/Jan/2011:12:04:26 -0600] - new connection on 69\n[10/Jan/2011:12:04:26 -0600] - activity on 69r\n[10/Jan/2011:12:04:27 -0600] - new connection on 69\n[10/Jan/2011:12:04:27 -0600] - activity on 69r\n[10/Jan/2011:12:04:27 -0600] - new connection on 69\n[10/Jan/2011:12:04:27 -0600] - activity on 69r\n[10/Jan/2011:12:04:30 -0600] - new connection on 69\n[10/Jan/2011:12:04:31 -0600] - new connection on 69\n[10/Jan/2011:12:04:31 -0600] - activity on 69r"
					},
					{
						"isprivate": "0",
						"commentid": "3510195",
						"comment_count": "3",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-31 17:24:51 +0000",
						"thetext": "*** Bug 668548 has been marked as a duplicate of this bug. ***"
					},
					{
						"isprivate": "0",
						"commentid": "3510570",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-31 18:57:19 +0000",
						"thetext": "Created attachment 476252\ngit patch file (master)\n\nDescription: The server uses c_timelimit field in the connection\ntable element to check the staled Simple Paged Results request.\nThe field is supposed to be cleaned up when the staled Simple\nPaged Results connection is disconnected.  But the cleanup was\nsometimes incomplete.  It causes the following requests which\nhappens to acquire the same connection table element timed out.\nThis patch forces to clean up the c_timelimit every time the\nconnection table is acquired and renewed.  Also, the timeout\ncheck is done only for the Simple Paged Results connection."
					},
					{
						"isprivate": "0",
						"commentid": "3510591",
						"comment_count": "6",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-01-31 19:06:19 +0000",
						"thetext": "Reviewed by Rich (Thank you!!!)\n\nPushed to master.\n\n$ git merge 668619\nUpdating 57dcdf1..68d53e3\nFast-forward\n ldap/servers/slapd/connection.c   |    2 ++\n ldap/servers/slapd/daemon.c       |    3 ++-\n ldap/servers/slapd/pagedresults.c |    4 ++--\n 3 files changed, 6 insertions(+), 3 deletions(-)\n\n$ git push\nCounting objects: 15, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (8/8), done.\nWriting objects: 100% (8/8), 1.11 KiB, done.\nTotal 8 (delta 6), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   57dcdf1..68d53e3  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3526149",
						"comment_count": "7",
						"who": {
							"text": "diego",
							"name": "Diego Woitasen"
						},
						"bug_when": "2011-02-08 11:59:35 +0000",
						"thetext": "I had the same problem. Slapd stops responding after a few minutes of started. I've applied the patch and it's been running for 24 hours without any problem."
					},
					{
						"isprivate": "0",
						"commentid": "3526785",
						"comment_count": "8",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-08 16:56:09 +0000",
						"thetext": "(In reply to comment #7)\n> I had the same problem. Slapd stops responding after a few minutes of started.\n> I've applied the patch and it's been running for 24 hours without any problem.\n\nThank you for your input!  Please let us know if you run into the problem again."
					},
					{
						"isprivate": "0",
						"commentid": "3531623",
						"comment_count": "9",
						"who": {
							"text": "samh.work+rhb",
							"name": "Sam Hartsfield"
						},
						"bug_when": "2011-02-10 18:33:01 +0000",
						"thetext": "I've also tested this on Fedora 13 (I installed 1.2.8.a2), and it seems to be running fine. Previously it was \"crashing\" very frequently (i.e. not responding, with the T2 messages); RHEL4 clients seemed especially hard on it."
					},
					{
						"isprivate": "0",
						"commentid": "3531637",
						"comment_count": "10",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-02-10 18:41:41 +0000",
						"thetext": "No hang on RHEL 5.5 with 1.2.8 a2, but instead segmentation faults when tested with replayed production traffic. Gathering gdb output..."
					},
					{
						"isprivate": "0",
						"commentid": "3531844",
						"comment_count": "11",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-02-10 21:05:13 +0000",
						"thetext": "Created attachment 478119\ngdb logs\n\ngdb traces from two crashes of 389-ds-base-1.2.8-0.2.a2.el5 in response to replayed production traffic."
					},
					{
						"isprivate": "0",
						"commentid": "3531869",
						"comment_count": "12",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-10 21:21:52 +0000",
						"thetext": "(In reply to comment #11)\n> Created attachment 478119 [details]\n> gdb logs\n> \n> gdb traces from two crashes of 389-ds-base-1.2.8-0.2.a2.el5 in response to\n> replayed production traffic.\n\nThanks.  The stack looks corrupted.  Are you using SASL/GSSAPI Kerberos authentication?  Can you attach the last few lines from your errors and access logs before the crash?"
					},
					{
						"isprivate": "0",
						"commentid": "3531952",
						"comment_count": "13",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-02-10 21:51:54 +0000",
						"thetext": "Yes, the servers are configured for Kerberos auth (via http://directory.fedoraproject.org/wiki/Howto:Kerberos). Our existing fedora-ds-1.0.4-1.RHEL4 production LDAP servers also use Kerberos auth, and do not exhibit any problems (they were setup well before my time here, though).\n\nErrors shows just various peer rests, nothing unique at time of the crash.\n\n[10/Feb/2011:18:18:01 +0000] - PR_Write(118) Netscape Portable Runtime error -59\n61 (TCP connection reset by peer.)\n[10/Feb/2011:18:18:02 +0000] - PR_Write(79) Netscape Portable Runtime error -596\n1 (TCP connection reset by peer.)\n\nAccess shows nothing exciting, though that is buffered. Trying again with unbuffered logs and a higher error log level."
					},
					{
						"isprivate": "0",
						"commentid": "3533323",
						"comment_count": "14",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-02-11 18:26:22 +0000",
						"thetext": "Unbuffered logging appears to avoid the segmentation faults (for an overnight run of test traffic; buffered logging leads to crashes within minutes), though hobbles performance to the log write speed. If production load is near or beyond that limit, client requests block or timeout, which is not ideal. Shutting down the unbuffered logging ns-slapd took 10 (!) minutes after all test traffic was cut off."
					},
					{
						"isprivate": "0",
						"commentid": "3533333",
						"comment_count": "15",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-11 18:36:17 +0000",
						"thetext": "Yeah, that's why we buffer access logging by default.  You can use a named pipe script for the access log instead - http://directory.fedoraproject.org/wiki/Named_Pipe_Log_Script"
					},
					{
						"isprivate": "0",
						"commentid": "3561764",
						"comment_count": "16",
						"who": {
							"text": "jmates",
							"name": "Jeremy Mates"
						},
						"bug_when": "2011-02-26 01:10:58 +0000",
						"thetext": "Created attachment 481105\ngdb trace from 1.2.8 a3 segfault\n\ngdb trace from 1.2.8 a3 segfault added (alpha 3 is harder to segfault than alpha 2)."
					},
					{
						"isprivate": "0",
						"commentid": "3561786",
						"comment_count": "17",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-26 02:20:40 +0000",
						"thetext": "Centos5?  32-bit or 64-bit?  How are you generating the load?  If you are using some scripts or load client, is it possible we could get a copy?"
					},
					{
						"isprivate": "0",
						"commentid": "3580825",
						"comment_count": "18",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-03-08 22:13:07 +0000",
						"thetext": "I've opened bug 683250 to track the crashing issue initially reported in\ncomment#10.  Please use that bug instead of this one."
					},
					{
						"isprivate": "0",
						"commentid": "3749528",
						"comment_count": "19",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-20 12:40:55 +0000",
						"thetext": "using the steps mentioned at comment 5.\nand... I am facing the same T2 error.\n\nActually,first I tested the given script against a suffix which is having only 6-7 entries.. No issues found there.\n\nBut when I went ahead and executed the script attached by you in the bug with the suffix having entries more than 50,000.. It crashes..\n\nhere are the few lines from access log :\n[20/May/2011:15:20:02 +051800] conn=13 op=1 SRCH base=\"dc=example,dc=com\" scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n[20/May/2011:15:20:07 +051800] conn=13 op=1 RESULT err=3 tag=101 nentries=0 etime=8 notes=U,P\n[20/May/2011:15:20:00 +051800] conn=94 fd=156 slot=156 connection from 127.0.0.1 to 127.0.0.1\n[20/May/2011:15:20:07 +051800] conn=63 op=-1 fd=125 closed - T2\n[20/May/2011:15:20:07 +051800] conn=59 op=-1 fd=121 closed - T2\n[20/May/2011:15:20:07 +051800] conn=55 op=-1 fd=117 closed - T2\n[20/May/2011:15:20:07 +051800] conn=51 op=-1 fd=113 closed - T2\n[20/May/2011:15:20:07 +051800] conn=49 op=-1 fd=111 closed - T2\n[20/May/2011:15:20:07 +051800] conn=47 op=-1 fd=109 closed - T2\n[20/May/2011:15:20:07 +051800] conn=38 op=-1 fd=100 closed - T2\n[20/May/2011:15:20:07 +051800] conn=95 fd=68 slot=68 connection from 127.0.0.1 to 127.0.0.1\n[20/May/2011:15:20:07 +051800] conn=96 fd=73 slot=73 connection from 127.0.0.1 to 127.0.0.1\n[20/May/2011:15:20:00 +051800] conn=47 op=1 RESULT err=0 tag=101 nentries=5 etime=1 notes=U,P\n[20/May/2011:15:20:07 +051800] conn=74 op=1 SRCH base=\"dc=example,dc=com\" scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n[20/May/2011:15:20:07 +051800] conn=74 op=1 RESULT err=0 tag=101 nentries=5 etime=0 notes=U,P\n[20/May/2011:15:20:07 +051800] conn=73 op=1 SRCH base=\"dc=example,dc=com\" scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n[20/May/2011:15:20:07 +051800] conn=73 op=1 RESULT err=0 tag=101 nentries=5 etime=0 notes=U,P\n\n\n[20/May/2011:15:20:08 +051800] conn=65 op=2 UNBIND\n[20/May/2011:15:20:08 +051800] conn=65 op=2 fd=127 closed - U1\n[20/May/2011:15:20:08 +051800] conn=64 op=2 UNBIND\n[20/May/2011:15:20:08 +051800] conn=64 op=2 fd=126 closed - U1\n[20/May/2011:15:20:08 +051800] conn=62 op=2 UNBIND\n[20/May/2011:15:20:08 +051800] conn=62 op=2 fd=124 closed - U1\n[20/May/2011:15:20:08 +051800] conn=61 op=3 UNBIND\n[20/May/2011:15:20:08 +051800] conn=61 op=3 fd=123 closed - U1\n[20/May/2011:15:20:08 +051800] conn=58 op=2 UNBIND\n[20/May/2011:15:20:08 +051800] conn=58 op=2 fd=120 closed - U1\n[20/May/2011:15:20:07 +051800] conn=97 fd=77 slot=77 connection from 127.0.0.1 to 1\n\n\n[20/May/2011:15:20:08 +051800] conn=109 fd=125 slot=125 connection from 127.0.0.1 to 127.0.0.1\n[20/May/2011:15:20:09 +051800] conn=91 op=-1 fd=153 closed - T2\n[20/May/2011:15:20:09 +051800] conn=86 op=-1 fd=148 closed - T2\n[20/May/2011:15:20:09 +051800] conn=74 op=-1 fd=136 closed - T2\n[20/May/2011:15:20:09 +051800] conn=73 op=-1 fd=135 closed - T2\n[20/May/2011:15:20:09 +051800] conn=71 op=-1 fd=133 closed - T2\n[20/May/2011:15:20:09 +051800] conn=70 op=-1 fd=132 closed - T2\n[20/May/2011:15:20:09 +051800] conn=69 op=-1 fd=131 closed - T2\n[20/May/2011:15:20:09 +051800] conn=68 op=-1 fd=130 closed - T2\n\n\n20/May/2011:15:20:11 +051800] conn=28 op=1 RESULT err=3 tag=101 nentries=0 etime=12 notes=U,P\n[20/May/2011:15:20:11 +051800] conn=14 op=2 UNBIND\n[20/May/2011:15:20:11 +051800] conn=14 op=2 fd=76 closed - U1\n[20/May/2011:15:20:11 +051800] conn=13 op=2 UNBIND\n[20/May/2011:15:20:11 +051800] conn=13 op=2 fd=75 closed - U1\n[20/May/2011:15:20:11 +051800] conn=12 op=2 UNBIND\n[20/May/2011:15:20:11 +051800] conn=12 op=2 fd=74 closed - U1\n[20/May/2011:15:20:11 +051800] conn=10 op=2 UNBIND\n[20/May/2011:15:20:11 +051800] conn=10 op=2 fd=72 closed - U1\n\n\nFrom errors log ;\n[20/May/2011:14:36:24 +051800] - PR_Write(64) Netscape Portable Runtime error -5961 (TCP connection reset by peer.)\n[20/May/2011:15:13:50 +051800] - slapd shutting down - signaling operation threads\n[20/May/2011:15:13:50 +051800] - slapd shutting down - closing down internal subsystems and plugins\n[20/May/2011:15:13:52 +051800] - Waiting for 4 database threads to stop\n[20/May/2011:15:13:52 +051800] - All database threads now stopped\n[20/May/2011:15:13:53 +051800] - slapd stopped.\n[20/May/2011:15:13:56 +051800] - 389-Directory/1.2.8.3 B2011.123.1759 starting up\n[20/May/2011:15:13:56 +051800] - slapd started.  Listening on All Interfaces port 389 for LDAP requests\n[20/May/2011:15:13:56 +051800] - Listening on All Interfaces port 636 for LDAPS requests\n\n\nRequest you to please guide here.\n\nThanks and Regards,\nAmita"
					},
					{
						"isprivate": "0",
						"commentid": "3749734",
						"comment_count": "20",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-20 14:18:07 +0000",
						"thetext": "(In reply to comment #19)\n> using the steps mentioned at comment 5.\n> and... I am facing the same T2 error.\n> \n> Actually,first I tested the given script against a suffix which is having only\n> 6-7 entries.. No issues found there.\n> \n> But when I went ahead and executed the script attached by you in the bug with\n> the suffix having entries more than 50,000.. It crashes..\n\nWhat makes you think it crashes?  Are you talking about the test program or the directory server?  From the errors log below, the server shuts down cleanly and starts up cleanly - no crash there.\n\nThe original bug was that the server would stop responding to new requests after some period of activity.  That is, ldapsearch would fail, but the server would be running.  Are you able to reproduce that problem?\n\nNote that it is ok to get T2 errors - if the client is hung or there is a lot of network congestion, the server can timeout attempting to read/write to the client.  If this is a common occurrence for the customer, we usually recommend increasing the idle timeout.\n\n> \n> here are the few lines from access log :\n> [20/May/2011:15:20:02 +051800] conn=13 op=1 SRCH base=\"dc=example,dc=com\"\n> scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n> [20/May/2011:15:20:07 +051800] conn=13 op=1 RESULT err=3 tag=101 nentries=0\n> etime=8 notes=U,P\n> [20/May/2011:15:20:00 +051800] conn=94 fd=156 slot=156 connection from\n> 127.0.0.1 to 127.0.0.1\n> [20/May/2011:15:20:07 +051800] conn=63 op=-1 fd=125 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=59 op=-1 fd=121 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=55 op=-1 fd=117 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=51 op=-1 fd=113 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=49 op=-1 fd=111 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=47 op=-1 fd=109 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=38 op=-1 fd=100 closed - T2\n> [20/May/2011:15:20:07 +051800] conn=95 fd=68 slot=68 connection from 127.0.0.1\n> to 127.0.0.1\n> [20/May/2011:15:20:07 +051800] conn=96 fd=73 slot=73 connection from 127.0.0.1\n> to 127.0.0.1\n> [20/May/2011:15:20:00 +051800] conn=47 op=1 RESULT err=0 tag=101 nentries=5\n> etime=1 notes=U,P\n> [20/May/2011:15:20:07 +051800] conn=74 op=1 SRCH base=\"dc=example,dc=com\"\n> scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n> [20/May/2011:15:20:07 +051800] conn=74 op=1 RESULT err=0 tag=101 nentries=5\n> etime=0 notes=U,P\n> [20/May/2011:15:20:07 +051800] conn=73 op=1 SRCH base=\"dc=example,dc=com\"\n> scope=2 filter=\"(cn=*)\" attrs=\"distinguishedName\"\n> [20/May/2011:15:20:07 +051800] conn=73 op=1 RESULT err=0 tag=101 nentries=5\n> etime=0 notes=U,P\n> \n> \n> [20/May/2011:15:20:08 +051800] conn=65 op=2 UNBIND\n> [20/May/2011:15:20:08 +051800] conn=65 op=2 fd=127 closed - U1\n> [20/May/2011:15:20:08 +051800] conn=64 op=2 UNBIND\n> [20/May/2011:15:20:08 +051800] conn=64 op=2 fd=126 closed - U1\n> [20/May/2011:15:20:08 +051800] conn=62 op=2 UNBIND\n> [20/May/2011:15:20:08 +051800] conn=62 op=2 fd=124 closed - U1\n> [20/May/2011:15:20:08 +051800] conn=61 op=3 UNBIND\n> [20/May/2011:15:20:08 +051800] conn=61 op=3 fd=123 closed - U1\n> [20/May/2011:15:20:08 +051800] conn=58 op=2 UNBIND\n> [20/May/2011:15:20:08 +051800] conn=58 op=2 fd=120 closed - U1\n> [20/May/2011:15:20:07 +051800] conn=97 fd=77 slot=77 connection from 127.0.0.1\n> to 1\n> \n> \n> [20/May/2011:15:20:08 +051800] conn=109 fd=125 slot=125 connection from\n> 127.0.0.1 to 127.0.0.1\n> [20/May/2011:15:20:09 +051800] conn=91 op=-1 fd=153 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=86 op=-1 fd=148 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=74 op=-1 fd=136 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=73 op=-1 fd=135 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=71 op=-1 fd=133 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=70 op=-1 fd=132 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=69 op=-1 fd=131 closed - T2\n> [20/May/2011:15:20:09 +051800] conn=68 op=-1 fd=130 closed - T2\n> \n> \n> 20/May/2011:15:20:11 +051800] conn=28 op=1 RESULT err=3 tag=101 nentries=0\n> etime=12 notes=U,P\n> [20/May/2011:15:20:11 +051800] conn=14 op=2 UNBIND\n> [20/May/2011:15:20:11 +051800] conn=14 op=2 fd=76 closed - U1\n> [20/May/2011:15:20:11 +051800] conn=13 op=2 UNBIND\n> [20/May/2011:15:20:11 +051800] conn=13 op=2 fd=75 closed - U1\n> [20/May/2011:15:20:11 +051800] conn=12 op=2 UNBIND\n> [20/May/2011:15:20:11 +051800] conn=12 op=2 fd=74 closed - U1\n> [20/May/2011:15:20:11 +051800] conn=10 op=2 UNBIND\n> [20/May/2011:15:20:11 +051800] conn=10 op=2 fd=72 closed - U1\n> \n> \n> From errors log ;\n> [20/May/2011:14:36:24 +051800] - PR_Write(64) Netscape Portable Runtime error\n> -5961 (TCP connection reset by peer.)\n> [20/May/2011:15:13:50 +051800] - slapd shutting down - signaling operation\n> threads\n> [20/May/2011:15:13:50 +051800] - slapd shutting down - closing down internal\n> subsystems and plugins\n> [20/May/2011:15:13:52 +051800] - Waiting for 4 database threads to stop\n> [20/May/2011:15:13:52 +051800] - All database threads now stopped\n> [20/May/2011:15:13:53 +051800] - slapd stopped.\n> [20/May/2011:15:13:56 +051800] - 389-Directory/1.2.8.3 B2011.123.1759 starting\n> up\n> [20/May/2011:15:13:56 +051800] - slapd started.  Listening on All Interfaces\n> port 389 for LDAP requests\n> [20/May/2011:15:13:56 +051800] - Listening on All Interfaces port 636 for LDAPS\n> requests\n> \n> \n> Request you to please guide here.\n> \n> Thanks and Regards,\n> Amita"
					},
					{
						"isprivate": "0",
						"commentid": "3754973",
						"comment_count": "22",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-24 02:08:38 +0000",
						"thetext": "When you hit the bug, are you able to, in another window, run ldapsearch against the directory server?  If so, then the server is not hung, and you have not reproduced the problem.\n\nI tried running the script.  For one, on my system, I got a lot of errors like this:\n/share/scripts/bug668619.sh: fork: retry: Resource temporarily unavailable\n\nFor another - the script runs with -E pr=5 - by default, ldapsearch will prompt for the next page, so I have several hundred ldapsearch processes waiting for input on stdin - is this right?  I guess the purpose of the test is to leave several hundred paged searches unfinished?  Otherwise, they might finish before the timeout is hit."
					},
					{
						"isprivate": "0",
						"commentid": "3870759",
						"comment_count": "30",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-07-07 08:58:06 +0000",
						"thetext": "Hi Rich and Noriko,\n\nI am using attached script - \"script to reproduce the problem\" to verify.\n\n1). I am getting below after some time :\nldap_result: Can't contact LDAP server (-1)\n# extended LDIF\n#\n# LDAPv3\n# base <dc=example,dc=com> with scope subtree\n# filter: (cn=*)\n# requesting: dn \n# with pagedResults control: size=5\n#\n\nldap_result: Can't contact LDAP server (-1)\n# extended LDIF\n#\n# LDAPv3\n# base <dc=example,dc=com> with scope subtree\n# filter: (cn=*)\n# requesting: dn \n# with pagedResults control: size=5\n#\n\nldap_result: Can't contact LDAP server (-1)\n# extended LDIF\n#\n# LDAPv3\n# base <dc=example,dc=com> with scope subtree\n# filter: (cn=*)\n# requesting: dn \n# with pagedResults control: size=5\n#\n\nldap_result: Can't contact LDAP server (-1)\n\nAlso I was not able to come out of this loop, It was infinite.\nControl+C was fail.\n\n2. I am able to execute ldapsearch on another window successfully.\n\n3. Access logs shows some T2 :\n[07/Jul/2011:14:15:22 +051800] conn=142 op=-1 fd=164 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=141 op=-1 fd=163 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=140 op=-1 fd=162 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=139 op=-1 fd=136 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=138 op=-1 fd=161 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=137 op=-1 fd=160 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=136 op=-1 fd=159 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=135 op=-1 fd=158 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=134 op=-1 fd=157 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=133 op=-1 fd=156 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=131 op=-1 fd=154 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=130 op=-1 fd=153 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=129 op=-1 fd=152 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=128 op=-1 fd=151 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=127 op=-1 fd=150 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=126 op=-1 fd=149 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=125 op=-1 fd=148 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=124 op=-1 fd=147 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=123 op=-1 fd=146 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=121 op=-1 fd=145 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=120 op=-1 fd=144 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=119 op=-1 fd=143 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=118 op=-1 fd=142 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=117 op=-1 fd=141 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=116 op=-1 fd=140 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=115 op=-1 fd=139 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=114 op=-1 fd=138 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=113 op=-1 fd=137 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=112 op=-1 fd=112 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=110 op=-1 fd=135 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=109 op=-1 fd=134 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=108 op=-1 fd=133 closed - T2\n[07/Jul/2011:14:15:22 +051800] conn=106 op=-1 fd=131 closed - T2\n                                                                  \nIs it as expected and can be marked as VERIFIED?\n\nI am testing with below build --\n[root@rheltest ~]# rpm -qa | grep 389\n389-console-1.1.7-1.el6.noarch\n389-ds-console-doc-1.2.6-1.el6.noarch\n389-ds-base-devel-1.2.8.2-1.el6_1.6.x86_64\n389-adminutil-1.1.14-1.el6.x86_64\n389-admin-console-1.1.7-1.el6.noarch\n389-adminutil-devel-1.1.14-1.el6.x86_64\n389-ds-base-debuginfo-1.2.8.2-1.el6_1.3.x86_64\n389-ds-base-libs-1.2.8.2-1.el6_1.6.x86_64\n389-ds-base-1.2.8.2-1.el6_1.6.x86_64\n389-ds-1.2.1-2.el6.noarch\n389-admin-1.1.20-1.el6.x86_64\n389-admin-console-doc-1.1.7-1.el6.noarch\n389-ds-console-1.2.6-1.el6.noarch\n[root@rheltest ~]# rpm -qa | grep redhat\nredhat-ds-admin-9.0.0-0.2.el6.x86_64\nredhat-idm-console-9.0.0-1.el6.x86_64\nredhat-logos-60.0.14-1.el6.noarch\nredhat-menus-14.0.0-3.el6.noarch\nredhat-ds-console-9.0.0-1.el6.noarch\nredhat-ds-console-doc-9.0.0-1.el6.noarch\nredhat-lsb-4.0-3.el6.x86_64\nredhat-ds-base-9.0.0-0.17.el6dsrv.x86_64\nredhat-admin-console-9.0.0-1.el6.noarch\nredhat-admin-console-doc-9.0.0-1.el6.noarch\nredhat-bookmarks-6-1.el6.noarch\nredhat-lsb-graphics-4.0-3.el6.x86_64\nredhat-lsb-printing-4.0-3.el6.x86_64\nredhat-ds-9.0.0-1.el6.x86_64\nredhat-indexhtml-6-1.el6.noarch\nredhat-release-server-6Server-6.1.0.2.el6.x86_64"
					},
					{
						"isprivate": "0",
						"commentid": "3871451",
						"comment_count": "31",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-07-07 14:38:07 +0000",
						"thetext": "(In reply to comment #30)\n> Hi Rich and Noriko,\n> \n> I am using attached script - \"script to reproduce the problem\" to verify.\n> \n> 1). I am getting below after some time :\n> ldap_result: Can't contact LDAP server (-1)\n> # extended LDIF\n> #\n> # LDAPv3\n> # base <dc=example,dc=com> with scope subtree\n> # filter: (cn=*)\n> # requesting: dn \n> # with pagedResults control: size=5\n> #\n> \n> ldap_result: Can't contact LDAP server (-1)\n> # extended LDIF\n> #\n> # LDAPv3\n> # base <dc=example,dc=com> with scope subtree\n> # filter: (cn=*)\n> # requesting: dn \n> # with pagedResults control: size=5\n> #\n> \n> ldap_result: Can't contact LDAP server (-1)\n> # extended LDIF\n> #\n> # LDAPv3\n> # base <dc=example,dc=com> with scope subtree\n> # filter: (cn=*)\n> # requesting: dn \n> # with pagedResults control: size=5\n> #\n> \n> ldap_result: Can't contact LDAP server (-1)\n> \n> Also I was not able to come out of this loop, It was infinite.\n> Control+C was fail.\n> \n> 2. I am able to execute ldapsearch on another window successfully.\n\nOk.  Then the bug is fixed.  The other things are ok, as long as you can connect to the server from another process.\n\n> \n> 3. Access logs shows some T2 :\n> [07/Jul/2011:14:15:22 +051800] conn=142 op=-1 fd=164 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=141 op=-1 fd=163 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=140 op=-1 fd=162 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=139 op=-1 fd=136 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=138 op=-1 fd=161 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=137 op=-1 fd=160 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=136 op=-1 fd=159 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=135 op=-1 fd=158 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=134 op=-1 fd=157 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=133 op=-1 fd=156 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=131 op=-1 fd=154 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=130 op=-1 fd=153 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=129 op=-1 fd=152 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=128 op=-1 fd=151 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=127 op=-1 fd=150 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=126 op=-1 fd=149 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=125 op=-1 fd=148 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=124 op=-1 fd=147 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=123 op=-1 fd=146 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=121 op=-1 fd=145 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=120 op=-1 fd=144 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=119 op=-1 fd=143 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=118 op=-1 fd=142 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=117 op=-1 fd=141 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=116 op=-1 fd=140 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=115 op=-1 fd=139 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=114 op=-1 fd=138 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=113 op=-1 fd=137 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=112 op=-1 fd=112 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=110 op=-1 fd=135 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=109 op=-1 fd=134 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=108 op=-1 fd=133 closed - T2\n> [07/Jul/2011:14:15:22 +051800] conn=106 op=-1 fd=131 closed - T2\n> \n> Is it as expected and can be marked as VERIFIED?\n> \n> I am testing with below build --\n> [root@rheltest ~]# rpm -qa | grep 389\n> 389-console-1.1.7-1.el6.noarch\n> 389-ds-console-doc-1.2.6-1.el6.noarch\n> 389-ds-base-devel-1.2.8.2-1.el6_1.6.x86_64\n> 389-adminutil-1.1.14-1.el6.x86_64\n> 389-admin-console-1.1.7-1.el6.noarch\n> 389-adminutil-devel-1.1.14-1.el6.x86_64\n> 389-ds-base-debuginfo-1.2.8.2-1.el6_1.3.x86_64\n> 389-ds-base-libs-1.2.8.2-1.el6_1.6.x86_64\n> 389-ds-base-1.2.8.2-1.el6_1.6.x86_64\n> 389-ds-1.2.1-2.el6.noarch\n> 389-admin-1.1.20-1.el6.x86_64\n> 389-admin-console-doc-1.1.7-1.el6.noarch\n> 389-ds-console-1.2.6-1.el6.noarch\n> [root@rheltest ~]# rpm -qa | grep redhat\n> redhat-ds-admin-9.0.0-0.2.el6.x86_64\n> redhat-idm-console-9.0.0-1.el6.x86_64\n> redhat-logos-60.0.14-1.el6.noarch\n> redhat-menus-14.0.0-3.el6.noarch\n> redhat-ds-console-9.0.0-1.el6.noarch\n> redhat-ds-console-doc-9.0.0-1.el6.noarch\n> redhat-lsb-4.0-3.el6.x86_64\n> redhat-ds-base-9.0.0-0.17.el6dsrv.x86_64\n> redhat-admin-console-9.0.0-1.el6.noarch\n> redhat-admin-console-doc-9.0.0-1.el6.noarch\n> redhat-bookmarks-6-1.el6.noarch\n> redhat-lsb-graphics-4.0-3.el6.x86_64\n> redhat-lsb-printing-4.0-3.el6.x86_64\n> redhat-ds-9.0.0-1.el6.x86_64\n> redhat-indexhtml-6-1.el6.noarch\n> redhat-release-server-6Server-6.1.0.2.el6.x86_64"
					},
					{
						"isprivate": "0",
						"commentid": "3872768",
						"comment_count": "32",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-07-08 06:43:04 +0000",
						"thetext": "Based on comment#31, I am marking the bug as VERIFIED."
					},
					{
						"isprivate": "0",
						"commentid": "17121464",
						"comment_count": "34",
						"who": {
							"text": "timothysykestss",
							"name": "Timothy Sykes"
						},
						"bug_when": "2023-03-16 07:19:13 +0000",
						"thetext": "This comment was flagged a spam, view the edit history to see the original text if required."
					},
					{
						"isprivate": "0",
						"commentid": "17293448",
						"comment_count": "39",
						"who": {
							"text": "coalitionstrengthen",
							"name": "glitteringwere"
						},
						"bug_when": "2023-05-17 07:09:35 +0000",
						"thetext": "The script is executed with the option -E pr=5; by default, ldapsearch will request the subsequent page; thus, I have hundreds of ldapsearch processes listening for input on stdin; is this correct?  The point of the exam, I take it, is to get participants to abandon searches spanning hundreds of pages.  If not, they may wrap up before the timer goes out.https://dordle.io"
					},
					{
						"isprivate": "0",
						"commentid": "17533946",
						"comment_count": "40",
						"who": {
							"text": "alexreynolds0831",
							"name": "alexreynolds"
						},
						"bug_when": "2023-08-14 01:35:42 +0000",
						"thetext": "This comment was flagged a spam, view the edit history to see the original text if required."
					}
				]
			}
		},
		{
			"bug_id": 668862,
			"title": "init scripts return wrong error code",
			"bugzilla": {
				"bug_id": "668862",
				"creation_ts": "2011-01-11 20:34:49 +0000",
				"short_desc": "init scripts return wrong error code",
				"delta_ts": "2015-12-07 17:16:47 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3468205",
						"comment_count": "0",
						"who": {
							"text": "ssorce",
							"name": "Simo Sorce"
						},
						"bug_when": "2011-01-11 20:34:49 +0000",
						"thetext": "If you do not pass an instance name, or you pass a wrong instance name, or there are no instances available the init scripts will warn on stdout but will still return 0 to the shell.\nAn error number should be returned instead."
					},
					{
						"isprivate": "0",
						"commentid": "3514499",
						"comment_count": "1",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 23:02:27 +0000",
						"thetext": "Created attachment 476498\nPatch"
					},
					{
						"isprivate": "0",
						"commentid": "3514530",
						"comment_count": "2",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 23:29:33 +0000",
						"thetext": "Pushed to master.  Thanks to Noriko for her review!\n\nCounting objects: 9, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (5/5), 1.18 KiB, done.\nTotal 5 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   b5bee52..5a41728  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3736689",
						"comment_count": "3",
						"who": {
							"text": "jgalipea",
							"name": "Jenny Severance"
						},
						"bug_when": "2011-05-16 17:35:00 +0000",
						"thetext": "Which init scripts, can you please be more specific and adds steps to reproduce the issue? Thanks"
					},
					{
						"isprivate": "0",
						"commentid": "3736701",
						"comment_count": "4",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-16 17:43:39 +0000",
						"thetext": "(In reply to comment #3)\n> Which init scripts, can you please be more specific and adds steps to reproduce\n> the issue? Thanks\n\nstep 1 - after a yum install on a clean system, do\nservice dirsrv start && echo success\nyou should not see the echo success\nservice dirsrv start || echo failed\nyou should see the echo failed\n\nstep 2 - if you have run setup to create a directory server instance /etc/dirsrv/slapd-localhost, then try to run\nservice dirsrv restart bogus && echo success\nit should not do the echo success\nif you try to run\nservice dirsrv restart bogus || echo failed\nyou should see the echo failed"
					},
					{
						"isprivate": "0",
						"commentid": "3755557",
						"comment_count": "5",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-24 10:45:06 +0000",
						"thetext": "Step 1:\n\n[root@amsharma etc]# service dirsrv start && echo success\n  *** Error: no dirsrv instances configured\n[root@amsharma etc]# service dirsrv start || echo failed\n  *** Error: no dirsrv instances configured\nfailed\n\n\nStep 2\n[root@testvm scripts]# ps -aef | grep slapd\nnobody   13191     1  0 13:08 ?        00:00:06 /usr/sbin/ns-slapd -D /etc/dirsrv/slapd-testvm -i /var/run/dirsrv/slapd-testvm.pid -w /var/run/dirsrv/slapd-testvm.startpid\nroot     14005  3931  0 16:13 pts/1    00:00:00 grep slapd\n\n[root@testvm scripts]# service dirsrv restart bogus && echo success\nbogus is an invalid dirsrv instance                        [FAILED]\n\n[root@testvm scripts]# service dirsrv restart bogus || echo failed\nbogus is an invalid dirsrv instance                        [FAILED]\nfailed"
					}
				]
			}
		},
		{
			"bug_id": 670616,
			"title": "nsslapd-minssf vs ldapi",
			"bugzilla": {
				"bug_id": "670616",
				"creation_ts": "2011-01-18 20:21:50 +0000",
				"short_desc": "nsslapd-minssf vs ldapi",
				"delta_ts": "2015-12-07 16:30:54 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3486689",
						"comment_count": "0",
						"who": {
							"text": "jr.aquino",
							"name": "Jr Aquino"
						},
						"bug_when": "2011-01-18 20:21:50 +0000",
						"thetext": "Description of problem:\nnsslapd-minssf appears to enforce its encryption requirements on ldapi even though its a unix socket.\n\nVersion-Release number of selected component (if applicable):\n\nSteps to Reproduce:\n1. Enable nsslapd-minssf with a value greater than 0.\n2. ldapsearch -x -H ldapi://%2fvar%2frun%2fslapd-ID.socket -D \"cn=Directory Manager\" -w password -b \"cn=config\" \"(objectclass=*)\"\n\nActual results:\nldap_bind: Server is unwilling to perform (53)\n\tadditional info: Minimum SSF not met.\n\n\nExpected results:\nexpected ldap return for cn=config\n\nAdditional info:"
					},
					{
						"isprivate": "0",
						"commentid": "3497842",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-01-24 21:50:04 +0000",
						"thetext": "How critical is this?  Are there any workarounds?"
					},
					{
						"isprivate": "0",
						"commentid": "3514152",
						"comment_count": "2",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 19:33:35 +0000",
						"thetext": "Created attachment 476468\nPatch"
					},
					{
						"isprivate": "0",
						"commentid": "3514167",
						"comment_count": "3",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-01 19:48:23 +0000",
						"thetext": "Comment on attachment 476468\nPatch\n\nhttps://bugzilla.redhat.com/attachment.cgi?id=476468&action=diff#a/ldap/servers/slapd/slap.h_sec1\n\nI think you mean \"are secure\" not \"are not secure\"\n\nOtherwise, looks good."
					},
					{
						"isprivate": "0",
						"commentid": "3514176",
						"comment_count": "4",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 19:53:27 +0000",
						"thetext": "(In reply to comment #3)\n> Comment on attachment 476468 [details]\n> Patch\n> \n> https://bugzilla.redhat.com/attachment.cgi?id=476468&action=diff#a/ldap/servers/slapd/slap.h_sec1\n> \n> I think you mean \"are secure\" not \"are not secure\"\n> \n> Otherwise, looks good.\n\nGood catch.  I initially made the default localssf \"0\", so the comment fit.  I missed updating the comment when the default was changed to 71.  I'll update the comment and provide a new patch."
					},
					{
						"isprivate": "0",
						"commentid": "3514179",
						"comment_count": "5",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 19:55:08 +0000",
						"thetext": "Created attachment 476469\nRevised Patch\n\nThis is the same as the previous patch aside from updating the incorrect comment that Rich pointed out."
					},
					{
						"isprivate": "0",
						"commentid": "3514248",
						"comment_count": "6",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-01 20:38:01 +0000",
						"thetext": "Pushed to master.  Thanks to Rich and Noriko for their reviews!\n\nCounting objects: 41, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (20/20), done.\nWriting objects: 100% (21/21), 2.64 KiB, done.\nTotal 21 (delta 18), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   3c2d82e..b5bee52  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3736679",
						"comment_count": "7",
						"who": {
							"text": "jgalipea",
							"name": "Jenny Severance"
						},
						"bug_when": "2011-05-16 17:31:04 +0000",
						"thetext": "Can you please add steps to verify? Thanks!"
					},
					{
						"isprivate": "0",
						"commentid": "3736696",
						"comment_count": "8",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-16 17:38:14 +0000",
						"thetext": "(In reply to comment #7)\n> Can you please add steps to verify? Thanks!\n\n1) set up the directory server to use ldapi\n2) if not already set, set the cn=config nsslapd-localssf to 71\n3) set the cn=config nsslapd-minssf to 72\n4) restart the directory server\n5) try an ldapsearch on the ldapi socket - you should get back an UNWILLING_TO_PERFORM (53) error\n6) change cn=config nsslapd-minssf to 70\n7) restart the directory server\n8) try an ldapsearch on the ldapi socket - it should succeed"
					},
					{
						"isprivate": "0",
						"commentid": "3768995",
						"comment_count": "9",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-30 11:52:22 +0000",
						"thetext": "1. nsslapd-ldapilisten: on\n   nsslapd-ldapifilepath: /var/run/slapd-testvm.socket\n\n2. nsslapd-localssf: 71\n   nsslapd-minssf: 72\n\n3. [root@testvm sasl]# ldapsearch -x -H ldapi://%2fvar%2frun%2fslapd-testvm.socket -D \"cn=Directory Manager\" -w Secret123 -b \"cn=config\" \"(objectclass=*)\"\nldap_bind: Server is unwilling to perform (53)\n\tadditional info: Minimum SSF not met.\n\n4. After changing the values as:\nnsslapd-localssf: 71\n   nsslapd-minssf: 71\n\nIt is working fine, thanks for the steps.\nMarking as VERIFIED."
					}
				]
			}
		},
		{
			"bug_id": 671199,
			"parent": true,
			"security": true,
			"title": "CVE-2011-0022 Directory Server: insecure pid file directory permissions",
			"bugzilla": {
				"bug_id": "671199",
				"alias": "CVE-2011-0022",
				"creation_ts": "2011-01-20 18:14:09 +0000",
				"short_desc": "CVE-2011-0022 Directory Server: insecure pid file directory permissions",
				"delta_ts": "2019-09-29 12:42:02 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Security",
				"priority": "medium",
				"bug_severity": "medium",
				"depends_on": [
					"670350",
					"670922"
				],
				"external_bugs": {
					"text": "RHSA-2011:0293",
					"name": "Red Hat Product Errata"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3491115",
						"comment_count": "0",
						"who": {
							"text": "jlieskov",
							"name": "Jan Lieskovsky"
						},
						"bug_when": "2011-01-20 18:14:09 +0000",
						"thetext": "It was discovered that 389 / Red Hat Directory Server's setup scripts\nset insecure permissions (0777) on the /var/run/dirsrv directory used to\nstore Directory Server's pid files when multiple Directory Server\ninstances were configured on the system to be run under the different\nunprivileged users.\n\nA local user could use this flaw to create, remove or replace pid files\nin this directory, possibly preventing correct start of the Directory\nServer instances, or causing Directory Server init script to kill\narbitrary process during the Directory Server shutdown."
					},
					{
						"isprivate": "0",
						"commentid": "3491282",
						"comment_count": "1",
						"who": {
							"text": "jlieskov",
							"name": "Jan Lieskovsky"
						},
						"bug_when": "2011-01-20 19:29:16 +0000",
						"thetext": "The CVE identifier of CVE-2011-0022 has been assigned to this issue."
					},
					{
						"isprivate": "0",
						"commentid": "3510966",
						"comment_count": "10",
						"who": {
							"text": "dpal",
							"name": "Dmitri Pal"
						},
						"bug_when": "2011-01-31 22:35:13 +0000",
						"thetext": "*** Bug 669767 has been marked as a duplicate of this bug. ***"
					},
					{
						"isprivate": "0",
						"commentid": "3553415",
						"comment_count": "13",
						"who": {
							"text": "errata-xmlrpc",
							"name": "errata-xmlrpc"
						},
						"bug_when": "2011-02-22 17:46:09 +0000",
						"thetext": "This issue has been addressed in following products:\n\n  Red Hat Directory Server 8 for RHEL 4\n  Red Hat Directory Server 8 for RHEL 5\n\nVia RHSA-2011:0293 https://rhn.redhat.com/errata/RHSA-2011-0293.html"
					},
					{
						"isprivate": "0",
						"commentid": "3683993",
						"comment_count": "15",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2011-04-19 10:03:58 +0000",
						"thetext": "Upstream fix:\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=5135d9a"
					}
				]
			}
		},
		{
			"bug_id": 672468,
			"parent": true,
			"security": true,
			"title": "CVE-2011-0532 Directory Server: use of insecure LD_LIBRARY_PATH settings",
			"bugzilla": {
				"bug_id": "672468",
				"alias": "CVE-2011-0532",
				"creation_ts": "2011-01-25 08:08:57 +0000",
				"short_desc": "CVE-2011-0532 Directory Server: use of insecure LD_LIBRARY_PATH settings",
				"delta_ts": "2019-09-29 12:42:02 +0000",
				"bug_status": "CLOSED",
				"resolution": "ERRATA",
				"keywords": "Security",
				"priority": "low",
				"bug_severity": "low",
				"depends_on": [
					"670922"
				],
				"external_bugs": {
					"text": "RHSA-2011:0293",
					"name": "Red Hat Product Errata"
				},
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3498454",
						"comment_count": "0",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2011-01-25 08:08:57 +0000",
						"thetext": "It was discovered that 398 / Red Hat Directory Server set LD_LIBRARY_PATH environment variable to insecure value containing empty path elements in various shell scripts used by DS (e.g. various backup/restore scripts instantiated for each DS instance, as well as the main initialization script).  Such LD_LIBRARY_PATH setting causes ld.so dynamic linker to perform library search relative to the current working directory before searching system library directories.  A local attacker able to trick a user running those scripts (usually the root user) to run them while working from an attacker writeable directory could use this flaw to escalate their privileges via specially crated dynamic library."
					},
					{
						"isprivate": "0",
						"commentid": "3498466",
						"comment_count": "1",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2011-01-25 08:20:45 +0000",
						"thetext": "Examples include:\n\n- dirsrv init script\n  LD_LIBRARY_PATH=/usr/lib/dirsrv::/usr/lib\n\n- ldap-agent\n  LIB_DIR=:::\n  LD_LIBRARY_PATH=${LIB_DIR}\n\n- backup scripts\n  LD_LIBRARY_PATH=$prefix/{{SERVER-DIR}}:$prefix:$prefix/usr/lib:$prefix/usr/lib\n  if [ -n \"$prefix\" ] ; then\n    LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:\"                                  \n  fi\n\nThis issue is result of an expansion of certain configure variables to an empty string."
					},
					{
						"isprivate": "0",
						"commentid": "3498472",
						"comment_count": "2",
						"who": {
							"text": "thoger",
							"name": "Tomas Hoger"
						},
						"bug_when": "2011-01-25 08:23:30 +0000",
						"thetext": "Most scripts also set SHLIB_PATH to the same value as LD_LIBRARY_PATH.  I don't know if HP-UX dynamic linker handles empty paths in SHLIB_PATH in the same way as glibc ld.so does in LD_LIBRARY_PATH.  Can anyone with access to HP-UX system verify this?  DS scripts usually do SHLIB_PATH=$LD_LIBRARY_PATH or similar, so LD_LIBRARY_PATH fix should resolve most SHLIB_PATH issues too."
					},
					{
						"isprivate": "0",
						"commentid": "3553416",
						"comment_count": "19",
						"who": {
							"text": "errata-xmlrpc",
							"name": "errata-xmlrpc"
						},
						"bug_when": "2011-02-22 17:46:12 +0000",
						"thetext": "This issue has been addressed in following products:\n\n  Red Hat Directory Server 8 for RHEL 4\n  Red Hat Directory Server 8 for RHEL 5\n\nVia RHSA-2011:0293 https://rhn.redhat.com/errata/RHSA-2011-0293.html"
					}
				]
			}
		},
		{
			"bug_id": 674430,
			"title": "Any error in uid uniqueness always returns the same error message (value already exists).",
			"bugzilla": {
				"bug_id": "674430",
				"creation_ts": "2011-02-01 20:57:53 +0000",
				"short_desc": "Any error in uid uniqueness always returns the same error message (value already exists).",
				"delta_ts": "2015-12-07 16:43:15 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3514308",
						"comment_count": "0",
						"who": {
							"text": "ssorce",
							"name": "Simo Sorce"
						},
						"bug_when": "2011-02-01 20:57:53 +0000",
						"thetext": "The uniqueness plugin should return the right text for the error (or be silent).\n\nOtherwise the error can be extremely confusing. For example see freeipa ticket 558: https://fedorahosted.org/freeipa/ticket/558"
					},
					{
						"isprivate": "0",
						"commentid": "3519471",
						"comment_count": "1",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 19:21:59 +0000",
						"thetext": "An interesting find in testing is that a modify operation on a non-existent entry will only return the constraint violation if the modify would indeed result in a uniqueness conflict (if the target existed).  For example:\n\n========================================================================\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user2,dc=example,dc=com\nchangetype: add\nobjectclass: posixAccount\nuid: tuser2\nhomeDirectory: /home/tuser\nuidnumber: 500\ngidnumber: 500\n\nadding new entry \"cn=test user2,dc=example,dc=com\"\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modify\nreplace: uid\nuid: tuser2\n\nmodifying entry \"cn=test user3,dc=example,dc=com\"\nldap_modify: Constraint violation (19)\n\tadditional info: Another entry with the same attribute value already exists (attribute: \"uid\")\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modify\nreplace: uid\nuid: tuser3\n\nmodifying entry \"cn=test user3,dc=example,dc=com\"\nldap_modify: No such object (32)\n\tmatched DN: dc=example,dc=com\n========================================================================\n\nNow for a MODRDN operation, a constraint violation is returned when you attempt to rename a non-existent entry even if the operation would not result in a uniqueness conflict:\n\n========================================================================\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modrdn\nnewrdn: uid=tuser2\ndeleteoldrdn: 1\n\nmodifying rdn of entry \"cn=test user3,dc=example,dc=com\"\nldap_rename: Operations error (1)\n\tadditional info: Another entry with the same attribute value already exists (attribute: \"uid\")\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modrdn\nnewrdn: uid=tuser3\ndeleteoldrdn: 1\n\nmodifying rdn of entry \"cn=test user3,dc=example,dc=com\"\nldap_rename: Operations error (1)\n\tadditional info: Another entry with the same attribute value already exists (attribute: \"uid\")\n========================================================================\n\nI feel that the MODRDN should return an error 32 if the change would not result in a conflict.  I'm not so sure about changing the result code to 32 if the changes would result in a conflict.  It's true that the target does not exist at the time of checking for uniqueness (preop), but there is a slight window where the target entry could be created between the check for uniqueness and the actual processing of the operation by the server.  This would result in a duplicate value for an attribute that is supposed to be unique."
					},
					{
						"isprivate": "0",
						"commentid": "3519567",
						"comment_count": "2",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 19:56:12 +0000",
						"thetext": "If you look at the error in my previous examples closely, the result code differs when there is really a uniqueness collision vs. some other error (LDAP_CONSTRAINT_VIOLATION vs. LDAP_OPERATIONS_ERROR).  I think the right thing to do is to only return the \"Another entry with the same attribute value already exists\" error text when there is a constraint violation and to return something more generic for other errors, such as \"Error checking for attribute uniqueness.\"  In addition, the attribute uniqueness plug-in should return LDAP_NO_SUCH_OBJECT when a target does not exist instead of LDAP_OPERATIONS_ERROR."
					},
					{
						"isprivate": "0",
						"commentid": "3519786",
						"comment_count": "3",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-03 20:53:39 +0000",
						"thetext": "I agree.  Note that the way the attribute uniqueness plugin is designed, there is a window for race conditions for any operation."
					},
					{
						"isprivate": "0",
						"commentid": "3519995",
						"comment_count": "4",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 22:33:54 +0000",
						"thetext": "Created attachment 476902\nPatch"
					},
					{
						"isprivate": "0",
						"commentid": "3520001",
						"comment_count": "5",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-03 22:39:14 +0000",
						"thetext": "Comment on attachment 476902\nPatch\n\n+        result = uid_op_error(35);\n+        /* We want to return a no such object error if the target doesn't exist. */\n+        result = LDAP_NO_SUCH_OBJECT;\n\ntry (void)uid_op_error(35);\ninstead of assigning to result.\n\nAlso, if err != LDAP_SUCCESS, does that always mean NO_SUCH_OBJECT?  Or is it possible that there could be some other LDAP error?"
					},
					{
						"isprivate": "0",
						"commentid": "3520021",
						"comment_count": "6",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 23:04:21 +0000",
						"thetext": "Created attachment 476905\nRevised Patch\n\nThis addresses the issues pointed out in Rich's review."
					},
					{
						"isprivate": "0",
						"commentid": "3520050",
						"comment_count": "7",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 23:24:56 +0000",
						"thetext": "Created attachment 476911\nRe-revised patch"
					},
					{
						"isprivate": "0",
						"commentid": "3520064",
						"comment_count": "8",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-03 23:34:35 +0000",
						"thetext": "Pushed to master.  Thanks to Rich and Noriko for their reviews!\n\nCounting objects: 13, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (7/7), done.\nWriting objects: 100% (7/7), 1.07 KiB, done.\nTotal 7 (delta 5), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   be92452..da53383  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3736220",
						"comment_count": "9",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-16 14:11:32 +0000",
						"thetext": "[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user2,dc=example,dc=com\nchangetype: add\nobjectclass: posixAccount\nuid: tuser2\nhomeDirectory: /home/tuser\nuidnumber: 500\ngidnumber: 500\n\nadding new entry \"cn=test user2,dc=example,dc=com\"\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modify\nreplace: uid\nuid: tuser2\n\n<<modifying entry \"cn=test user3,dc=example,dc=com\"\nldap_modify: No such object (32)\n\tmatched DN: dc=example,dc=com\n>>\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modify\nreplace: uid\nuid: tuser3\n\n<<modifying entry \"cn=test user3,dc=example,dc=com\"\nldap_modify: No such object (32)\n\tmatched DN: dc=example,dc=com\n>>\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modrdn\nnewrdn: uid=tuser2\ndeleteoldrdn: 1\n\n<<modifying rdn of entry \"cn=test user3,dc=example,dc=com\"\nldap_rename: No such object (32)\n\tmatched DN: dc=example,dc=com\n>>\n\n[nkinder@localhost ~]$ ldapmodify -x -D \"cn=directory manager\" -w -\ndn: cn=test user3,dc=example,dc=com\nchangetype: modrdn\nnewrdn: uid=tuser3\ndeleteoldrdn: 1\n\n<<\nmodifying rdn of entry \"cn=test user3,dc=example,dc=com\"\nldap_rename: No such object (32)\n\tmatched DN: dc=example,dc=com\n\n>>\n\nTill here all is well.. but then .. I guess the below, should return some error like \"ldap_modify: Constraint violation (19)\n additional info: Another entry with the same attribute value already exists\n(attribute: \"uid\")\" But it just passed :\n\n[root@testvm /]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test11,dc=example,dc=com\n> changetype: add\n> objectclass: posixAccount\n> uid: rosy\n> homeDirectory: /home/tuser\n> uidnumber: 500\n> gidnumber: 500\n> EOF\nadding new entry \"cn=test11,dc=example,dc=com\"\n\n[root@testvm /]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test12,dc=example,dc=com\n> changetype: add\n> objectclass: posixAccount\n> uid: rosy1\n> homeDirectory: /home/tuser\n> uidnumber: 500\n> gidnumber: 500\n> EOF\nadding new entry \"cn=test12,dc=example,dc=com\"\n\n[root@testvm /]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test12,dc=example,dc=com\n> changetype: modify\n> replace: uid\n> uid: rosy\n> EOF\nmodifying entry \"cn=test12,dc=example,dc=com\""
					},
					{
						"isprivate": "0",
						"commentid": "3739142",
						"comment_count": "10",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-05-17 16:17:27 +0000",
						"thetext": "Amita - What does your attribute uniqueness config entry look like?  It's the \"cn=attribute uniqueness,cn=plugins,cn=config\" entry."
					},
					{
						"isprivate": "0",
						"commentid": "3740733",
						"comment_count": "11",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-18 10:44:39 +0000",
						"thetext": "It has the uid included...\n\ndn: cn=attribute uniqueness,cn=plugins,cn=config\nobjectClass: top\nobjectClass: nsSlapdPlugin\nobjectClass: extensibleObject\ncn: attribute uniqueness\nnsslapd-pluginPath: libattr-unique-plugin\nnsslapd-pluginInitfunc: NSUniqueAttr_Init\nnsslapd-pluginType: preoperation\nnsslapd-pluginEnabled: off\nnsslapd-pluginarg0: uid\nnsslapd-pluginarg1: dc=example,dc=com\nnsslapd-plugin-depends-on-type: database\nnsslapd-pluginId: NSUniqueAttr\nnsslapd-pluginVersion: 1.2.8.3\nnsslapd-pluginVendor: 389 Project\nnsslapd-pluginDescription: Enforce unique attribute values"
					},
					{
						"isprivate": "0",
						"commentid": "3741193",
						"comment_count": "12",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-05-18 14:26:44 +0000",
						"thetext": "(In reply to comment #11)\n> It has the uid included...\n> \n> dn: cn=attribute uniqueness,cn=plugins,cn=config\n> objectClass: top\n> objectClass: nsSlapdPlugin\n> objectClass: extensibleObject\n> cn: attribute uniqueness\n> nsslapd-pluginPath: libattr-unique-plugin\n> nsslapd-pluginInitfunc: NSUniqueAttr_Init\n> nsslapd-pluginType: preoperation\n> nsslapd-pluginEnabled: off\n> nsslapd-pluginarg0: uid\n> nsslapd-pluginarg1: dc=example,dc=com\n> nsslapd-plugin-depends-on-type: database\n> nsslapd-pluginId: NSUniqueAttr\n> nsslapd-pluginVersion: 1.2.8.3\n> nsslapd-pluginVendor: 389 Project\n> nsslapd-pluginDescription: Enforce unique attribute values\n\nIt does have uid included, but the plug-in is disabled.  You need to set nsslapd-pluginEnabled to \"on\" and re-run all of your verification tests."
					},
					{
						"isprivate": "0",
						"commentid": "3743014",
						"comment_count": "13",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-19 07:17:07 +0000",
						"thetext": "oops, I just missed that ..\n> dn: cn=attribute uniqueness,cn=plugins,cn=config\n> changetype: modify\n> replace: nsslapd-pluginEnabled\n> nsslapd-pluginEnabled: on\n> EOF\nmodifying entry \"cn=attribute uniqueness,cn=plugins,cn=config\"\n\nNow----\n\ndn: cn=attribute uniqueness,cn=plugins,cn=config\nobjectClass: top\nobjectClass: nsSlapdPlugin\nobjectClass: extensibleObject\ncn: attribute uniqueness\nnsslapd-pluginPath: libattr-unique-plugin\nnsslapd-pluginInitfunc: NSUniqueAttr_Init\nnsslapd-pluginType: preoperation\nnsslapd-pluginEnabled: on\nnsslapd-pluginarg0: uid\nnsslapd-pluginarg1: dc=example,dc=com\nnsslapd-plugin-depends-on-type: database\nnsslapd-pluginId: NSUniqueAttr\nnsslapd-pluginVersion: 1.2.8.3\nnsslapd-pluginVendor: 389 Project\nnsslapd-pluginDescription: Enforce unique attribute values\nmodifiersName: cn=directory manager\nmodifyTimestamp: 20110519070110Z\n\ntesting ---\n\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w xxx << EOF\n> dn: cn=test111,dc=example,dc=com\n> changetype: add\n> objectclass: posixAccount\n> uid: ripsi\n> homeDirectory: /home/tuser\n> uidnumber: 500\n> gidnumber: 500\n> EOF\nadding new entry \"cn=test111,dc=example,dc=com\"\n\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w xxx << EOF\n> dn: cn=test112,dc=example,dc=com\n> changetype: add\n> objectclass: posixAccount\n> uid: ripsi\n> homeDirectory: /home/tuser\n> uidnumber: 500\n> gidnumber: 500\n> EOF\nadding new entry \"cn=test112,dc=example,dc=com\"\nldap_add: Constraint violation (19)\n\tadditional info: Another entry with the same attribute value already exists (attribute: \"uid\")\n\n\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test112,dc=example,dc=com\n> changetype: add\n> objectclass: posixAccount\n> uid: ripsi1\n> homeDirectory: /home/tuser\n> uidnumber: 500\n> gidnumber: 500\n> EOF\nadding new entry \"cn=test112,dc=example,dc=com\"\n\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test112,dc=example,dc=com\n> changetype: modify\n> replace: uid\n> uid: ripsi\n> EOF\nmodifying entry \"cn=test112,dc=example,dc=com\"\nldap_modify: Constraint violation (19)\n\tadditional info: Another entry with the same attribute value already exists (attribute: \"uid\")\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: cn=test111,dc=example,dc=com\n> changetype: modify\n> replace: uid\n> uid: ripsi11\n> EOF\nmodifying entry \"cn=test111,dc=example,dc=com\"\n\n[root@testvm ~]# ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: cn=test112,dc=example,dc=com\nchangetype: modify\nreplace: uid\nuid: ripsi  \nEOF\nmodifying entry \"cn=test112,dc=example,dc=com\"\n\nnow, we are good to mark it VERIFIED."
					}
				]
			}
		},
		{
			"bug_id": 675113,
			"title": "ns-slapd core dump in windows_tot_run if oneway sync is used",
			"bugzilla": {
				"bug_id": "675113",
				"creation_ts": "2011-02-04 11:06:39 +0000",
				"short_desc": "ns-slapd core dump in windows_tot_run if oneway sync is used",
				"delta_ts": "2015-12-07 16:39:04 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "unspecified",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "677465",
						"creation_ts": "2011-02-14 21:58:51 +0000",
						"short_desc": "ns-slapd core dump in windows_tot_run if oneway sync is used",
						"delta_ts": "2015-01-04 23:46:26 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "high",
						"depends_on": [
							"675113"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3537100",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-14 21:58:51 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #675113 +++\n\nDescription of problem:\nif oneway Win sync 'fromWindows' is configured, windows_tot_run can core dump because uninitializied pointer dn and pb will freed.\n\nVersion-Release number of selected component (if applicable):\n1.2.8.a1\n\n\nHow reproducible:\nSetup winsync, oneway, fromWindows.\n\n\nSteps to Reproduce:\n1. Initialize Replica\n2.\n3.\n  \nActual results:\nns-slapd core dump\nThe problem was observed in Solaris.\n\n\nExpected results:\n\n\nAdditional info:\nthe pointer dn and pb have to initialized with NULL:\n\n*** windows_tot_protocol.c      Fr Feb  4 11:55:46 2011\n--- windows_tot_protocol.c.0    Mo Jan 10 11:45:26 2011\n***************\n*** 98,105 ****\n  {\n        int rc;\n        callback_data cb_data;\n!       Slapi_PBlock *pb = NULL;\n!       char* dn = NULL;\n        RUV *ruv = NULL;\n        RUV *starting_ruv = NULL;\n        Replica *replica = NULL;\n--- 98,105 ----\n  {\n        int rc;\n        callback_data cb_data;\n!       Slapi_PBlock *pb;\n!       char* dn;\n        RUV *ruv = NULL;\n        RUV *starting_ruv = NULL;\n        Replica *replica = NULL;\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-14 14:26:39 EST ---\n\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   82b3621..cee5f05  master -> master\ncommit cee5f058e10b6379d12b643e03eed81ee22a937d\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Mon Feb 14 12:21:19 2011 -0700\n    Author: Carsten Grzemba <grzemba@contac-dt.de>\n    Reviewed by: rmeggins\n    Branch: master\n    Fix Description: Init pb and dn to NULL to avoid free of uninit memory.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   8a15fd4..b6871e9  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit b6871e9130c6c78d45d21f5019e3afb19fc2ea6f\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Mon Feb 14 12:21:19 2011 -0700"
							},
							{
								"isprivate": "0",
								"commentid": "3710103",
								"comment_count": "2",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-05-02 15:33:37 +0000",
								"thetext": "to reproduce:\n1) set up windows sync with a one way (fromWindows) sync agreement\n2) add some user entries to AD\n3) perform an initialization\n4) verify the user entries are now in the directory server and the directory server is still running"
							},
							{
								"isprivate": "0",
								"commentid": "3711983",
								"comment_count": "3",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-05-03 10:29:04 +0000",
								"thetext": "VERIFIED without any crash.\n\nIt will be good if we can add an example to the section 10.8. Configuring Unidirectional Synchronization of Admin guide."
							},
							{
								"isprivate": "0",
								"commentid": "3744602",
								"comment_count": "4",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:43 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3520582",
						"comment_count": "0",
						"who": {
							"text": "grzemba",
							"name": "Carsten Grzemba"
						},
						"bug_when": "2011-02-04 11:06:39 +0000",
						"thetext": "Description of problem:\nif oneway Win sync 'fromWindows' is configured, windows_tot_run can core dump because uninitializied pointer dn and pb will freed.\n\nVersion-Release number of selected component (if applicable):\n1.2.8.a1\n\n\nHow reproducible:\nSetup winsync, oneway, fromWindows.\n\n\nSteps to Reproduce:\n1. Initialize Replica\n2.\n3.\n  \nActual results:\nns-slapd core dump\nThe problem was observed in Solaris.\n\n\nExpected results:\n\n\nAdditional info:\nthe pointer dn and pb have to initialized with NULL:\n\n*** windows_tot_protocol.c      Fr Feb  4 11:55:46 2011\n--- windows_tot_protocol.c.0    Mo Jan 10 11:45:26 2011\n***************\n*** 98,105 ****\n  {\n        int rc;\n        callback_data cb_data;\n!       Slapi_PBlock *pb = NULL;\n!       char* dn = NULL;\n        RUV *ruv = NULL;\n        RUV *starting_ruv = NULL;\n        Replica *replica = NULL;\n--- 98,105 ----\n  {\n        int rc;\n        callback_data cb_data;\n!       Slapi_PBlock *pb;\n!       char* dn;\n        RUV *ruv = NULL;\n        RUV *starting_ruv = NULL;\n        Replica *replica = NULL;"
					},
					{
						"isprivate": "0",
						"commentid": "3536818",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-14 19:26:39 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   82b3621..cee5f05  master -> master\ncommit cee5f058e10b6379d12b643e03eed81ee22a937d\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Mon Feb 14 12:21:19 2011 -0700\n    Author: Carsten Grzemba <grzemba@contac-dt.de>\n    Reviewed by: rmeggins\n    Branch: master\n    Fix Description: Init pb and dn to NULL to avoid free of uninit memory.\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   8a15fd4..b6871e9  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit b6871e9130c6c78d45d21f5019e3afb19fc2ea6f\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Mon Feb 14 12:21:19 2011 -0700"
					},
					{
						"isprivate": "0",
						"commentid": "3711986",
						"comment_count": "2",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-03 10:29:59 +0000",
						"thetext": "VERIFIED"
					}
				]
			}
		},
		{
			"bug_id": 675265,
			"title": "preventryusn gets added to entries on a failed delete",
			"bugzilla": {
				"bug_id": "675265",
				"creation_ts": "2011-02-04 18:23:38 +0000",
				"short_desc": "preventryusn gets added to entries on a failed delete",
				"delta_ts": "2015-12-07 16:35:35 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "unspecified",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "677467",
						"creation_ts": "2011-02-14 22:09:09 +0000",
						"short_desc": "preventryusn gets added to entries on a failed delete",
						"delta_ts": "2015-01-04 23:46:26 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"675265"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3674860",
								"comment_count": "2",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-04-14 14:03:13 +0000",
								"thetext": "Hi,\n\nTested this bug, steps are as below :\n1. ldapmodify -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 <<\nEOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-entryusn-global\n> nsslapd-entryusn-global: on\n> EOF\nmodifying entry \"cn=config\"\n\n2.ldapsearch -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 -b\n\"cn=config\" | grep -i ENTRYUSN\nnsslapd-entryusn-global: on\n\n3. Added one entry :\nldapmodify -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 <<\nEOF\ndn: uid=amita,ou=people,dc=example,dc=com\nchangetype: add\nobjectClass: top\nobjectClass: person\nobjectClass: inetorgperson\nsn: testkrbuser\ncn: kkk testkrbuser\nuserPassword: redhat\nEOF\n\nadding new entry \"uid=amita,ou=people,dc=example,dc=com\"\n\n4. Added another entry which will be used for deletion -\ndn: uid=test11,dc=example,dc=com\nmail: test11@redhat.com\nuid: test11\ngivenName: test11\nobjectClass: top\nobjectClass: person\nobjectClass: inetorgperson\nobjectClass: ntUser\nobjectClass: inetuser\nobjectClass: organizationalPerson\nsn: test11\ncn: rrr test11\nntUserCreateNewAccount: true\nntUserDomainId: test11\nntUserDeleteAccount: true\nuserPassword:: e1NTSEF9UUdFc29jcEJ6QlZjcG5RaUFrbHgzd3l4MUl2RWZRWXJpVnVaMEE9PQ=\n =\ntelephoneNumber: 989898191\n\n5. ldapdelete -x -h localhost -p 1389 -D\n\"uid=amita,ou=people,dc=example,dc=com\" -w redhat uid=test11,dc=example,dc=com\nldap_delete: Insufficient access (50)\n additional info: Insufficient 'delete' privilege to delete the entry\n'uid=test11,dc=example,dc=com'.\n\n6. ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 -b\n\"dc=example,dc=com\"\n# test11, example.com\ndn: uid=test11,dc=example,dc=com\nmail: test11@redhat.com\nuid: test11\ngivenName: test11\nobjectClass: top\nobjectClass: person\nobjectClass: inetorgperson\nobjectClass: ntUser\nobjectClass: inetuser\nobjectClass: organizationalPerson\nsn: test11\ncn: rrr test11\nntUserCreateNewAccount: true\nntUserDomainId: test11\nntUserDeleteAccount: true\nuserPassword:: e1NTSEF9UUdFc29jcEJ6QlZjcG5RaUFrbHgzd3l4MUl2RWZRWXJpVnVaMEE9PQ=\n =\ntelephoneNumber: 989898191\n\npreventryusn is not added.\nHence bug is tested OK. Marking it as VERIFIED.\n\n-Amita Sharma"
							},
							{
								"isprivate": "0",
								"commentid": "3744604",
								"comment_count": "3",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:45 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3521812",
						"comment_count": "0",
						"who": {
							"text": "rcritten",
							"name": "Rob Crittenden"
						},
						"bug_when": "2011-02-04 18:23:38 +0000",
						"thetext": "Description of problem:\n\nAn entry that is attempted to be removed but fails due to lack of permissions gets the attribute preventryusn added. This causes objectclass violations later, logging:\n\nEntry \"uid=mightym,cn=users,cn=accounts,dc=greyoak,dc=com\" -- attribute \"preventryusn\" not allowed\n\nVersion-Release number of selected component (if applicable):\n\n389-ds-base-1.2.8-0.1.a1.fc14.x86_64\n\nSteps to Reproduce:\n1. Add an entry, I created a user in FreeIPA\n2. Delete the entry binding as someone withouth delete permissions\n3. ldapsearch will show that preventryusn was added."
					},
					{
						"isprivate": "0",
						"commentid": "3525082",
						"comment_count": "1",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-07 19:28:09 +0000",
						"thetext": "Created attachment 477486\ngit patch file (master)\n\nDescription: When an entry is deleted with Entry USN plugin enabled,\nan operational attribute preventryusn is added to handle indexes and\nentryusn tombstone.  The attribute must have been added only when\nthe delete was successful, but it was added regardless of the result\nfrom the operation.  This patch checks the delete result in the\nnewly added entryusn delete bepost plugin (usn_bepostop_delete).\nIf it is not successful, the bepost plugin cleans up the attribute."
					},
					{
						"isprivate": "0",
						"commentid": "3525134",
						"comment_count": "2",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-07 19:52:08 +0000",
						"thetext": "Reviewed by Nathan (Thank you!!!)\n\nPushed to master.\n\n$ git merge usn\nUpdating e259dce..10f6c0e\nFast-forward\n ldap/servers/plugins/usn/usn.c             |   44 +++++++++++++++++++++++++++-\n ldap/servers/slapd/back-ldbm/ldbm_delete.c |   37 +++++++++++++++++++----\n ldap/servers/slapd/slapi-plugin.h          |    1 +\n 3 files changed, 74 insertions(+), 8 deletions(-)\n\n$ git push\nCounting objects: 21, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (11/11), done.\nWriting objects: 100% (11/11), 1.82 KiB, done.\nTotal 11 (delta 8), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   e259dce..10f6c0e  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3525593",
						"comment_count": "3",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-08 01:26:40 +0000",
						"thetext": "Pushed to 389-ds-base-1.2.8, as well.\n\n$ git cherry-pick 10f6c0e14b52db8e5eaa73016456f41ede9702e6\nFinished one cherry-pick.\n[ds128-local e87f581] Bug 675265 - preventryusn gets added to entries on a failed delete\n 3 files changed, 74 insertions(+), 8 deletions(-)\n\n$ git push origin ds128-local:389-ds-base-1.2.8\nCounting objects: 21, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (11/11), done.\nWriting objects: 100% (11/11), 1.83 KiB, done.\nTotal 11 (delta 8), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   e259dce..e87f581  ds128-local -> 389-ds-base-1.2.8"
					},
					{
						"isprivate": "0",
						"commentid": "3797906",
						"comment_count": "5",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-06-07 13:00:04 +0000",
						"thetext": "[root@rhel61 slapd-rhel61]# ldapdelete -x -h localhost -p 389 -D \"uid=vlebaron1,ou=people,dc=example,dc=com\" -w test \"uid=joshinski2,ou=people,dc=example,dc=com\"\nldap_delete: Insufficient access (50)\n\tadditional info: Insufficient 'delete' privilege to delete the entry 'uid=JOshinski2,ou=people,dc=example,dc=com'.\n\n[root@rhel61 slapd-rhel61]# ldapsearch -x -h localhost -p 389 -D \"cn=directory manager\" -w Secret123 -b \"uid=joshinski2,ou=people,dc=example,dc=com\"\n# extended LDIF\n#\n# LDAPv3\n# base <uid=joshinski2,ou=people,dc=example,dc=com> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# JOshinski2, people, example.com\ndn: uid=JOshinski2,ou=people,dc=example,dc=com\nroomNumber: 2059\nemployeeType: Peon\nhomePhone: +1 804 272-4415\ngivenName: Joon\nmobile: +1 415 498-9138\nuserCertificate;binary:: MIIBvjCCASegAwIBAgIBAjANBgkqhkiG9w0BAQQFADAnMQ8wDQYDV\n QQDEwZjb25maWcxFDASBgNVBAMTC01NUiBDQSBDZXJ0MB4XDTAxMDQwNTE1NTEwNloXDTExMDcwNT\n E1NTEwNlowIzELMAkGA1UEChMCZnIxFDASBgNVBAMTC01NUiBTMSBDZXJ0MIGfMA0GCSqGSIb3DQE\n BAQUAA4GNADCBiQKBgQDNlmsKEaPD+o3mAUwmW4E40MPs7aiui1YhorST3KzVngMqe5PbObUHMeJN\n 7CLbq9SjXvdB3y2AoVl/s5UkgGz8krmJ8ELfUCU95AQls321RwBdLRjioiQ3MGJiFjxwYRIVj1CUT\n uX1y8dC7BWvZ1/EB0yv0QDtp2oVMUeoK9/9sQIDAQABMA0GCSqGSIb3DQEBBAUAA4GBADevhxY6Qy\n DMK3Mnr7vLGe/HWEZCObF+qEo2zWScGH0Q+dAmhkCCkNeHJoqGN4NWjTdnBcGaAr5Y85k1o/vOAMB\n sZePbYx4SrywL0b/OkOmQX+mQwieC2IQzvaBRyaNMh309vrF4w5kExReKfjR/gXpHiWQzGSxC5LeQ\n G4k3IP34\nobjectClass: top\nobjectClass: person\nobjectClass: organizationalPerson\nobjectClass: inetOrgPerson\nfacsimileTelephoneNumber: +1 804 613-9414\nou: Payroll\ndepartmentNumber: 7460\nmail: Joon_Oshinski@example.com\nuid: JOshinski2\ncn: Joon Oshinski\ninitials: J. O.\ntelephoneNumber: +1 818 460-3369\ncarLicense: C7J7LM7\npager: +1 303 344-3697\nmanager: cn=Ken Anderson\nl: San Francisco\npostalAddress: 658,  Dept #922, Room#Payroll\ndescription: 2;3569;CN=Red Hat CS 71GA Demo,O=Red Hat CS 71GA Demo,C=US;CN=RHC\n S Agent - admin01,UID=admin01,O=redhat,C=US [1] This is Joon Oshinski's descr\n iption.\nsn: Oshinski\nsecretary: cn=Aime Huhn\ntitle: Junior Payroll Guru\nuserPassword:: e1NTSEF9TEtydjB5YXpFT1VmaUkvMmo5OFROQVNvd3FpQ3V5YlJ1eDZSQnc9PQ=\n =\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n# numEntries: 1\n\n\n[root@rhel61 slapd-rhel61]# ldapsearch -x -h localhost -p 389 -D \"cn=directory manager\" -w Secret123 -b \"uid=joshinski2,ou=people,dc=example,dc=com\" | grep preventryusn"
					}
				]
			}
		},
		{
			"bug_id": 675320,
			"security": true,
			"title": "empty modify operation with repl on or lastmod off will crash server",
			"bugzilla": {
				"bug_id": "675320",
				"creation_ts": "2011-02-04 21:36:56 +0000",
				"short_desc": "empty modify operation with repl on or lastmod off will crash server",
				"delta_ts": "2015-12-07 16:33:42 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"keywords": "VerifiedUpstream",
				"priority": "high",
				"bug_severity": "unspecified",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "676876",
						"alias": "CVE-2011-0704",
						"creation_ts": "2011-02-11 16:47:02 +0000",
						"short_desc": "CVE-2011-0704 389: replica crashes due to empty modify request when built with mozldap",
						"delta_ts": "2023-05-12 11:53:15 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"keywords": "Security",
						"priority": "low",
						"bug_severity": "low",
						"depends_on": [
							"675320",
							"679542"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3533177",
								"comment_count": "0",
								"who": {
									"text": "vdanen",
									"name": "Vincent Danen"
								},
								"bug_when": "2011-02-11 16:47:02 +0000",
								"thetext": "Andrew Kerr reported that a 389 replica would crash when an empty modify request is sent to it.  This can only happen if the 389 server is built with mozldap (not OpenLDAP) and the modify operation is replicated or the server set 'cn=config nsslapd-lastmod: off'.\n\n389 on Fedora 14 and later, as well as Red Hat Enterprise Linux 6, use OpenLDAP, not mozldap, and are thus unaffected.  This flaw does not affect Red Hat Directory Server 8.2.\n\nThis flaw was caused by the fix for bug #305131 which allowed empty modify operations to proceed through the code."
							},
							{
								"isprivate": "0",
								"commentid": "3533181",
								"comment_count": "1",
								"who": {
									"text": "vdanen",
									"name": "Vincent Danen"
								},
								"bug_when": "2011-02-11 16:48:21 +0000",
								"thetext": "Acknowledgements:\n\nRed Hat would like to thank Andrew Kerr for reporting this issue.\n\nStatement:\n\nNot vulnerable. This issue did not affect Red Hat Directory Server 8 packages."
							},
							{
								"isprivate": "0",
								"commentid": "3533305",
								"comment_count": "2",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-11 18:10:00 +0000",
								"thetext": "Yes, the description looks good.  Thanks!"
							},
							{
								"isprivate": "0",
								"commentid": "3553752",
								"comment_count": "3",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-22 19:49:06 +0000",
								"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   a123b54..1980427  master -> master\ncommit 1980427b8c78e79982c056ac270c6c3b11188830\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Wed Feb 9 14:54:29 2011 -0700\n    Reviewed by: nkinder, nhosoi (Thanks!)\n    Branch: master\n    Fix Description: Check the modifications after lastmod is applied, if any.\n    If there are still no mods to apply, just return LDAP_SUCCESS to the client\n    and end the modify request.  This makes it so that an empty modify is\n    allowed, but no further processing is done to avoid code that may not deal\n    with mods == NULL.\n    I also found a problem with the way an empty modify was handled.  OpenLDAP\n    does not return an explicit error code if there was a problem reading the\n    sequence of modify ops, so we have to resort to other checking.  This\nallows\n    an empty modify to pass through, when using either mozldap or openldap.\n    Platforms tested: RHEL5 x86_64, RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   5d4895c..a33cb58  389-ds-base-1.2.8 -> 389-ds-base-1.2.8"
							},
							{
								"isprivate": "0",
								"commentid": "3683942",
								"comment_count": "4",
								"who": {
									"text": "thoger",
									"name": "Tomas Hoger"
								},
								"bug_when": "2011-04-19 09:25:12 +0000",
								"thetext": "(In reply to comment #0)\n> This flaw was caused by the fix for bug #305131 which allowed empty modify\n> operations to proceed through the code.\n\nRelevant git commit:\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=6160200187b5b5f7ee662762b997c5c55401fe77\n\n(In reply to comment #3)\n> To ssh://git.fedorahosted.org/git/389/ds.git\n>    a123b54..1980427  master -> master\n> commit 1980427b8c78e79982c056ac270c6c3b11188830\n\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=1980427b8c78e79982c056ac270c6c3b11188830"
							}
						]
					},
					{
						"bug_id": "679542",
						"creation_ts": "2011-02-22 19:50:46 +0000",
						"short_desc": "empty modify operation with repl on or lastmod off will crash server",
						"delta_ts": "2015-01-04 23:46:36 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"675320"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676876",
								"alias": "CVE-2011-0704",
								"creation_ts": "2011-02-11 16:47:02 +0000",
								"short_desc": "CVE-2011-0704 389: replica crashes due to empty modify request when built with mozldap",
								"delta_ts": "2023-05-12 11:53:15 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"keywords": "Security",
								"priority": "low",
								"bug_severity": "low",
								"depends_on": [
									"675320",
									"679542"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3533177",
										"comment_count": "0",
										"who": {
											"text": "vdanen",
											"name": "Vincent Danen"
										},
										"bug_when": "2011-02-11 16:47:02 +0000",
										"thetext": "Andrew Kerr reported that a 389 replica would crash when an empty modify request is sent to it.  This can only happen if the 389 server is built with mozldap (not OpenLDAP) and the modify operation is replicated or the server set 'cn=config nsslapd-lastmod: off'.\n\n389 on Fedora 14 and later, as well as Red Hat Enterprise Linux 6, use OpenLDAP, not mozldap, and are thus unaffected.  This flaw does not affect Red Hat Directory Server 8.2.\n\nThis flaw was caused by the fix for bug #305131 which allowed empty modify operations to proceed through the code."
									},
									{
										"isprivate": "0",
										"commentid": "3533181",
										"comment_count": "1",
										"who": {
											"text": "vdanen",
											"name": "Vincent Danen"
										},
										"bug_when": "2011-02-11 16:48:21 +0000",
										"thetext": "Acknowledgements:\n\nRed Hat would like to thank Andrew Kerr for reporting this issue.\n\nStatement:\n\nNot vulnerable. This issue did not affect Red Hat Directory Server 8 packages."
									},
									{
										"isprivate": "0",
										"commentid": "3533305",
										"comment_count": "2",
										"who": {
											"text": "rmeggins",
											"name": "Rich Megginson"
										},
										"bug_when": "2011-02-11 18:10:00 +0000",
										"thetext": "Yes, the description looks good.  Thanks!"
									},
									{
										"isprivate": "0",
										"commentid": "3553752",
										"comment_count": "3",
										"who": {
											"text": "rmeggins",
											"name": "Rich Megginson"
										},
										"bug_when": "2011-02-22 19:49:06 +0000",
										"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   a123b54..1980427  master -> master\ncommit 1980427b8c78e79982c056ac270c6c3b11188830\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Wed Feb 9 14:54:29 2011 -0700\n    Reviewed by: nkinder, nhosoi (Thanks!)\n    Branch: master\n    Fix Description: Check the modifications after lastmod is applied, if any.\n    If there are still no mods to apply, just return LDAP_SUCCESS to the client\n    and end the modify request.  This makes it so that an empty modify is\n    allowed, but no further processing is done to avoid code that may not deal\n    with mods == NULL.\n    I also found a problem with the way an empty modify was handled.  OpenLDAP\n    does not return an explicit error code if there was a problem reading the\n    sequence of modify ops, so we have to resort to other checking.  This\nallows\n    an empty modify to pass through, when using either mozldap or openldap.\n    Platforms tested: RHEL5 x86_64, RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   5d4895c..a33cb58  389-ds-base-1.2.8 -> 389-ds-base-1.2.8"
									},
									{
										"isprivate": "0",
										"commentid": "3683942",
										"comment_count": "4",
										"who": {
											"text": "thoger",
											"name": "Tomas Hoger"
										},
										"bug_when": "2011-04-19 09:25:12 +0000",
										"thetext": "(In reply to comment #0)\n> This flaw was caused by the fix for bug #305131 which allowed empty modify\n> operations to proceed through the code.\n\nRelevant git commit:\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=6160200187b5b5f7ee662762b997c5c55401fe77\n\n(In reply to comment #3)\n> To ssh://git.fedorahosted.org/git/389/ds.git\n>    a123b54..1980427  master -> master\n> commit 1980427b8c78e79982c056ac270c6c3b11188830\n\nhttp://git.fedorahosted.org/git/?p=389/ds.git;a=commitdiff;h=1980427b8c78e79982c056ac270c6c3b11188830"
									}
								]
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3557031",
								"comment_count": "1",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-24 02:35:40 +0000",
								"thetext": "Vincent, can you remove the Security Sensitive Bug check?  It is preventing me from checking into CVS."
							},
							{
								"isprivate": "0",
								"commentid": "3558590",
								"comment_count": "2",
								"who": {
									"text": "vdanen",
									"name": "Vincent Danen"
								},
								"bug_when": "2011-02-24 16:11:00 +0000",
								"thetext": "Seems that Huzaifa already did that, so you should be ok now."
							},
							{
								"isprivate": "0",
								"commentid": "3642479",
								"comment_count": "5",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-03-31 10:42:46 +0000",
								"thetext": "Hi, \n\nI am testing this bug to verify the fix.\nI have 389, 1.2.8 and executed below steps :\n\n\n1) You have to have a client capable of sending an empty modify request -\nmozldap ldapmodify will not let you do this, but openldap ldapmodify will:\n\n# /usr/bin/ldapmodify -x <<EOF\ndn:\n\nEOF\n\nIt will warn, but allow the modify through.\n\n<Amita>\n[root@amsharma reslimit]# ldapmodify -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w pwd << EOF\ndn:\n\nEOF\nmodifying entry \"\"\n</Amita>\n\n2) You have to be using a server built with mozldap - servers built with\nopenldap will return an LDAP error when receiving an empty modify request\n\n<Amita>\nSorry, I could not do this as mozldap is deprecated. \n</Amita>\n\n3) Either the modify operation is replicated, or the server has set cn=config\nnsslapd-lastmod: off\n\n<Amita>\n[root@amsharma reslimit]# ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w pwd -b \"cn=config\" | grep nsslapd-lastmod\nnsslapd-lastmod: on\n[root@amsharma reslimit]# ldapmodify -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w pwd << EOF\n> dn: cn=config\n> changetype: modify\n> replace: nsslapd-lastmod\n> nsslapd-lastmod: off\n> EOF\nmodifying entry \"cn=config\"\n\n[root@amsharma reslimit]# ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w pwd -b \"cn=config\" | grep nsslapd-lastmod\nnsslapd-lastmod: off\n[root@amsharma reslimit]#\n</Amita>\n\nIf these conditions are met, the empty modify operation will crash the server.\n\n<Amita>\nServer was up and running, no crash found.\nI am putting this bug as VERIFIED, please revert in case of any more actions required.\n</Amita>"
							},
							{
								"isprivate": "0",
								"commentid": "3744610",
								"comment_count": "6",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:42:00 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3522281",
						"comment_count": "0",
						"who": {
							"text": "andrew",
							"name": "Andrew Kerr"
						},
						"bug_when": "2011-02-04 21:36:56 +0000",
						"thetext": "Created attachment 477123\nStack trace\n\nDescription of problem:\nThe process on the replica crashes.\n\nVersion-Release number of selected component (if applicable):\nA master server running 1.2.7.5, replicating to a server running 1.2.7.5.  Same hardware and software installation.\n\nHow reproducible:\nEvery time.  We have 10 replicas.  Each one running 1.2.7.5 will crash after some amount of time (few minutes to an hour).\n\nSteps to Reproduce:\n1. Enable replication from 1.2.7.5 master to 1.2.7.5 slave\n2. Initialize replica (this I believe works fine with no crash every time)\n3. Allow queries against replica\n4. Replica will crash, some times almost immediately and some times after 30 or so minutes.\n  \nActual results:\n\n\nExpected results:\n\nAdditional info:\nAll servers running a pretty bare installation of CentOS 5.5 with all updates.\n\nNothing relevant in the access or error logs (at level 8192), although I haven't turned off access log buffering yet.\n\nI can't tell yet if it is query related, replication related, or something else.  Same servers rolled back to version 1.2.4 do not crash (master left at 1.2.7.5, still stable).  The server running 1.2.7.5 also gets end-user queries, so the data and queries being the same, the only difference is that one is a master and the others are replicas, with only the replicas crashing."
					},
					{
						"isprivate": "0",
						"commentid": "3529180",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-09 15:38:56 +0000",
						"thetext": "I was able to reproduce the crash with openldap ldapmodify on EL5.\n\n1) You have to have a client capable of sending an empty modify request - mozldap ldapmodify will not let you do this, but openldap ldapmodify will:\n\n# /usr/bin/ldapmodify -x <<EOF\ndn:\n\nEOF\n\nIt will warn, but allow the modify through.\n\n2) You have to be using a server built with mozldap - servers built with openldap will return an LDAP error when receiving an empty modify request\n\n3) Either the modify operation is replicated, or the server has set cn=config nsslapd-lastmod: off\n\nIf these conditions are met, the empty modify operation will crash the server."
					},
					{
						"isprivate": "0",
						"commentid": "3553749",
						"comment_count": "20",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-22 19:48:05 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   a123b54..1980427  master -> master\ncommit 1980427b8c78e79982c056ac270c6c3b11188830\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Wed Feb 9 14:54:29 2011 -0700\n    Reviewed by: nkinder, nhosoi (Thanks!)\n    Branch: master\n    Fix Description: Check the modifications after lastmod is applied, if any.\n    If there are still no mods to apply, just return LDAP_SUCCESS to the client\n    and end the modify request.  This makes it so that an empty modify is\n    allowed, but no further processing is done to avoid code that may not deal\n    with mods == NULL.\n    I also found a problem with the way an empty modify was handled.  OpenLDAP\n    does not return an explicit error code if there was a problem reading the\n    sequence of modify ops, so we have to resort to other checking.  This allows\n    an empty modify to pass through, when using either mozldap or openldap.\n    Platforms tested: RHEL5 x86_64, RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   5d4895c..a33cb58  389-ds-base-1.2.8 -> 389-ds-base-1.2.8"
					},
					{
						"isprivate": "0",
						"commentid": "3553753",
						"comment_count": "21",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-22 19:49:34 +0000",
						"thetext": "Can I remove the Security tag on this bug?"
					},
					{
						"isprivate": "0",
						"commentid": "3553961",
						"comment_count": "22",
						"who": {
							"text": "vdanen",
							"name": "Vincent Danen"
						},
						"bug_when": "2011-02-22 21:32:16 +0000",
						"thetext": "I suppose you could, since this isn't a top-level bug, but is there a particular reason why you wanted to?"
					},
					{
						"isprivate": "0",
						"commentid": "3553995",
						"comment_count": "23",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-22 21:38:06 +0000",
						"thetext": "(In reply to comment #22)\n> I suppose you could, since this isn't a top-level bug, but is there a\n> particular reason why you wanted to?\n\nTo make it publicly visible?"
					},
					{
						"isprivate": "0",
						"commentid": "3556095",
						"comment_count": "24",
						"who": {
							"text": "vdanen",
							"name": "Vincent Danen"
						},
						"bug_when": "2011-02-23 17:26:52 +0000",
						"thetext": "Oh, you mean the group visibility settings (I thought you meant to remove the Security keyword).\n\nI'll remove the security group so that the bug will be public."
					},
					{
						"isprivate": "0",
						"commentid": "3556138",
						"comment_count": "25",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-23 17:46:59 +0000",
						"thetext": "Yes, that's what I meant.  Thanks!"
					},
					{
						"isprivate": "0",
						"commentid": "3800225",
						"comment_count": "26",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-06-08 11:32:19 +0000",
						"thetext": "Hi Rich,\n\nI saw \"the bug does not apply to RHDS 8.2. \nThe only affected 389 versions are 1.2.7 for EL5 and FC13.\"\n\nShould I verify this and how?\n\nThanks,\nAmita"
					},
					{
						"isprivate": "0",
						"commentid": "3800874",
						"comment_count": "27",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-06-08 15:50:15 +0000",
						"thetext": "(In reply to comment #26)\n> Hi Rich,\n> \n> I saw \"the bug does not apply to RHDS 8.2. \n> The only affected 389 versions are 1.2.7 for EL5 and FC13.\"\n> \n> Should I verify this and how?\n\nSince it doesn't affect RHEL6, just mark this as Upstream verified.\n\n> \n> Thanks,\n> Amita"
					}
				]
			}
		},
		{
			"bug_id": 675853,
			"title": "dirsrv crash segfault in need_new_pw()",
			"bugzilla": {
				"bug_id": "675853",
				"creation_ts": "2011-02-07 22:51:35 +0000",
				"short_desc": "dirsrv crash segfault in need_new_pw()",
				"delta_ts": "2015-12-07 16:36:12 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "medium",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "676407",
						"creation_ts": "2011-02-09 18:39:41 +0000",
						"short_desc": "dirsrv crash segfault in need_new_pw()",
						"delta_ts": "2015-01-04 23:46:18 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "medium",
						"depends_on": [
							"675853"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3529619",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2011-02-09 18:39:41 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #675853 +++\n\nI am running 389-ds-base-1.2.6.1-2 on RHEL 5.5:\n\nrpm -qi 389-ds-base\nName        : 389-ds-base                  Relocations: (not relocatable)\nVersion     : 1.2.6.1                           Vendor: Fedora Project\nRelease     : 2.el5                         Build Date: Thu 30 Sep 2010\n09:15:13 AM EST\nInstall Date: Mon 18 Oct 2010 03:45:22 PM EST      Build Host:\nx86-02.phx2.fedoraproject.org\nGroup       : System Environment/Daemons    Source RPM:\n389-ds-base-1.2.6.1-2.el5.src.rpm\nSize        : 5855143                          License: GPLv2 with exceptions\nSignature   : DSA/SHA1, Fri 01 Oct 2010 01:56:46 AM EST, Key ID\n119cc036217521f6\nPackager    : Fedora Project\nURL         : http://port389.org/\nSummary     : 389 Directory Server (base)\nDescription :\n389 Directory Server is an LDAPv3 compliant server.  The base package includes\nthe LDAP server and command line utilities for server administration.\n\n\n$ rpm -qa | grep 389\n389-console-1.1.4-1.el5\n389-dsgw-1.1.5-1.el5\n389-admin-1.1.11-1.el5\n389-ds-console-doc-1.2.3-1.el5\n389-ds-base-1.2.6.1-2.el5\n389-ds-console-1.2.3-1.el5\n389-ds-1.2.1-1.el5\n389-admin-console-1.1.5-1.el5\n389-ds-base-debuginfo-1.2.6.1-2.el5\n389-admin-console-doc-1.1.5-1.el5\n\nWe have been getting crashes every couple of weeks. See the output from core files below (it's 800MB core):\n\n(gdb) where\n#0  slapi_sdn_get_ndn (sdn=0x0) at ldap/servers/slapd/dn.c:1933\n#1  0x000000000042113d in need_new_pw (pb=0x2aaab13f0f70, t=0x52b7ce78, e=0x0, pwresponse_req=0) at ldap/servers/slapd/pw_mgmt.c:71\n#2  0x000000000040ecbf in do_bind (pb=0x2aaab13f0f70) at ldap/servers/slapd/bind.c:745\n#3  0x000000000041336d in connection_threadmain () at ldap/servers/slapd/connection.c:553\n#4  0x00000033c5a284ad in ?? () from /usr/lib64/libnspr4.so\n#5  0x00000033c1a0673d in start_thread () from /lib64/libpthread.so.0\n#6  0x00000033c12d3f6d in clone () from /lib64/libc.so.\n\n(gdb) print *pb\n$1 = {pb_backend = 0x1996ec00, pb_conn = 0x2aaaab81f750, pb_op = 0x2aaab29ed580, pb_plugin = 0x1992fb10, pb_opreturn = 0, pb_object = 0x0,\n  pb_destroy_fn = 0, pb_requestor_isroot = 0, pb_config_fname = 0x0, pb_config_lineno = 0, pb_config_argc = 0, pb_config_argv = 0x0,\n  pb_target_entry = 0x0, pb_existing_dn_entry = 0x0, pb_existing_uniqueid_entry = 0x0, pb_parent_entry = 0x0, pb_newparent_entry = 0x0,\n  pb_pre_op_entry = 0x0, pb_post_op_entry = 0x0, pb_seq_type = 0, pb_seq_attrname = 0x0, pb_seq_val = 0x0, pb_ldif_file = 0x0, pb_removedupvals = 0,\n  pb_db2index_attrs = 0x0, pb_ldif2db_noattrindexes = 0, pb_ldif_printkey = 0, pb_instance_name = 0x0, pb_task = 0x0, pb_task_flags = 0,\n  pb_mr_filter_match_fn = 0, pb_mr_filter_index_fn = 0, pb_mr_filter_reset_fn = 0, pb_mr_index_fn = 0, pb_mr_oid = 0x0, pb_mr_type = 0x0,\n  pb_mr_value = 0x0, pb_mr_values = 0x0, pb_mr_keys = 0x0, pb_mr_filter_reusable = 0, pb_mr_query_operator = 0, pb_mr_usage = 0,\n  pb_pwd_storage_scheme_user_passwd = 0x0, pb_pwd_storage_scheme_db_passwd = 0x0, pb_managedsait = 0, pb_internal_op_result = 0,\n  pb_plugin_internal_search_op_entries = 0x0, pb_plugin_internal_search_op_referrals = 0x0, pb_plugin_identity = 0x0, pb_parent_txn = 0x0, pb_txn = 0x0,\n  pb_dbsize = 0, pb_ldif_files = 0x0, pb_ldif_include = 0x0, pb_ldif_exclude = 0x0, pb_ldif_dump_replica = 0, pb_ldif_dump_uniqueid = 0,\n  pb_ldif_generate_uniqueid = 0, pb_ldif_namespaceid = 0x0, pb_ldif_encrypt = 0, pb_operation_notes = 0, pb_slapd_argc = 0, pb_slapd_argv = 0x0,\n  pb_slapd_configdir = 0x0, pb_ctrls_arg = 0x0, pb_dse_dont_add_write = 0, pb_dse_add_merge = 0, pb_dse_dont_check_dups = 0, pb_dse_is_primary_file = 0,\n  pb_schema_flags = 0, pb_result_code = 0, pb_result_text = 0x0, pb_result_matched = 0x0, pb_nentries = 0, urls = 0x0, pb_import_entry = 0x0,\n  pb_import_state = 0, pb_destroy_content = 0, pb_dse_reapply_mods = 0, pb_urp_naming_collision_dn = 0x0, pb_urp_tombstone_uniqueid = 0x0,\n  pb_server_running = 0, pb_backend_count = 1, pb_pwpolicy_ctrl = 0, pb_vattr_context = 0x0, pb_substrlens = 0x0, pb_plugin_enabled = 0,\n  pb_search_ctrls = 0x0, pb_mr_index_sv_fn = 0}\n\nWe not sure how this is occurring as we have turned off the ability for users to change their own passwords.\n\nIf you need any extra info from the core file let me know.\n\n--- Additional comment from daniel.appleby@deakin.edu.au on 2011-02-07 17:54:46 EST ---\n\nCreated attachment 477520\nthread apply all bt output\n\n--- Additional comment from nkinder@redhat.com on 2011-02-07 19:24:51 EST ---\n\nThe need_new_pw() function is called when a BIND operation is processed to see if a password is expired.  This crash is not being triggered by a password change operation.  This function does not expect to be passed a NULL pointer for the \"e\" variable, which should contain the entry that one is trying to bind as.\n\nIn do_bind (frame 2 of thread 1), what do the \"dn\", \"rawdn\", and \"sdn\" variables contain?\n\nDo you use the chaining feature of 389?  Do you do any binds that are something other than a simple bind, such as SASL or client certificate authentication?  Are you using the LDAPI autobind feature?\n\n--- Additional comment from daniel.appleby@deakin.edu.au on 2011-02-07 19:45:14 EST ---\n\n(gdb) down\n#2  0x000000000040ecbf in do_bind (pb=0x2aaab13f0f70)\n    at ldap/servers/slapd/bind.c:745\n(gdb) print dn\n$1 = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\"\n(gdb) print rawdn\n$2 = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\"\n(gdb) print sdn\n$3 = {flag = 6 '\\006',\n  dn = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\",\n  ndn = 0x2aaaaebeb9f0 \"uid=qx\\t,ou=people,dc=deakin,dc=edu,dc=au\",\n  ndn_len = 40}\n(gdb)\n\nWe have turned off all the password policies as we don't use them.\n\nIs the \\t in the dn normal?\n\n--- Additional comment from daniel.appleby@deakin.edu.au on 2011-02-07 21:50:39 EST ---\n\nWe don't use chaining. LDAPI and autobind are off:\n\nnsslapd-ldapifilepath: /var/run/slapd-auth-f.socket\nnsslapd-ldapilisten: off\nnsslapd-ldapiautobind: off\n\nWe use simple binds however could someone trying to connect as sasl cause an issue? Is their a way to turn it off on the server?\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 11:52:33 EST ---\n\n(In reply to comment #3)\n> \n> We have turned off all the password policies as we don't use them.\n\nThis code path will still be hit without password policies turned on.\n\n> \n> Is the \\t in the dn normal?\n\nNo, this is not normal and may be a part of the problem.  I will run some tests.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 13:30:53 EST ---\n\nDo you have an entry in your database that looks something similar to \"uid=qx\\t,ou=people,dc=deakin,dc=edu,dc=au\"?  Do you know what the client application is that is attempting to bind as this DN?\n\nIt is possible that the current versions of 389-ds-base do not have this problem as there have been many changes around DN normalization.  I would recommend that you use a more recent version of 389-ds-base.  The latest version in EPEL5 is 389-ds-base-1.2.7.5-1.\n\nI will continue testing to see if I can reproduce the issue on current code.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 14:41:28 EST ---\n\nI can reproduce this problem.  It is triggered by a bind with a valid DN and password except that the RDN has a tab at the end of it when binding.  For example, you can add a user like this:\n\n    dn: uid=foo,dc=example,dc=com\n    objectclass: posixaccount\n    cn: foo\n    userpassword: secret\n    uidnumber: 500\n    gidnumber: 500\n    homedirectory: /home/foo\n\nIf you then bind as that user like this, ns-slapd will crash:\n\n    ldapsearch -x -D \"uid=foo\\09,dc=example,dc=com\" -w secret -b \"dc=example,dc=com\" \"objectclass=*\"\n\nThis appears to be related to the entryrdn changes, as it doesn't affect versions prior to supporting modrdn with new superior.\n\nThe problem is that the call to get_entry() in do_bind() fails to find the bind target entry, but the call to the backend bind function succeeds, which then puts us on a path to call need_new_pw() with a NULL entry.  Versions prior to the entryrdn changes do not have the problem since the call to the backend bind function fails since it says that the bind target doesn't exist.  At this point, do_bind short circuits and returns an error to the client.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 15:02:20 EST ---\n\nThe find_entry() function in the backend code does find the entry yet get_entry() in the frontend code fails to find the entry.  These functions differ in the way they locate the bind target entry.\n\nThe get_entry() function uses slapi_search_internal_get_entry() to locate the entry.\n\nThe find_entry() function uses dn2entry().  This ends up using entryrdn_index_read() to find the entry by consulting the entryrdn index.  This in turn calls slapi_rdn_init_all_sdn() to break the DN into RDNs so it can use the RDN to consult the index.  This ends up removing the tab character, so the left-most RDN is \"uid=foo\" instead of \"uid=foo\\t\".  Since this truncated RDN does indeed exist, the index entry is found which results in fetching the entry from the database allowing the bind to succeed.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 16:32:05 EST ---\n\nThe root cause of the problem is that slapi_ldap_explode_dn() is truncating the trailing tab character off of the RDN.  When ns-slapd is built against MozLDAP, we use the MozLDAP ldap_explode_dn() function, which trims the tab character.  When ns-slapd is built against OpenLDAP, we use our own mozldap_ldap_explode_dn() function which mimics the MozLDAP function.  We do this because OpenLDAP has no equivalent function available.\n\nBoth the ldap_expode_dn() and mozldap_explode_dn() functions use the ldap_utf8isspace() function to decide which trailing characters to trim.  This function considers tabs (along other whitespace characters) to be a space in both the MozLDAP and 389 versions of the function.  This function is supposed to mimic the isspace() call, so I believe that it is behaving correctly.  I think we should not be using this function to trim trailing space (0x20) characters when exploding a DN.\n\nAs a compatibility test with OpenLDAP server, a bind using a trailing tab on the left-most RDN fails as if the user does not exist.  I believe that this is the correct behavior.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 17:15:52 EST ---\n\nCreated attachment 477699\nPatch\n\n--- Additional comment from daniel.appleby@deakin.edu.au on 2011-02-08 17:41:26 EST ---\n\nThanks Nathan.\n\nSo I have been unable to track which application is sending the tab in the bind. Do you know if the src ip of the connection is stored anywhere that I can access via the core file? maybe in pb variable somewhere?\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 18:49:07 EST ---\n\n(In reply to comment #11)\n> Thanks Nathan.\n> \n> So I have been unable to track which application is sending the tab in the\n> bind. Do you know if the src ip of the connection is stored anywhere that I can\n> access via the core file? maybe in pb variable somewhere?\n\nThe address is in pb->pb_conn->cin_addr, but it's not in a readible format.  It's stored as a NSPR PRNetAddr.  I'm not sure if there's an easy way to convert it within gdb, so it would require dumping memory from the core and trying to recreate the PRNetAddr in another test program.  You could then have that test program call PR_NetAddrToString() to get back a human-readible address.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-08 19:14:53 EST ---\n\nCreated attachment 477718\nAddress conversion program\n\nThis is a simple program which can be used to convert a dumped PRNetAddr to a human-readable network address string.\n\nThe source (netaddr.c) needs to be modified to make the \"addr\" array contain the dumped PRNetAddress that you want to convert.  To dump the PRNetAddr from your ns-slapd core, run the following command in gdb inside of the do_bind stack frame (be sure to dump the number of bytes returned by the call to sizeof on your system):\n\n(gdb) call sizeof(PRNetAddr)\n$20 = 112\n(gdb) x/112x pb->pb_conn->cin_addr\n\nAt this point you will get output like the following from gdb:\n\n0x1d22070:\t0x0a\t0x00\t0xce\t0x52\t0x00\t0x00\t0x00\t0x00\n0x1d22078:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22080:\t0x00\t0x00\t0xff\t0xff\t0x0a\t0x0e\t0x36\t0x8c\n0x1d22088:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22090:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22098:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220a0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220a8:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220b0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220b8:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220c0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n\nEliminate the addresses (left hand column) and copy the bytes into the initialization of the \"addr\" array in the netaddr.c source.  The bytes will need to be separated by commas as you will see in the example address in the source code.\n\nTo build netaddr, run the build.sh script.  You will need to have the nspr-devel package installed.  Once the program is build, simply run netaddr and it will print out the address in a readable format like this:\n\n[nkinder@localhost netaddr]$ ./netaddr \nAddress is ::ffff:10.14.54.140.\n\n--- Additional comment from daniel.appleby@deakin.edu.au on 2011-02-08 20:38:35 EST ---\n\nThis is what i get from gdb:\n\n(gdb) call sizeof(PRNetAddr)\n$1 = 112\n(gdb) x/112x pb->pb_conn->cin_addr\n0x2aaabd9b8fb0: 0x1b6c000a      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8fc0: 0xffff0000      0xf0a7b880      0x00000000      0x00000000\n0x2aaabd9b8fd0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8fe0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8ff0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9000: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9010: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9020: 0x00000080      0x00000000      0x00000035      0x00000000\n0x2aaabd9b9030: 0x31313032      0x39313130      0x35313530      0x005a3235\n0x2aaabd9b9040: 0xbc27e8c0      0x00002aaa      0xbc4a6360      0x00002aaa\n0x2aaabd9b9050: 0x00000030      0x00000000      0x00000035      0x00000000\n0x2aaabd9b9060: 0xbc76d5d0      0x00002aaa      0x00000004      0x00000000\n0x2aaabd9b9070: 0xb43009c0      0x00002aaa      0xb5121490      0x00002aaa\n0x2aaabd9b9080: 0x00000000      0x00000000      0x00000025      0x00000000\n0x2aaabd9b9090: 0x72746e65      0x00646979      0x5470756f      0x6c706972\n0x2aaabd9b90a0: 0x3d630065      0x00007561      0x00000045      0x00000000\n0x2aaabd9b90b0: 0x31642d66      0x7374692d      0x6d73632d      0x3736312d\n0x2aaabd9b90c0: 0x74616e2d      0x6c6f6f70      0x74656e2e      0x6165642e\n0x2aaabd9b90d0: 0x2e6e696b      0x2e756465      0x00007561      0x00000016\n0x2aaabd9b90e0: 0x00000017      0x00000018      0x00000025      0x00000000\n0x2aaabd9b90f0: 0x706d6973      0x0000656c      0x00000000      0x00000000\n0x2aaabd9b9100: 0x00000020      0x00000000      0x00000045      0x00000000\n0x2aaabd9b9110: 0x3d646975      0x7365706d      0x6f2c616b      0x65503d75\n0x2aaabd9b9120: 0x656c706f      0x3d63642c      0x6b616564      0x642c6e69\n0x2aaabd9b9130: 0x64653d63      0x63642c75      0x0075613d      0x00000000\n0x2aaabd9b9140: 0x00000000      0x00000000      0x00000055      0x00000000\n0x2aaabd9b9150: 0x00000001      0x00000000      0xb09fd220      0x00002aaa\n0x2aaabd9b9160: 0xaf4fc350      0x00002aaa      0x00005290      0x00000000\n\nPlacing the data into the program i get:\n\n$ ./netaddr\nAddress is ::.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-09 13:24:21 EST ---\n\n(In reply to comment #14)\n> This is what i get from gdb:\n> \n> (gdb) call sizeof(PRNetAddr)\n> $1 = 112\n> (gdb) x/112x pb->pb_conn->cin_addr\n> 0x2aaabd9b8fb0: 0x1b6c000a      0x00000000      0x00000000      0x00000000\n\nThis data in in the wrong format.  It turns out that gdb remembers the last size and format for the examine (x) command, and I had used \"xb\" previously.  Try using x/112xb to get the data listed in single bytes.\n\n--- Additional comment from nkinder@redhat.com on 2011-02-09 13:33:06 EST ---\n\nPushed patch to master.  Thanks to Noriko for her review!\n\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 1.18 KiB, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   10f6c0e..30cb812  master -> master"
							},
							{
								"isprivate": "0",
								"commentid": "3529622",
								"comment_count": "1",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2011-02-09 18:42:02 +0000",
								"thetext": "The patch for this has been pushed to the 389-ds-base-1.2.8 branch.\n\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 1.19 KiB, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   e87f581..f0e39fd  128-local -> 389-ds-base-1.2.8"
							},
							{
								"isprivate": "0",
								"commentid": "3680243",
								"comment_count": "3",
								"who": {
									"text": "ckannan",
									"name": "Chandrasekar Kannan"
								},
								"bug_when": "2011-04-18 01:22:44 +0000",
								"thetext": "\n\nworks ok now. verified with 389-ds-base-1.2.8.2-1.el6.i686\n\n[root@ds90-rhel6-32vm ~]# ldapsearch -x -D \"uid=foo,dc=idm,dc=lab,dc=bos,dc=redhat,dc=com\" -w secret123 -b \"dc=idm,dc=lab,dc=bos,dc=redhat,dc=com\" \"objectclass=*\" | grep ^dn | wc -l\n210\n[root@ds90-rhel6-32vm ~]# \n[root@ds90-rhel6-32vm ~]# \n[root@ds90-rhel6-32vm ~]# \n[root@ds90-rhel6-32vm ~]# ldapsearch -x -D \"uid=foo\\09,dc=idm,dc=lab,dc=bos,dc=redhat,dc=com\" -w secret123 -b \"dc=idm,dc=lab,dc=bos,dc=redhat,dc=com\" \"objectclass=*\" | grep ^dn | wc -l\nldap_bind: No such object (32)\n\tmatched DN: dc=idm,dc=lab,dc=bos,dc=redhat,dc=com\n0"
							},
							{
								"isprivate": "0",
								"commentid": "3744585",
								"comment_count": "4",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:21 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3525461",
						"comment_count": "0",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-07 22:51:35 +0000",
						"thetext": "I am running 389-ds-base-1.2.6.1-2 on RHEL 5.5:\n\nrpm -qi 389-ds-base\nName        : 389-ds-base                  Relocations: (not relocatable)\nVersion     : 1.2.6.1                           Vendor: Fedora Project\nRelease     : 2.el5                         Build Date: Thu 30 Sep 2010\n09:15:13 AM EST\nInstall Date: Mon 18 Oct 2010 03:45:22 PM EST      Build Host:\nx86-02.phx2.fedoraproject.org\nGroup       : System Environment/Daemons    Source RPM:\n389-ds-base-1.2.6.1-2.el5.src.rpm\nSize        : 5855143                          License: GPLv2 with exceptions\nSignature   : DSA/SHA1, Fri 01 Oct 2010 01:56:46 AM EST, Key ID\n119cc036217521f6\nPackager    : Fedora Project\nURL         : http://port389.org/\nSummary     : 389 Directory Server (base)\nDescription :\n389 Directory Server is an LDAPv3 compliant server.  The base package includes\nthe LDAP server and command line utilities for server administration.\n\n\n$ rpm -qa | grep 389\n389-console-1.1.4-1.el5\n389-dsgw-1.1.5-1.el5\n389-admin-1.1.11-1.el5\n389-ds-console-doc-1.2.3-1.el5\n389-ds-base-1.2.6.1-2.el5\n389-ds-console-1.2.3-1.el5\n389-ds-1.2.1-1.el5\n389-admin-console-1.1.5-1.el5\n389-ds-base-debuginfo-1.2.6.1-2.el5\n389-admin-console-doc-1.1.5-1.el5\n\nWe have been getting crashes every couple of weeks. See the output from core files below (it's 800MB core):\n\n(gdb) where\n#0  slapi_sdn_get_ndn (sdn=0x0) at ldap/servers/slapd/dn.c:1933\n#1  0x000000000042113d in need_new_pw (pb=0x2aaab13f0f70, t=0x52b7ce78, e=0x0, pwresponse_req=0) at ldap/servers/slapd/pw_mgmt.c:71\n#2  0x000000000040ecbf in do_bind (pb=0x2aaab13f0f70) at ldap/servers/slapd/bind.c:745\n#3  0x000000000041336d in connection_threadmain () at ldap/servers/slapd/connection.c:553\n#4  0x00000033c5a284ad in ?? () from /usr/lib64/libnspr4.so\n#5  0x00000033c1a0673d in start_thread () from /lib64/libpthread.so.0\n#6  0x00000033c12d3f6d in clone () from /lib64/libc.so.\n\n(gdb) print *pb\n$1 = {pb_backend = 0x1996ec00, pb_conn = 0x2aaaab81f750, pb_op = 0x2aaab29ed580, pb_plugin = 0x1992fb10, pb_opreturn = 0, pb_object = 0x0,\n  pb_destroy_fn = 0, pb_requestor_isroot = 0, pb_config_fname = 0x0, pb_config_lineno = 0, pb_config_argc = 0, pb_config_argv = 0x0,\n  pb_target_entry = 0x0, pb_existing_dn_entry = 0x0, pb_existing_uniqueid_entry = 0x0, pb_parent_entry = 0x0, pb_newparent_entry = 0x0,\n  pb_pre_op_entry = 0x0, pb_post_op_entry = 0x0, pb_seq_type = 0, pb_seq_attrname = 0x0, pb_seq_val = 0x0, pb_ldif_file = 0x0, pb_removedupvals = 0,\n  pb_db2index_attrs = 0x0, pb_ldif2db_noattrindexes = 0, pb_ldif_printkey = 0, pb_instance_name = 0x0, pb_task = 0x0, pb_task_flags = 0,\n  pb_mr_filter_match_fn = 0, pb_mr_filter_index_fn = 0, pb_mr_filter_reset_fn = 0, pb_mr_index_fn = 0, pb_mr_oid = 0x0, pb_mr_type = 0x0,\n  pb_mr_value = 0x0, pb_mr_values = 0x0, pb_mr_keys = 0x0, pb_mr_filter_reusable = 0, pb_mr_query_operator = 0, pb_mr_usage = 0,\n  pb_pwd_storage_scheme_user_passwd = 0x0, pb_pwd_storage_scheme_db_passwd = 0x0, pb_managedsait = 0, pb_internal_op_result = 0,\n  pb_plugin_internal_search_op_entries = 0x0, pb_plugin_internal_search_op_referrals = 0x0, pb_plugin_identity = 0x0, pb_parent_txn = 0x0, pb_txn = 0x0,\n  pb_dbsize = 0, pb_ldif_files = 0x0, pb_ldif_include = 0x0, pb_ldif_exclude = 0x0, pb_ldif_dump_replica = 0, pb_ldif_dump_uniqueid = 0,\n  pb_ldif_generate_uniqueid = 0, pb_ldif_namespaceid = 0x0, pb_ldif_encrypt = 0, pb_operation_notes = 0, pb_slapd_argc = 0, pb_slapd_argv = 0x0,\n  pb_slapd_configdir = 0x0, pb_ctrls_arg = 0x0, pb_dse_dont_add_write = 0, pb_dse_add_merge = 0, pb_dse_dont_check_dups = 0, pb_dse_is_primary_file = 0,\n  pb_schema_flags = 0, pb_result_code = 0, pb_result_text = 0x0, pb_result_matched = 0x0, pb_nentries = 0, urls = 0x0, pb_import_entry = 0x0,\n  pb_import_state = 0, pb_destroy_content = 0, pb_dse_reapply_mods = 0, pb_urp_naming_collision_dn = 0x0, pb_urp_tombstone_uniqueid = 0x0,\n  pb_server_running = 0, pb_backend_count = 1, pb_pwpolicy_ctrl = 0, pb_vattr_context = 0x0, pb_substrlens = 0x0, pb_plugin_enabled = 0,\n  pb_search_ctrls = 0x0, pb_mr_index_sv_fn = 0}\n\nWe not sure how this is occurring as we have turned off the ability for users to change their own passwords.\n\nIf you need any extra info from the core file let me know."
					},
					{
						"isprivate": "0",
						"commentid": "3525465",
						"comment_count": "1",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-07 22:54:46 +0000",
						"thetext": "Created attachment 477520\nthread apply all bt output"
					},
					{
						"isprivate": "0",
						"commentid": "3525554",
						"comment_count": "2",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 00:24:51 +0000",
						"thetext": "The need_new_pw() function is called when a BIND operation is processed to see if a password is expired.  This crash is not being triggered by a password change operation.  This function does not expect to be passed a NULL pointer for the \"e\" variable, which should contain the entry that one is trying to bind as.\n\nIn do_bind (frame 2 of thread 1), what do the \"dn\", \"rawdn\", and \"sdn\" variables contain?\n\nDo you use the chaining feature of 389?  Do you do any binds that are something other than a simple bind, such as SASL or client certificate authentication?  Are you using the LDAPI autobind feature?"
					},
					{
						"isprivate": "0",
						"commentid": "3525567",
						"comment_count": "3",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-08 00:45:14 +0000",
						"thetext": "(gdb) down\n#2  0x000000000040ecbf in do_bind (pb=0x2aaab13f0f70)\n    at ldap/servers/slapd/bind.c:745\n(gdb) print dn\n$1 = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\"\n(gdb) print rawdn\n$2 = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\"\n(gdb) print sdn\n$3 = {flag = 6 '\\006',\n  dn = 0x2aaaae4aeba0 \"uid=qx\\t,ou=People,dc=deakin,dc=edu,dc=au\",\n  ndn = 0x2aaaaebeb9f0 \"uid=qx\\t,ou=people,dc=deakin,dc=edu,dc=au\",\n  ndn_len = 40}\n(gdb)\n\nWe have turned off all the password policies as we don't use them.\n\nIs the \\t in the dn normal?"
					},
					{
						"isprivate": "0",
						"commentid": "3525635",
						"comment_count": "4",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-08 02:50:39 +0000",
						"thetext": "We don't use chaining. LDAPI and autobind are off:\n\nnsslapd-ldapifilepath: /var/run/slapd-auth-f.socket\nnsslapd-ldapilisten: off\nnsslapd-ldapiautobind: off\n\nWe use simple binds however could someone trying to connect as sasl cause an issue? Is their a way to turn it off on the server?"
					},
					{
						"isprivate": "0",
						"commentid": "3526781",
						"comment_count": "5",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 16:52:33 +0000",
						"thetext": "(In reply to comment #3)\n> \n> We have turned off all the password policies as we don't use them.\n\nThis code path will still be hit without password policies turned on.\n\n> \n> Is the \\t in the dn normal?\n\nNo, this is not normal and may be a part of the problem.  I will run some tests."
					},
					{
						"isprivate": "0",
						"commentid": "3527289",
						"comment_count": "6",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 18:30:53 +0000",
						"thetext": "Do you have an entry in your database that looks something similar to \"uid=qx\\t,ou=people,dc=deakin,dc=edu,dc=au\"?  Do you know what the client application is that is attempting to bind as this DN?\n\nIt is possible that the current versions of 389-ds-base do not have this problem as there have been many changes around DN normalization.  I would recommend that you use a more recent version of 389-ds-base.  The latest version in EPEL5 is 389-ds-base-1.2.7.5-1.\n\nI will continue testing to see if I can reproduce the issue on current code."
					},
					{
						"isprivate": "0",
						"commentid": "3527480",
						"comment_count": "7",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 19:41:28 +0000",
						"thetext": "I can reproduce this problem.  It is triggered by a bind with a valid DN and password except that the RDN has a tab at the end of it when binding.  For example, you can add a user like this:\n\n    dn: uid=foo,dc=example,dc=com\n    objectclass: posixaccount\n    cn: foo\n    userpassword: secret\n    uidnumber: 500\n    gidnumber: 500\n    homedirectory: /home/foo\n\nIf you then bind as that user like this, ns-slapd will crash:\n\n    ldapsearch -x -D \"uid=foo\\09,dc=example,dc=com\" -w secret -b \"dc=example,dc=com\" \"objectclass=*\"\n\nThis appears to be related to the entryrdn changes, as it doesn't affect versions prior to supporting modrdn with new superior.\n\nThe problem is that the call to get_entry() in do_bind() fails to find the bind target entry, but the call to the backend bind function succeeds, which then puts us on a path to call need_new_pw() with a NULL entry.  Versions prior to the entryrdn changes do not have the problem since the call to the backend bind function fails since it says that the bind target doesn't exist.  At this point, do_bind short circuits and returns an error to the client."
					},
					{
						"isprivate": "0",
						"commentid": "3527515",
						"comment_count": "8",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 20:02:20 +0000",
						"thetext": "The find_entry() function in the backend code does find the entry yet get_entry() in the frontend code fails to find the entry.  These functions differ in the way they locate the bind target entry.\n\nThe get_entry() function uses slapi_search_internal_get_entry() to locate the entry.\n\nThe find_entry() function uses dn2entry().  This ends up using entryrdn_index_read() to find the entry by consulting the entryrdn index.  This in turn calls slapi_rdn_init_all_sdn() to break the DN into RDNs so it can use the RDN to consult the index.  This ends up removing the tab character, so the left-most RDN is \"uid=foo\" instead of \"uid=foo\\t\".  Since this truncated RDN does indeed exist, the index entry is found which results in fetching the entry from the database allowing the bind to succeed."
					},
					{
						"isprivate": "0",
						"commentid": "3527729",
						"comment_count": "9",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 21:32:05 +0000",
						"thetext": "The root cause of the problem is that slapi_ldap_explode_dn() is truncating the trailing tab character off of the RDN.  When ns-slapd is built against MozLDAP, we use the MozLDAP ldap_explode_dn() function, which trims the tab character.  When ns-slapd is built against OpenLDAP, we use our own mozldap_ldap_explode_dn() function which mimics the MozLDAP function.  We do this because OpenLDAP has no equivalent function available.\n\nBoth the ldap_expode_dn() and mozldap_explode_dn() functions use the ldap_utf8isspace() function to decide which trailing characters to trim.  This function considers tabs (along other whitespace characters) to be a space in both the MozLDAP and 389 versions of the function.  This function is supposed to mimic the isspace() call, so I believe that it is behaving correctly.  I think we should not be using this function to trim trailing space (0x20) characters when exploding a DN.\n\nAs a compatibility test with OpenLDAP server, a bind using a trailing tab on the left-most RDN fails as if the user does not exist.  I believe that this is the correct behavior."
					},
					{
						"isprivate": "0",
						"commentid": "3527829",
						"comment_count": "10",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 22:15:52 +0000",
						"thetext": "Created attachment 477699\nPatch"
					},
					{
						"isprivate": "0",
						"commentid": "3527864",
						"comment_count": "11",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-08 22:41:26 +0000",
						"thetext": "Thanks Nathan.\n\nSo I have been unable to track which application is sending the tab in the bind. Do you know if the src ip of the connection is stored anywhere that I can access via the core file? maybe in pb variable somewhere?"
					},
					{
						"isprivate": "0",
						"commentid": "3528015",
						"comment_count": "12",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-08 23:49:07 +0000",
						"thetext": "(In reply to comment #11)\n> Thanks Nathan.\n> \n> So I have been unable to track which application is sending the tab in the\n> bind. Do you know if the src ip of the connection is stored anywhere that I can\n> access via the core file? maybe in pb variable somewhere?\n\nThe address is in pb->pb_conn->cin_addr, but it's not in a readible format.  It's stored as a NSPR PRNetAddr.  I'm not sure if there's an easy way to convert it within gdb, so it would require dumping memory from the core and trying to recreate the PRNetAddr in another test program.  You could then have that test program call PR_NetAddrToString() to get back a human-readible address."
					},
					{
						"isprivate": "0",
						"commentid": "3528039",
						"comment_count": "13",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-09 00:14:53 +0000",
						"thetext": "Created attachment 477718\nAddress conversion program\n\nThis is a simple program which can be used to convert a dumped PRNetAddr to a human-readable network address string.\n\nThe source (netaddr.c) needs to be modified to make the \"addr\" array contain the dumped PRNetAddress that you want to convert.  To dump the PRNetAddr from your ns-slapd core, run the following command in gdb inside of the do_bind stack frame (be sure to dump the number of bytes returned by the call to sizeof on your system):\n\n(gdb) call sizeof(PRNetAddr)\n$20 = 112\n(gdb) x/112x pb->pb_conn->cin_addr\n\nAt this point you will get output like the following from gdb:\n\n0x1d22070:\t0x0a\t0x00\t0xce\t0x52\t0x00\t0x00\t0x00\t0x00\n0x1d22078:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22080:\t0x00\t0x00\t0xff\t0xff\t0x0a\t0x0e\t0x36\t0x8c\n0x1d22088:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22090:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d22098:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220a0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220a8:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220b0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220b8:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n0x1d220c0:\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\t0x00\n\nEliminate the addresses (left hand column) and copy the bytes into the initialization of the \"addr\" array in the netaddr.c source.  The bytes will need to be separated by commas as you will see in the example address in the source code.\n\nTo build netaddr, run the build.sh script.  You will need to have the nspr-devel package installed.  Once the program is build, simply run netaddr and it will print out the address in a readable format like this:\n\n[nkinder@localhost netaddr]$ ./netaddr \nAddress is ::ffff:10.14.54.140."
					},
					{
						"isprivate": "0",
						"commentid": "3528088",
						"comment_count": "14",
						"who": {
							"text": "daniel.appleby",
							"name": "Daniel"
						},
						"bug_when": "2011-02-09 01:38:35 +0000",
						"thetext": "This is what i get from gdb:\n\n(gdb) call sizeof(PRNetAddr)\n$1 = 112\n(gdb) x/112x pb->pb_conn->cin_addr\n0x2aaabd9b8fb0: 0x1b6c000a      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8fc0: 0xffff0000      0xf0a7b880      0x00000000      0x00000000\n0x2aaabd9b8fd0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8fe0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b8ff0: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9000: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9010: 0x00000000      0x00000000      0x00000000      0x00000000\n0x2aaabd9b9020: 0x00000080      0x00000000      0x00000035      0x00000000\n0x2aaabd9b9030: 0x31313032      0x39313130      0x35313530      0x005a3235\n0x2aaabd9b9040: 0xbc27e8c0      0x00002aaa      0xbc4a6360      0x00002aaa\n0x2aaabd9b9050: 0x00000030      0x00000000      0x00000035      0x00000000\n0x2aaabd9b9060: 0xbc76d5d0      0x00002aaa      0x00000004      0x00000000\n0x2aaabd9b9070: 0xb43009c0      0x00002aaa      0xb5121490      0x00002aaa\n0x2aaabd9b9080: 0x00000000      0x00000000      0x00000025      0x00000000\n0x2aaabd9b9090: 0x72746e65      0x00646979      0x5470756f      0x6c706972\n0x2aaabd9b90a0: 0x3d630065      0x00007561      0x00000045      0x00000000\n0x2aaabd9b90b0: 0x31642d66      0x7374692d      0x6d73632d      0x3736312d\n0x2aaabd9b90c0: 0x74616e2d      0x6c6f6f70      0x74656e2e      0x6165642e\n0x2aaabd9b90d0: 0x2e6e696b      0x2e756465      0x00007561      0x00000016\n0x2aaabd9b90e0: 0x00000017      0x00000018      0x00000025      0x00000000\n0x2aaabd9b90f0: 0x706d6973      0x0000656c      0x00000000      0x00000000\n0x2aaabd9b9100: 0x00000020      0x00000000      0x00000045      0x00000000\n0x2aaabd9b9110: 0x3d646975      0x7365706d      0x6f2c616b      0x65503d75\n0x2aaabd9b9120: 0x656c706f      0x3d63642c      0x6b616564      0x642c6e69\n0x2aaabd9b9130: 0x64653d63      0x63642c75      0x0075613d      0x00000000\n0x2aaabd9b9140: 0x00000000      0x00000000      0x00000055      0x00000000\n0x2aaabd9b9150: 0x00000001      0x00000000      0xb09fd220      0x00002aaa\n0x2aaabd9b9160: 0xaf4fc350      0x00002aaa      0x00005290      0x00000000\n\nPlacing the data into the program i get:\n\n$ ./netaddr\nAddress is ::."
					},
					{
						"isprivate": "0",
						"commentid": "3529599",
						"comment_count": "15",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-09 18:24:21 +0000",
						"thetext": "(In reply to comment #14)\n> This is what i get from gdb:\n> \n> (gdb) call sizeof(PRNetAddr)\n> $1 = 112\n> (gdb) x/112x pb->pb_conn->cin_addr\n> 0x2aaabd9b8fb0: 0x1b6c000a      0x00000000      0x00000000      0x00000000\n\nThis data in in the wrong format.  It turns out that gdb remembers the last size and format for the examine (x) command, and I had used \"xb\" previously.  Try using x/112xb to get the data listed in single bytes."
					},
					{
						"isprivate": "0",
						"commentid": "3529609",
						"comment_count": "16",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-09 18:33:06 +0000",
						"thetext": "Pushed patch to master.  Thanks to Noriko for her review!\n\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 1.18 KiB, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   10f6c0e..30cb812  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3800349",
						"comment_count": "17",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-06-08 12:46:53 +0000",
						"thetext": "Tested using comment#7.\n\n[root@testvm ~]# ldapadd -x -h localhost -p 389 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: uid=foo,ou=people,dc=testnew,dc=com\nobjectclass: posixaccount\ncn: foo\nuserpassword: secret\nuidnumber: 500\ngidnumber: 500\nhomedirectory: /home/foo\nEOF\n\nadding new entry \"uid=foo,ou=people,dc=testnew,dc=com\"\n\n\n[root@testvm ~]# service dirsrv status\ndirsrv testvm (pid 3316) is running...\ndirsrv testvm1 (pid 3394) is running...\n\n[root@testvm ~]# ldapsearch -x -h localhost -p 389 -D \"uid=foo\\09,ou=people,dc=testnew,dc=com\" -w secret -b \"ou=people,dc=testnew,dc=com\"\nldap_bind: No such object (32)\n\tmatched DN: ou=people,dc=testnew,dc=com\n\n[root@testvm ~]# service dirsrv status\ndirsrv testvm (pid 3316) is running...\ndirsrv testvm1 (pid 3394) is running...\n[root@testvm ~]#"
					}
				]
			}
		},
		{
			"bug_id": 676053,
			"title": "export task followed by import task causes cache assertion",
			"bugzilla": {
				"bug_id": "676053",
				"creation_ts": "2011-02-08 17:58:34 +0000",
				"short_desc": "export task followed by import task causes cache assertion",
				"delta_ts": "2015-12-07 17:09:38 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "unspecified",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "677483",
						"creation_ts": "2011-02-14 23:32:23 +0000",
						"short_desc": "export task followed by import task causes cache assertion",
						"delta_ts": "2015-01-04 23:46:27 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"676053",
							"678369"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3551256",
								"comment_count": "1",
								"who": {
									"text": "shaines",
									"name": "Scott Haines"
								},
								"bug_when": "2011-02-21 21:35:54 +0000",
								"thetext": "*** Bug 678369 has been marked as a duplicate of this bug. ***"
							},
							{
								"isprivate": "0",
								"commentid": "3641974",
								"comment_count": "6",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-03-31 06:32:44 +0000",
								"thetext": "Hi Noriko,\n\nI am testing Bug 677483 -  export task followed by import task causes cache assertion.\nThis is very interesting and big one, like an interesting novel :)\n  \nI concluded there are in total 3 bugs under this one -\n\n1. Description: Task version of export had a bug in  handling the busy instance error case.  When returning due to the busy  error, the function  ldbm_back_ldbm2ldif reset the busy bit set by other  threads. This patch checks the special return value set in the busy  error case and resets the busy bit only when it is set by the function.\n\nVerify steps :\nSet up 2-way mmr\n1. On one window, be a root:\n# cd /usr/lib64/dirsrv/slapd-amsharma\n# while true; do\n./db2ldif.pl -D \"cn=directory Manager\" -w Secret123 -r -n userRootNT -a /tmp/export.ldif; ./ldif2db.pl -D \"cn=Directory Manager\" -w Secret123 -n userRootNT \" -i /tmp/export.ldif; done\n\n**********It gives me Operations error (1) **********************************\n\n\n2. On another window:\n$ while true; do ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=example,dc=com\" \"(cn=*)\"; done\n\n**********It gives me Operations error (1)**************************************\n\nRun the commands for an hour or so.\nIf you don't see the following error message in the error log\nand the server keeps running, the fix is verified.\n\n************I am getting below ***********************************************\n[amsharma@amsharma /]$ tail -f /var/log/dirsrv/slapd-amsharma/errors\n[30/Mar/2011:19:08:00 +051800] - ldbm: 'example' is already in the middle of another task and cannot be disturbed.\n[30/Mar/2011:19:08:00 +051800] - import example: Processing file \"/tmp/export.ldif\"\n[30/Mar/2011:19:08:00 +051800] - import example: Finished scanning file \"/tmp/export.ldif\" (9 entries)\n[30/Mar/2011:19:08:01 +051800] - import example: Workers finished; cleaning up...\n[30/Mar/2011:19:08:01 +051800] - import example: Workers cleaned up.\n[30/Mar/2011:19:08:01 +051800] - import example: Cleaning up producer thread...\n[30/Mar/2011:19:08:01 +051800] - import example: Indexing complete.  Post-processing...\n[30/Mar/2011:19:08:01 +051800] - import example: Flushing caches...\n[30/Mar/2011:19:08:01 +051800] - import example: Closing files...\n[30/Mar/2011:19:08:02 +051800] - import example: Import complete.  Processed 9 entries in 1 seconds. (9.00 entries/sec)\n\n********************Noriko, is it as expected, I am not getting this error \"entrycache_clear_int\"*********************************************************************************\n\n2. Description: \nWhen Simple Paged Results is requested and a page is\nreturned, one entry is read ahead to check whether more entries\nexist or not.  The read-ahead retrieves an entry (if any) and adds\nit into the entry cache.  Simple Paged Results code puts the read-\nahead entry back, but there was missing to call cache_return for\nthe entry (that decrementing refcnt).  If ldif2db.pl is called with\nthe cache state, it finds out the entry which is still referred.\nThis patch calls cache_return when the Simple Paged Results puts\nthe read-ahead entry back.  Plus, adding a debug function dump_hash.\n\nVerify steps :\nPrepare a server with some entries (> 10 entries).\nRun Simple Paged Result search and stops before getting all entries.\n  $ ldapsearch -x -h localhost -p 1389 -b \"dc=example,dc=com\" -E pr=2 \"(cn=*)\"\n  ...\n  # search result\n  search: 8\n  result: 0 Success\n  control: 1.2.840.113556.1.4.319 false MAcCAgPbBAEy\n  pagedresults: estimate=987 cookie=Mg==\n  Press [size] Enter for the next {2|size} entries.\n\nRun ./db2ldif.pl\n  # ./db2ldif.pl -D 'cn=directory manager' -w Secret123 -n userRootNT -a /tmp/export.ldif\n\nRun ./ldif2db.pl\n  # ./ldif2db.pl -n userRootNT -D 'cn=directory manager' -w Secret123 -i /tmp/export.ldif\n  \nCheck error log:\n  # grep entrycache_clear_int /var/log/dirsrv/slapd-ID/errors\n  # echo $?\n  1\nIf the keyword is not found in the error log, the bug was verified.\n\n*************This one is all set, no errors are there**********************************************\n\n3. Description: \nWhen a search request with VLV and/or SORT control\nfails, it did not returning an entry to the entry cache.  The\nentry has positive refcnt and won't be cleared even by cache_clear.\nThis patch adds CACHE_RETURN call for the error cases.\n\n********I think it is covered in the 4th one? or do I need to verify this with it some other steps? ********\n\n4. Description:\nThere were 3 places where an entry was not released\nby CACHE_RETURN (not decrimenting refcnt).  If an entry has positive\nrefcnt in the entry cache, it won't be released even if the entry\nnever be accessed.\n1. When a search request with VLV and/or SORT control fails.\n2. When comparing entries in compare_entries_sv, and the second\nentry is not found, the first entry is not released.\n3. vlv_trim_candidates_byvalue retrieves entries for performing\nbinary search over the candidate list and put them into the cache.\nThey are not released.\n\nVerify steps.\n1. setup a server with suffix \"o=umc\".\n./AddSuffix \"o=umc\" userRootNT 1389 localhost\n\nshutdown the server\n\nput 99umcschema.ldif in /etc/dirsrv/slapd-ID/schema\n\nopen dse.ldif and append the contents of index.ldif at the end of the file\n\nimport db_Febr15_noRep.ldif.\n\nldif2db -n userRootNT -i /tmp/db_Febr15_noRep.ldif\n\nstart the server\n\n2. run ldapsearch:\n$ /usr/lib[64]/mozldap/ldapsearch -p <port> -D\n'cn=cli,ou=components,o=operators,o=UMC' -w cli -b \"o=umc\" -s sub -S\n'-createTimestamp' -x -G 0:2:3 \"(objectClass=*)\" \"createTimestamp\nmodifyTimestamp\"\n\ncd /usr/lib64/mozldap\n/usr/lib64/mozldap/ldapsearch -p 1389 -D 'cn=cli,ou=components,o=operators,o=UMC' -w cli -b \"o=umc\" -s sub -S '-createTimestamp' -x -G 0:2:3 \"(objectClass=*)\" \"createTimestamp modifyTimestamp\"\n\n******** Above ldapsearch is not giving me any output?? Is it as expected? ****************\n\n3. run task import\ncd /usr/lib64/dirsrv/slapd-amsharma\n# ./ldif2db.pl -D 'cn=directory manager' -w Secret123 -n userRootNT -i /tmp/db_Febr15_noRep.ldif\n\n4. check error log\n# grep entrycache_clear_int /var/log/dirsrv/slapd-amsharma/errors\nIf the keyword is not found, the bug is verified.\n\n****Note : I did not face any slapd crash and error \"entrycache_clear_int\" while executing above scenarios************************"
							},
							{
								"isprivate": "0",
								"commentid": "3744606",
								"comment_count": "8",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:51 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					},
					{
						"bug_id": "678369",
						"creation_ts": "2011-02-17 17:34:33 +0000",
						"short_desc": "export task followed by import task causes cache assertion",
						"delta_ts": "2015-01-04 23:46:35 +0000",
						"bug_status": "CLOSED",
						"resolution": "DUPLICATE",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"676053"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "677483",
								"creation_ts": "2011-02-14 23:32:23 +0000",
								"short_desc": "export task followed by import task causes cache assertion",
								"delta_ts": "2015-01-04 23:46:27 +0000",
								"bug_status": "CLOSED",
								"resolution": "ERRATA",
								"keywords": "screened",
								"priority": "high",
								"bug_severity": "high",
								"depends_on": [
									"676053",
									"678369"
								],
								"blocked": [
									{
										"bug_id": "639035",
										"error": "NotPermitted"
									},
									{
										"bug_id": "656390",
										"alias": "389_1.2.8",
										"creation_ts": "2010-11-23 16:17:56 +0000",
										"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
										"delta_ts": "2015-01-04 23:44:59 +0000",
										"bug_status": "CLOSED",
										"resolution": "CURRENTRELEASE",
										"priority": "high",
										"bug_severity": "medium",
										"depends_on": [
											"182507",
											"197886",
											"201652",
											"252249",
											"430321",
											"450016",
											"481195",
											"505722",
											"509897",
											"514190",
											"515329",
											"518890",
											"527912",
											"543633",
											"555577",
											"567282",
											"576534",
											"588480",
											"588791",
											"604881",
											"622907",
											"624485",
											"624547",
											"638511",
											"641944",
											"642046",
											"644784",
											"646381",
											"653007",
											"654054",
											"654057",
											"656734",
											"659131",
											"659776",
											"661102",
											"663191",
											"667935",
											"668385",
											"668862",
											"668909",
											"669205",
											"670616",
											"671033",
											"672313",
											"674430",
											"674852",
											"675113",
											"675265",
											"675320",
											"675853",
											"676053",
											"676407",
											"676655",
											"676666",
											"676689",
											"676729",
											"676733",
											"677440",
											"677464",
											"677465",
											"677467",
											"677483",
											"677705",
											"677774",
											"678369",
											"678646",
											"679542",
											"679978",
											"680284",
											"680305",
											"680555",
											"680558",
											"681015",
											"681332",
											"681351",
											"681379",
											"681550",
											"681611",
											"681720",
											"681726",
											"683250",
											"684349",
											"684996",
											"689866",
											"689889",
											"689952",
											"690526",
											"690955",
											"691486",
											"692331",
											"692937",
											"692991",
											"693451",
											"693455",
											"693466",
											"693473",
											"693503",
											"693516",
											"693519",
											"693520",
											"693522",
											"693523",
											"693597",
											"693598",
											"693868",
											"693962",
											"694927",
											"695779",
											"696407",
											"700145",
											"701057"
										],
										"long_desc": [
											{
												"isprivate": "0",
												"commentid": "3369423",
												"comment_count": "0",
												"who": {
													"text": "nkinder",
													"name": "Nathan Kinder"
												},
												"bug_when": "2010-11-23 16:17:56 +0000",
												"thetext": "Tracking bug for 389 1.2.8 release."
											}
										]
									},
									{
										"bug_id": "676871",
										"error": "NotPermitted"
									}
								],
								"external_bugs": {
									"text": "RHEA-2011:0533",
									"name": "Red Hat Product Errata"
								},
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3551256",
										"comment_count": "1",
										"who": {
											"text": "shaines",
											"name": "Scott Haines"
										},
										"bug_when": "2011-02-21 21:35:54 +0000",
										"thetext": "*** Bug 678369 has been marked as a duplicate of this bug. ***"
									},
									{
										"isprivate": "0",
										"commentid": "3641974",
										"comment_count": "6",
										"who": {
											"text": "amsharma",
											"name": "Amita Sharma"
										},
										"bug_when": "2011-03-31 06:32:44 +0000",
										"thetext": "Hi Noriko,\n\nI am testing Bug 677483 -  export task followed by import task causes cache assertion.\nThis is very interesting and big one, like an interesting novel :)\n  \nI concluded there are in total 3 bugs under this one -\n\n1. Description: Task version of export had a bug in  handling the busy instance error case.  When returning due to the busy  error, the function  ldbm_back_ldbm2ldif reset the busy bit set by other  threads. This patch checks the special return value set in the busy  error case and resets the busy bit only when it is set by the function.\n\nVerify steps :\nSet up 2-way mmr\n1. On one window, be a root:\n# cd /usr/lib64/dirsrv/slapd-amsharma\n# while true; do\n./db2ldif.pl -D \"cn=directory Manager\" -w Secret123 -r -n userRootNT -a /tmp/export.ldif; ./ldif2db.pl -D \"cn=Directory Manager\" -w Secret123 -n userRootNT \" -i /tmp/export.ldif; done\n\n**********It gives me Operations error (1) **********************************\n\n\n2. On another window:\n$ while true; do ldapsearch -x -h localhost -p 1389 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=example,dc=com\" \"(cn=*)\"; done\n\n**********It gives me Operations error (1)**************************************\n\nRun the commands for an hour or so.\nIf you don't see the following error message in the error log\nand the server keeps running, the fix is verified.\n\n************I am getting below ***********************************************\n[amsharma@amsharma /]$ tail -f /var/log/dirsrv/slapd-amsharma/errors\n[30/Mar/2011:19:08:00 +051800] - ldbm: 'example' is already in the middle of another task and cannot be disturbed.\n[30/Mar/2011:19:08:00 +051800] - import example: Processing file \"/tmp/export.ldif\"\n[30/Mar/2011:19:08:00 +051800] - import example: Finished scanning file \"/tmp/export.ldif\" (9 entries)\n[30/Mar/2011:19:08:01 +051800] - import example: Workers finished; cleaning up...\n[30/Mar/2011:19:08:01 +051800] - import example: Workers cleaned up.\n[30/Mar/2011:19:08:01 +051800] - import example: Cleaning up producer thread...\n[30/Mar/2011:19:08:01 +051800] - import example: Indexing complete.  Post-processing...\n[30/Mar/2011:19:08:01 +051800] - import example: Flushing caches...\n[30/Mar/2011:19:08:01 +051800] - import example: Closing files...\n[30/Mar/2011:19:08:02 +051800] - import example: Import complete.  Processed 9 entries in 1 seconds. (9.00 entries/sec)\n\n********************Noriko, is it as expected, I am not getting this error \"entrycache_clear_int\"*********************************************************************************\n\n2. Description: \nWhen Simple Paged Results is requested and a page is\nreturned, one entry is read ahead to check whether more entries\nexist or not.  The read-ahead retrieves an entry (if any) and adds\nit into the entry cache.  Simple Paged Results code puts the read-\nahead entry back, but there was missing to call cache_return for\nthe entry (that decrementing refcnt).  If ldif2db.pl is called with\nthe cache state, it finds out the entry which is still referred.\nThis patch calls cache_return when the Simple Paged Results puts\nthe read-ahead entry back.  Plus, adding a debug function dump_hash.\n\nVerify steps :\nPrepare a server with some entries (> 10 entries).\nRun Simple Paged Result search and stops before getting all entries.\n  $ ldapsearch -x -h localhost -p 1389 -b \"dc=example,dc=com\" -E pr=2 \"(cn=*)\"\n  ...\n  # search result\n  search: 8\n  result: 0 Success\n  control: 1.2.840.113556.1.4.319 false MAcCAgPbBAEy\n  pagedresults: estimate=987 cookie=Mg==\n  Press [size] Enter for the next {2|size} entries.\n\nRun ./db2ldif.pl\n  # ./db2ldif.pl -D 'cn=directory manager' -w Secret123 -n userRootNT -a /tmp/export.ldif\n\nRun ./ldif2db.pl\n  # ./ldif2db.pl -n userRootNT -D 'cn=directory manager' -w Secret123 -i /tmp/export.ldif\n  \nCheck error log:\n  # grep entrycache_clear_int /var/log/dirsrv/slapd-ID/errors\n  # echo $?\n  1\nIf the keyword is not found in the error log, the bug was verified.\n\n*************This one is all set, no errors are there**********************************************\n\n3. Description: \nWhen a search request with VLV and/or SORT control\nfails, it did not returning an entry to the entry cache.  The\nentry has positive refcnt and won't be cleared even by cache_clear.\nThis patch adds CACHE_RETURN call for the error cases.\n\n********I think it is covered in the 4th one? or do I need to verify this with it some other steps? ********\n\n4. Description:\nThere were 3 places where an entry was not released\nby CACHE_RETURN (not decrimenting refcnt).  If an entry has positive\nrefcnt in the entry cache, it won't be released even if the entry\nnever be accessed.\n1. When a search request with VLV and/or SORT control fails.\n2. When comparing entries in compare_entries_sv, and the second\nentry is not found, the first entry is not released.\n3. vlv_trim_candidates_byvalue retrieves entries for performing\nbinary search over the candidate list and put them into the cache.\nThey are not released.\n\nVerify steps.\n1. setup a server with suffix \"o=umc\".\n./AddSuffix \"o=umc\" userRootNT 1389 localhost\n\nshutdown the server\n\nput 99umcschema.ldif in /etc/dirsrv/slapd-ID/schema\n\nopen dse.ldif and append the contents of index.ldif at the end of the file\n\nimport db_Febr15_noRep.ldif.\n\nldif2db -n userRootNT -i /tmp/db_Febr15_noRep.ldif\n\nstart the server\n\n2. run ldapsearch:\n$ /usr/lib[64]/mozldap/ldapsearch -p <port> -D\n'cn=cli,ou=components,o=operators,o=UMC' -w cli -b \"o=umc\" -s sub -S\n'-createTimestamp' -x -G 0:2:3 \"(objectClass=*)\" \"createTimestamp\nmodifyTimestamp\"\n\ncd /usr/lib64/mozldap\n/usr/lib64/mozldap/ldapsearch -p 1389 -D 'cn=cli,ou=components,o=operators,o=UMC' -w cli -b \"o=umc\" -s sub -S '-createTimestamp' -x -G 0:2:3 \"(objectClass=*)\" \"createTimestamp modifyTimestamp\"\n\n******** Above ldapsearch is not giving me any output?? Is it as expected? ****************\n\n3. run task import\ncd /usr/lib64/dirsrv/slapd-amsharma\n# ./ldif2db.pl -D 'cn=directory manager' -w Secret123 -n userRootNT -i /tmp/db_Febr15_noRep.ldif\n\n4. check error log\n# grep entrycache_clear_int /var/log/dirsrv/slapd-amsharma/errors\nIf the keyword is not found, the bug is verified.\n\n****Note : I did not face any slapd crash and error \"entrycache_clear_int\" while executing above scenarios************************"
									},
									{
										"isprivate": "0",
										"commentid": "3744606",
										"comment_count": "8",
										"who": {
											"text": "errata-xmlrpc",
											"name": "errata-xmlrpc"
										},
										"bug_when": "2011-05-19 12:41:51 +0000",
										"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
									}
								]
							}
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3551255",
								"comment_count": "2",
								"who": {
									"text": "shaines",
									"name": "Scott Haines"
								},
								"bug_when": "2011-02-21 21:35:54 +0000",
								"thetext": "\n\n*** This bug has been marked as a duplicate of bug 677483 ***"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3526954",
						"comment_count": "0",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-08 17:58:34 +0000",
						"thetext": "I have a working MM setup and I exported my db with db2ldif.pl with the -r option:\n \ndb2ldif.pl -D 'cn=Directory Manager' -w password -n userRoot -r -a /tmp/db_replica.ldif\n \nThe errors file do not indicate an issue:\n[01/Feb/2011:09:23:59 -0500] - Beginning export of 'userRoot'\n[01/Feb/2011:09:23:59 -0500] - export userRoot: Processed 1000 entries (10%).\n[01/Feb/2011:09:23:59 -0500] - export userRoot: Processed 2000 entries (21%).\n[01/Feb/2011:09:23:59 -0500] - export userRoot: Processed 3000 entries (32%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 4000 entries (43%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 5000 entries (54%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 6000 entries (65%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 7000 entries (76%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 8000 entries (87%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 9000 entries (98%).\n[01/Feb/2011:09:24:00 -0500] - export userRoot: Processed 9160 entries (100%).\n[01/Feb/2011:09:24:00 -0500] - Export finished.\n\nand the ldif file itself looks fine to me as well.\n \nThen, I tried to import the ldif file with\n \nldif2db.pl -D 'cn=Directory Manager' -w password -n userRoot -i /tmp/db_replica.ldif\n \nThis fails with the following errors log:\n[01/Feb/2011:09:29:45 -0500] - Bringing userRoot offline...\n[01/Feb/2011:09:29:45 -0500] NSMMReplicationPlugin - multimaster_be_state_change: replica o=umc is going offline; disabling replication\n[01/Feb/2011:09:29:46 -0500] - entrycache_clear_int: there are still 1 entries in the entry cache. :/\n[01/Feb/2011:09:29:49 -0500] - WARNING: Import is running with nsslapd-db-private-import-mem on; No other process is allowed to access the database\n[01/Feb/2011:09:29:49 -0500] - import userRoot: Beginning import job...\n[01/Feb/2011:09:29:49 -0500] - import userRoot: Index buffering is disabled.\n[01/Feb/2011:09:29:49 -0500] - import userRoot: Processing file \"/tmp/db_replica.ldif\"\n[01/Feb/2011:09:29:49 -0500] - BAD CACHE ASSERTION at ../ldap/servers/slapd/back-ldbm/cache.c/883: e->ep_refcnt > 0"
					},
					{
						"isprivate": "0",
						"commentid": "3527302",
						"comment_count": "1",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-08 18:35:04 +0000",
						"thetext": "Could it be possible that you are running (or have been running) any permanent search?\n[...] - entrycache_clear_int: there are still 1 entries in the entry cache. :/\n\nI ran psearch, then even if I kill it, my import still issues this error message."
					},
					{
						"isprivate": "0",
						"commentid": "3527342",
						"comment_count": "2",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-08 18:54:35 +0000",
						"thetext": "No, I don't.\nWe do poll it every 30 seconds or so for changes (VLV searches). Is it possible that the permanent search comes from replication?"
					},
					{
						"isprivate": "0",
						"commentid": "3527358",
						"comment_count": "3",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-08 19:00:29 +0000",
						"thetext": "No, I don't.\nWe do poll it every 30 seconds or so for changes (VLV searches). Is it possible that the permanent search comes from replication?"
					},
					{
						"isprivate": "0",
						"commentid": "3532161",
						"comment_count": "4",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-11 00:46:35 +0000",
						"thetext": "Created attachment 478160\ngit patch file (master)\n\nDescription: Task version of export had a bug in handling the busy\ninstance error case.  When returning due to the busy error, the\nfunction ldbm_back_ldbm2ldif reset the busy bit set by other threads.\nThis patch checks the special return value set in the busy error\ncase and resets the busy bit only when it is set by the function.\n\nAlso, this patch fixes a bug in dse_add which replaces an adding\nentry with its copy in pblock and the original entry is consumed.\nBut the caller frees the original entry.  Applying this patch,\ninstead of consuming the original entry, its copy is consumed and\nthe original adding entry stays in the pblock."
					},
					{
						"isprivate": "0",
						"commentid": "3532165",
						"comment_count": "5",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-11 00:50:26 +0000",
						"thetext": "Hi reinhard,\n\nCan I ask you a favor to apply the attached patch, rebuild the server and check if the problem still occurs?  I don't see the entrycache_clear_int error any more in my testing, but not 100% sure if this patch solves the problem you are facing...\n\nThanks a lot in advance,\n--noriko"
					},
					{
						"isprivate": "0",
						"commentid": "3533048",
						"comment_count": "7",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-11 15:45:50 +0000",
						"thetext": "I will and let you know.\nThanks for the quick fix\n-Reinhard"
					},
					{
						"isprivate": "0",
						"commentid": "3533376",
						"comment_count": "8",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-11 19:06:55 +0000",
						"thetext": "I still need to look into this, because I got some permission denied message, when I do an export, which I can not explain. I see the following:\n[11/Feb/2011:13:46:19 -0500] - 389-Directory/1.2.7.5 B2011.042.1610 starting up\n[11/Feb/2011:13:46:19 -0500] - slapd started.  Listening on All Interfaces port\n389 for LDAP requests\n[11/Feb/2011:13:49:33 -0500] - Beginning export of 'userRoot'\n[11/Feb/2011:13:49:33 -0500] - db2ldif: can't open /tmp/db_Febr11.ldif: 13 (Perm\nission denied)\n[11/Feb/2011:13:49:33 -0500] - ldbm2ldif: backend 'userRoot' export failed (-1)\n[11/Feb/2011:13:49:33 -0500] - Export failed."
					},
					{
						"isprivate": "0",
						"commentid": "3533527",
						"comment_count": "9",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-11 20:57:48 +0000",
						"thetext": "I am not sure what is going on there. I did \"back-port\" the changes to 1.2.7.5\nI noticed that the code has changed. Is it possible that the back-port caused the permission denied failure?"
					},
					{
						"isprivate": "0",
						"commentid": "3533539",
						"comment_count": "10",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-11 21:04:00 +0000",
						"thetext": "(In reply to comment #9)\n> I am not sure what is going on there. I did \"back-port\" the changes to 1.2.7.5\n> I noticed that the code has changed. Is it possible that the back-port caused\n> the permission denied failure?\n\nIt's hard to imagine...  \nWho owns the ldif file /tmp/db_Febr11.ldif and what is the mode?  \n$ ls -l /tmp/db_Febr11.ldif\n\nAnd who owns ns-slapd?\n$ps -ef | grep ns-slapd"
					},
					{
						"isprivate": "0",
						"commentid": "3533552",
						"comment_count": "11",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-11 21:10:44 +0000",
						"thetext": "My server is running as myself (nhosoi):\nnhosoi   15464     1  0 11:55 ?        00:00:05 ./ns-slapd -D /etc/dirsrv/slapd-ID -i /var/run/dirsrv/slapd-ID.pid -w /var/run/dirsrv/slapd-ID.startpid\n\nI exported the db as follows:\n# ./db2ldif.pl -D 'cn=directory manager' -w <pw> -r -n userRoot -a /tmp/export.ldif\n\nThe mode is 0600 and the owner is myself:\n# ls -l /tmp/export.ldif \n-rw-------. 1 nhosoi nhosoi 1726411 Feb 11 13:06 /tmp/export.ldif"
					},
					{
						"isprivate": "0",
						"commentid": "3533589",
						"comment_count": "12",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-11 21:29:29 +0000",
						"thetext": "nobody   13264     1  0 15:53 ?        00:00:01 ./ns-slapd -D /opt/UMC/jdb/etc/dirsrv/slapd-sdx -i /opt/UMC/jdb/var/run/dirsrv/slapd-sdx.pid -w /opt/UMC/jdb/var/run/dirsrv/slapd-sdx.startpid\n\nI run the command as root:\n ./db2ldif.pl -D 'cn=directory manager' -w <pw> -r -n userRoot -a  /tmp/db_Febr11.ldif\n\n[root@louise ~]# ls -ltr /tmp/db_Febr11.ldif\n-rw-r--r--  1 root root 21 Feb 11 11:36 /tmp/db_Febr11.ldif\n\nThis explains why it does not work. With my previous installation, the access rights would look differently (like yours):\n-rw-------  1 nobody nobody 18369062 Feb 11 13:28 db_Febr11.ldif\n\n\nI did change (manually) the mode to 666 and export works. However, I still run into the issue, when I import this ldif file:\n\n[11/Feb/2011:16:27:23 -0500] - Bringing userRoot offline...\n[11/Feb/2011:16:27:23 -0500] NSMMReplicationPlugin - multimaster_be_state_change\n: replica o=umc is going offline; disabling replication\n[11/Feb/2011:16:27:24 -0500] - entrycache_clear_int: there are still 1 entries i\nn the entry cache. :/\n[11/Feb/2011:16:27:24 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[11/Feb/2011:16:27:24 -0500] - import userRoot: Beginning import job...\n[11/Feb/2011:16:27:24 -0500] - import userRoot: Index buffering is disabled.\n[11/Feb/2011:16:27:25 -0500] - import userRoot: Processing file \"/tmp/db_Febr11.\nldif\"\n[11/Feb/2011:16:27:25 -0500] - BAD CACHE ASSERTION at ../ldap/servers/slapd/back\n-ldbm/cache.c/883: e->ep_refcnt > 0"
					},
					{
						"isprivate": "0",
						"commentid": "3533602",
						"comment_count": "13",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-11 21:38:28 +0000",
						"thetext": "Thank you for running the test, reinhard.\n\nAll right.  The problem is still there.  I'm going to run my test with 1.2.7-5 and see how it goes/fails..."
					},
					{
						"isprivate": "0",
						"commentid": "3537143",
						"comment_count": "14",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-14 22:31:50 +0000",
						"thetext": "Created attachment 478729\ngit patch file (master)\n\nDescription: When Simple Paged Results is requested and a page is\nreturned, one entry is read ahead to check whether more entries\nexist or not.  The read-ahead retrieves an entry (if any) and adds\nit into the entry cache.  Simple Paged Results code puts the read-\nahead entry back, but there was missing to call cache_return for\nthe entry (that decrementing refcnt).  If ldif2db.pl is called with\nthe cache state, it finds out the entry which is still referred.\nThis patch calls cache_return when the Simple Paged Results puts\nthe read-ahead entry back.  Plus, adding a debug function dump_hash."
					},
					{
						"isprivate": "0",
						"commentid": "3537159",
						"comment_count": "15",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-14 22:44:59 +0000",
						"thetext": "Hi reinhard,\n\nI've found another bug that causes an abnormality in the entry cache.  Do you happen to use Simple Paged Results on your server?  It could leave a read-ahead entry in the entry cache that makes clearing the cache failed in the import.\n\nIf this is not your case, could it be possible to apply the patch \"attachment 478729\", build the server with LDAP_CACHE_DEBUG defined (I guess you've already done so) and once \"entrycache_clear_int: there are still 1 entries\nin the entry cache.\" is observed, could you find out which entry/entries are in the entry cache?  The entry IDs are supposed to be printed out in the error log:\n  entrycache_clear_int: there are still 1 entries in the entry cache.\n  entry cache:\n  <id> ...\nThen, you should be able to find out the corresponding entry in your exported ldif file.  If you could tell us which entry/entries are in the cache (e.g., recently added, modified, modrdn'ed, searched, etc.), it'd be a big help for us.\n\nThanks!\n--noriko"
					},
					{
						"isprivate": "0",
						"commentid": "3537196",
						"comment_count": "16",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-14 23:10:00 +0000",
						"thetext": "Created attachment 478734\nrevised git patch file (master)\n\nThanks to Nathan for his comments.  Following his suggestion, this revised patch is adding a check for sr->sr_entry.\n\nDescription: When Simple Paged Results is requested and a page is\nreturned, one entry is read ahead to check whether more entries\nexist or not.  The read-ahead retrieves an entry (if any) and adds\nit into the entry cache.  Simple Paged Results code puts the read-\nahead entry back, but there was missing to call cache_return for\nthe entry (that decrementing refcnt).  If ldif2db.pl is called with\nthe cache state, it finds out the entry which is still referred.\nThis patch calls cache_return when the Simple Paged Results puts\nthe read-ahead entry back.  Plus, adding a debug function dump_hash."
					},
					{
						"isprivate": "0",
						"commentid": "3538829",
						"comment_count": "18",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 16:15:21 +0000",
						"thetext": "Created attachment 478908\nThe errors and the exported ldif file\n\nerrors and ldif file"
					},
					{
						"isprivate": "0",
						"commentid": "3538841",
						"comment_count": "19",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 16:20:08 +0000",
						"thetext": "I did build the server with the patch and I installed it from scratch. During the setup and directory instance creation, I load a sample database with 451 entries and configure the indexes and the vlv indexes. Now, it got worse. The slapd process just terminated after while, before I did the export. See errors (which I attached):\n[15/Feb/2011:10:50:14 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[15/Feb/2011:10:50:14 -0500] - check_and_set_import_cache: pagesize: 4096, pages\n: 4110397, procpages: 24904\n[15/Feb/2011:10:50:14 -0500] - Import allocates 6576632KB import cache.\n[15/Feb/2011:10:50:14 -0500] - Setting ncache to: 2 to keep each chunk below 4Gb\nytes\n[15/Feb/2011:10:50:18 -0500] - userRoot: Indexing VLV: CRT\n[15/Feb/2011:10:50:18 -0500] - userRoot: Finished indexing.\n[15/Feb/2011:10:50:18 -0500] - All database threads now stopped\n[15/Feb/2011:10:50:19 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[15/Feb/2011:10:50:19 -0500] - check_and_set_import_cache: pagesize: 4096, pages\n: 4110397, procpages: 24904\n[15/Feb/2011:10:50:19 -0500] - Import allocates 6576632KB import cache.\n[15/Feb/2011:10:50:19 -0500] - Setting ncache to: 2 to keep each chunk below 4Gb\nytes\n[15/Feb/2011:10:50:22 -0500] - userRoot: Indexing VLV: MT\n[15/Feb/2011:10:50:22 -0500] - userRoot: Finished indexing.\n[15/Feb/2011:10:50:23 -0500] - All database threads now stopped\n\nAt that time, I the vlv indexes were already done. Then, I exported the data:\n[root@louise slapd-sdx]# date; ./db2ldif.pl -D cn=umcadmin,o=umc -w <password> -s o=UMC  -a /tmp/db_Febr15_noRep.ldif\nTue Feb 15 10:53:19 EST 2011\nExporting to ldif file: /tmp/db_Febr15_noRep.ldif\nadding new entry \"cn=export_2011_2_15_10_53_19, cn=export, cn=tasks, cn=config\"\n\nWhen this was done, the slapd process died again (same vlv messages) and I started the server:\n[root@louise slapd-sdx]# date; service UMCjdb start\nTue Feb 15 10:54:54 EST 2011\nStarting SRC Database Service\n\nThen, I imported it, which seems to work always for the first time:\n[root@louise slapd-sdx]# date; ./ldif2db.pl -D cn=umcadmin,o=umc -w <password> -s o=UMC -i /tmp/db_Febr15_noRep.ldif\nTue Feb 15 10:55:28 EST 2011\nadding new entry \"cn=import_2011_2_15_10_55_28, cn=import, cn=tasks, cn=config\"\n\nBut, it fails with the second time:\n[root@louise slapd-sdx]# date; ./ldif2db.pl -D cn=umcadmin,o=umc -w <password> -s o=UMC -i /tmp/db_Febr15_noRep.ldif\nTue Feb 15 10:55:48 EST 2011\nadding new entry \"cn=import_2011_2_15_10_55_48, cn=import, cn=tasks, cn=config\"\n\nerrors:\n[15/Feb/2011:10:55:47 -0500] - Bringing userRoot offline...\n[15/Feb/2011:10:55:47 -0500] - entrycache_clear_int: there are still 16 entries\nin the entry cache. :/\n[15/Feb/2011:10:55:47 -0500] - entry cache:\n[15/Feb/2011:10:55:47 -0500] - 1198334336392393408420424426434438445448449450\n[15/Feb/2011:10:55:47 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[15/Feb/2011:10:55:47 -0500] - import userRoot: Beginning import job...\n[15/Feb/2011:10:55:47 -0500] - import userRoot: Index buffering is disabled.\n[15/Feb/2011:10:55:47 -0500] - import userRoot: Processing file \"/tmp/db_Febr15_\nnoRep.ldif\"\n[15/Feb/2011:10:55:48 -0500] - BAD CACHE ASSERTION at ../ldap/servers/slapd/back\n-ldbm/cache.c/922: e->ep_refcnt > 0\n\nAgain, I attached the ldif and the errors file."
					},
					{
						"isprivate": "0",
						"commentid": "3539117",
						"comment_count": "20",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 17:54:24 +0000",
						"thetext": "Thank you, reinhard.  \n\nI tried to find out the pattern why these 16 entries are in the entry cache, but it was too tough for me.  I'd like to reproduce your problem in house.  It looks your system has some custom schema.  Could it be possible to share the schema with us?  And the configuration file dse.ldif?  If you are not confortable to attach them to this bug report, you could just send them to my address nhosoi@redhat.com.  \n\nAlso, do you have any custom plugin?  Or are you using any specific plugins other than the replication?  Such as memberOf, linkedattrs, dna, USN, etc.?  \n\nWhat is your platform?  OS?  CPU?\n\nAny information would be greatly appreciated!"
					},
					{
						"isprivate": "0",
						"commentid": "3539189",
						"comment_count": "21",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 18:26:58 +0000",
						"thetext": ">  The slapd process just terminated after while, before I did the export.\n\nIs it possible to attach gdb to ns-slapd and get the stacktrace when the process gets terminated?  Thanks!"
					},
					{
						"isprivate": "0",
						"commentid": "3539363",
						"comment_count": "22",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 19:36:38 +0000",
						"thetext": "Created attachment 478958\ncore file, when export fails\n\nI was not able to reproduce the crash of slapd. However, I produced a core for the export issue. Attached is the gdb file. Here is the output to stdout of the gdb as well:\n[root@louise log]# gdb /opt/UMC/jdb/sbin/ns-slapd /var/UMC/jdb/log/core.22423\nGNU gdb Red Hat Linux (6.3.0.0-1.132.EL4rh)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"x86_64-redhat-linux-gnu\"...Using host libthread_db library \"/lib64/tls/libthread_db.so.1\".\n\nFailed to read a valid object file image from memory.\nCore was generated by `./ns-slapd -D /opt/UMC/jdb/etc/dirsrv/slapd-sdx -i /opt/UMC/jdb/var/run/dirsrv/'.\nProgram terminated with signal 11, Segmentation fault.\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libslapd.so.0...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libslapd.so.0\nReading symbols from /usr/lib64/libkrb5.so.3...done.\nLoaded symbols for /usr/lib64/libkrb5.so.3\nReading symbols from /usr/lib64/libk5crypto.so.3...done.\nLoaded symbols for /usr/lib64/libk5crypto.so.3\nReading symbols from /lib64/libcom_err.so.2...done.\nLoaded symbols for /lib64/libcom_err.so.2\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libpcre.so.0...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libpcre.so.0\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libssldap60.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libssldap60.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libprldap60.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libprldap60.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libldap60.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libldap60.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libldif60.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libldif60.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libsoftokn3.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libsoftokn3.so\nReading symbols from /usr/lib64/libsasl2.so.2...done.\nLoaded symbols for /usr/lib64/libsasl2.so.2\nReading symbols from /lib64/libdl.so.2...done.\nLoaded symbols for /lib64/libdl.so.2\nReading symbols from /lib64/libresolv.so.2...done.\nLoaded symbols for /lib64/libresolv.so.2\nReading symbols from /lib64/libcrypt.so.1...done.\nLoaded symbols for /lib64/libcrypt.so.1\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libsvrcore.so.0...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libsvrcore.so.0\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libssl3.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libssl3.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libnss3.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libnss3.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libplds4.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libplds4.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libplc4.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libplc4.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libnspr4.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libnspr4.so\nReading symbols from /lib64/tls/libpthread.so.0...done.\nLoaded symbols for /lib64/tls/libpthread.so.0\nReading symbols from /lib64/tls/libc.so.6...done.\nLoaded symbols for /lib64/tls/libc.so.6\nReading symbols from /lib64/ld-linux-x86-64.so.2...done.\nLoaded symbols for /lib64/ld-linux-x86-64.so.2\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libsyntax-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libsyntax-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libbitwise-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libbitwise-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libcollation-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libcollation-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libicui18n.so.36...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libicui18n.so.36\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libicuuc.so.36...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libicuuc.so.36\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libicudata.so.36...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libicudata.so.36\nReading symbols from /usr/lib64/libstdc++.so.6...done.\nLoaded symbols for /usr/lib64/libstdc++.so.6\nReading symbols from /lib64/tls/libm.so.6...done.\nLoaded symbols for /lib64/tls/libm.so.6\nReading symbols from /lib64/libgcc_s.so.1...done.\nLoaded symbols for /lib64/libgcc_s.so.1\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libpwdstorage-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libpwdstorage-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libdes-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libdes-plugin.so\nReading symbols from /usr/lib64/sasl2/libplain.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/libplain.so.2\nReading symbols from /usr/lib64/sasl2/libcrammd5.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/libcrammd5.so.2\nReading symbols from /usr/lib64/sasl2/libsasldb.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/libsasldb.so.2\nReading symbols from /usr/lib64/sasl2/liblogin.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/liblogin.so.2\nReading symbols from /usr/lib64/sasl2/libdigestmd5.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/libdigestmd5.so.2\nReading symbols from /lib64/libcrypto.so.4...done.\nLoaded symbols for /lib64/libcrypto.so.4\nReading symbols from /usr/lib64/libgssapi_krb5.so.2...done.\nLoaded symbols for /usr/lib64/libgssapi_krb5.so.2\nReading symbols from /usr/lib64/libz.so.1...done.\nLoaded symbols for /usr/lib64/libz.so.1\nReading symbols from /usr/lib64/sasl2/libanonymous.so.2...done.\nLoaded symbols for /usr/lib64/sasl2/libanonymous.so.2\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libattr-unique-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libattr-unique-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libacl-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libacl-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libns-dshttpd.so.0...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libns-dshttpd.so.0\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libchainingdb-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libchainingdb-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libcos-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libcos-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libderef-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libderef-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libdna-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libdna-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libhttp-client-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libhttp-client-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libback-ldbm.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libback-ldbm.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libdb-4.2.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libdb-4.2.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libreplication-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libreplication-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/liblinkedattrs-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/liblinkedattrs-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libmanagedentries-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libmanagedentries-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libmemberof-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libmemberof-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libpam-passthru-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libpam-passthru-plugin.so\nReading symbols from /lib64/libpam.so.0...done.\nLoaded symbols for /lib64/libpam.so.0\nReading symbols from /lib64/libaudit.so.0...done.\nLoaded symbols for /lib64/libaudit.so.0\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libpassthru-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libpassthru-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libreferint-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libreferint-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libretrocl-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libretrocl-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libroles-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libroles-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libschemareload-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libschemareload-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libstatechange-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libstatechange-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libusn-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libusn-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/plugins/libviews-plugin.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/plugins/libviews-plugin.so\nReading symbols from /opt/UMC/jdb/lib/dirsrv/libfreebl3.so...done.\nLoaded symbols for /opt/UMC/jdb/lib/dirsrv/libfreebl3.so\n#0  0x00007f4b5d5ebd3a in cache_remove (cache=0x7254e8, ptr=0x7f4b5ae2d740)\n    at ../ldap/servers/slapd/back-ldbm/cache.c:922\n922     ../ldap/servers/slapd/back-ldbm/cache.c: No such file or directory.\n        in ../ldap/servers/slapd/back-ldbm/cache.c"
					},
					{
						"isprivate": "0",
						"commentid": "3539379",
						"comment_count": "23",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 19:43:10 +0000",
						"thetext": "Could you do 'bt' (backtrace) there?\ngdb> bt"
					},
					{
						"isprivate": "0",
						"commentid": "3539385",
						"comment_count": "24",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 19:48:14 +0000",
						"thetext": "(gdb) bt\n#0  0x00007f4b5d5ebd3a in cache_remove (cache=0x7254e8, ptr=0x7f4b5ae2d740)\n    at ../ldap/servers/slapd/back-ldbm/cache.c:922\n#1  0x00007f4b5d605467 in import_foreman (param=Variable \"param\" is not available.\n)\n    at ../ldap/servers/slapd/back-ldbm/import-threads.c:2334\n#2  0x00007f4b6078edfe in _pt_root () from /opt/UMC/jdb/lib/dirsrv/libnspr4.so\n#3  0x00007f4b6065910a in start_thread () from /lib64/tls/libpthread.so.0\n#4  0x00007f4b604e58b3 in clone () from /lib64/tls/libc.so.6\n#5  0x0000000000000000 in ?? ()\n\n\nDid you go through slapd.core.txt file, I attached. I did \nthread apply all bt\n\n-Reinhard"
					},
					{
						"isprivate": "0",
						"commentid": "3539388",
						"comment_count": "25",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 19:49:10 +0000",
						"thetext": "Thanks, Reinhard!\n\nMy side does not have much luck.\n\nI installed the server (both the latest and 1.2.7-5) with your schema, index configuration, and data.  I could successfully run ./db2index.pl, ./db2ldif.pl, and ./ldif2db.pl repeatedly.  I don't see any entry cache failure... :(\n\nNow, I'm comparing your dse.ldif with mine and looking for any differences."
					},
					{
						"isprivate": "0",
						"commentid": "3539391",
						"comment_count": "26",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 19:50:31 +0000",
						"thetext": "BTW, I had to add attributeTypes for 'keywords' to the custom schema file to start the server..."
					},
					{
						"isprivate": "0",
						"commentid": "3539401",
						"comment_count": "27",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 19:58:56 +0000",
						"thetext": "Could some other threads be running at the same time?  What this command tells us?\n(gdb) thread apply all bt"
					},
					{
						"isprivate": "0",
						"commentid": "3539424",
						"comment_count": "28",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 20:10:51 +0000",
						"thetext": "(In reply to comment #26)\n> BTW, I had to add attributeTypes for 'keywords' to the custom schema file to\n> start the server...\n\nYes, this is correct. 389 DS used to have it in 28pilot.ldif. You are right, I altered 28pilot.ldif and added keywords in there.\n\n(In reply to comment #27)\n> Could some other threads be running at the same time?  What this command tells\n> us?\n> (gdb) thread apply all bt\n\nI guess you get a backtrace for all threads. \n\n(In reply to comment #25)\n> Thanks, Reinhard!\n> \n> My side does not have much luck.\n> \n> I installed the server (both the latest and 1.2.7-5) with your schema, index\n> configuration, and data.  I could successfully run ./db2index.pl, ./db2ldif.pl,\n> and ./ldif2db.pl repeatedly.  I don't see any entry cache failure... :(\n> \n> Now, I'm comparing your dse.ldif with mine and looking for any differences.\n\nThis is interesting! How can this be?"
					},
					{
						"isprivate": "0",
						"commentid": "3539545",
						"comment_count": "29",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 21:11:03 +0000",
						"thetext": "(In reply to comment #28)\n> (In reply to comment #26)\n> > BTW, I had to add attributeTypes for 'keywords' to the custom schema file to\n> > start the server...\n> \n> Yes, this is correct. 389 DS used to have it in 28pilot.ldif. You are right, I\n> altered 28pilot.ldif and added keywords in there.\n\nThanks for confirming it.\n\n> (In reply to comment #27)\n> > Could some other threads be running at the same time?  What this command tells\n> > us?\n> > (gdb) thread apply all bt\n> \n> I guess you get a backtrace for all threads. \n\nRight.  Do you see any active threads there other than import?\n\n> (In reply to comment #25)\n> > Thanks, Reinhard!\n> > \n> > My side does not have much luck.\n> > \n> > I installed the server (both the latest and 1.2.7-5) with your schema, index\n> > configuration, and data.  I could successfully run ./db2index.pl, ./db2ldif.pl,\n> > and ./ldif2db.pl repeatedly.  I don't see any entry cache failure... :(\n> > \n> > Now, I'm comparing your dse.ldif with mine and looking for any differences.\n> \n> This is interesting! How can this be?\n\nYeah, I'm completely puzzled...  Everything is going well on my test system 64-bit F-13 (yes, it's not centos...).  I also rebuilt the server with LDAP_CACHE_DEBUG enabled, but I don't see any sign of cache corruption.\n\nI guess some activities should be around on your system...  Could you give us the access log, too?"
					},
					{
						"isprivate": "0",
						"commentid": "3539597",
						"comment_count": "30",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 21:26:05 +0000",
						"thetext": "Created attachment 478974\naccess file in response of Comment #29\n\nI have also a 64 bit environment. I can not see that F-13 makes a difference.\nYou see a ton of searches in access. Those a performed by our multi-component application.\n\nHope, this helps"
					},
					{
						"isprivate": "0",
						"commentid": "3539780",
						"comment_count": "31",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-15 21:46:09 +0000",
						"thetext": "Your last post gave me the idea to import the ldif file, while all of our components were shutdown. Guess what? I imported the ldif file for at least 5/6 times. Then, I started one of our components. I was able to import it for more than 2 times, but eventually it failed, however I do not see anything in access from our component.\n\n[root@louise slapd-sdx]# date; ./ldif2db.pl -D cn=umcadmin,o=umc -w <password> -s o=UMC -i /tmp/db_Febr15_noRep.ldif\nTue Feb 15 16:35:20 EST 2011\nadding new entry \"cn=import_2011_2_15_16_35_20, cn=import, cn=tasks, cn=config\"\n\nerrors:\n[15/Feb/2011:16:35:20 -0500] - Bringing userRoot offline...\n[15/Feb/2011:16:35:20 -0500] - entrycache_clear_int: there are still 16 entries\nin the entry cache. :/\n[15/Feb/2011:16:35:20 -0500] - entry cache:\n[15/Feb/2011:16:35:20 -0500] - 1198334336392393408420424426434438445448449450\n[15/Feb/2011:16:35:20 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[15/Feb/2011:16:35:20 -0500] - import userRoot: Beginning import job...\n[15/Feb/2011:16:35:20 -0500] - import userRoot: Index buffering is disabled.\n[15/Feb/2011:16:35:20 -0500] - import userRoot: Processing file \"/tmp/db_Febr15_\nnoRep.ldif\"\n[15/Feb/2011:16:35:20 -0500] - BAD CACHE ASSERTION at ../ldap/servers/slapd/back\n-ldbm/cache.c/922: e->ep_refcnt > 0\n\naccess:\n[15/Feb/2011:16:33:02 -0500] conn=1 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:33:02 -0500] conn=1 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:33:02 -0500] conn=1 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:33:02 -0500] conn=1 op=1 ADD dn=\"cn=import_2011_2_15_16_33_2,cn=\nimport,cn=tasks,cn=config\"\n[15/Feb/2011:16:33:02 -0500] conn=1 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:33:02 -0500] conn=1 op=2 UNBIND\n[15/Feb/2011:16:33:02 -0500] conn=1 op=2 fd=64 closed - U1\n[15/Feb/2011:16:33:21 -0500] conn=2 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:33:21 -0500] conn=2 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:33:21 -0500] conn=2 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:33:21 -0500] conn=2 op=1 ADD dn=\"cn=import_2011_2_15_16_33_21,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:33:21 -0500] conn=2 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:33:21 -0500] conn=2 op=2 UNBIND\n[15/Feb/2011:16:33:21 -0500] conn=2 op=2 fd=64 closed - U1\n[15/Feb/2011:16:33:33 -0500] conn=3 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:33:33 -0500] conn=3 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:33:33 -0500] conn=3 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:33:33 -0500] conn=3 op=1 ADD dn=\"cn=import_2011_2_15_16_33_34,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:33:33 -0500] conn=3 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:33:33 -0500] conn=3 op=2 UNBIND\n[15/Feb/2011:16:33:33 -0500] conn=3 op=2 fd=64 closed - U1\n[15/Feb/2011:16:33:45 -0500] conn=4 fd=64 slot=64 connection from 10.227.6.53 to  10.227.6.53\n[15/Feb/2011:16:33:45 -0500] conn=4 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:33:45 -0500] conn=4 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:33:45 -0500] conn=4 op=1 ADD dn=\"cn=import_2011_2_15_16_33_45,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:33:45 -0500] conn=4 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:33:45 -0500] conn=4 op=2 UNBIND\n[15/Feb/2011:16:33:45 -0500] conn=4 op=2 fd=64 closed - U1\n[15/Feb/2011:16:33:51 -0500] conn=5 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:33:51 -0500] conn=5 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:33:51 -0500] conn=5 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:33:51 -0500] conn=5 op=1 ADD dn=\"cn=import_2011_2_15_16_33_51,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:33:51 -0500] conn=5 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:33:51 -0500] conn=5 op=2 UNBIND\n[15/Feb/2011:16:33:51 -0500] conn=5 op=2 fd=64 closed - U1\n[15/Feb/2011:16:34:02 -0500] conn=6 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:34:02 -0500] conn=6 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:34:02 -0500] conn=6 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:34:02 -0500] conn=6 op=1 ADD dn=\"cn=import_2011_2_15_16_34_3,cn=\nimport,cn=tasks,cn=config\"\n[15/Feb/2011:16:34:03 -0500] conn=6 op=2 UNBIND\n[15/Feb/2011:16:34:03 -0500] conn=6 op=2 fd=64 closed - U1\n[15/Feb/2011:16:34:03 -0500] conn=6 op=1 RESULT err=0 tag=105 nentries=0 etime=1\n[15/Feb/2011:16:34:08 -0500] conn=7 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:34:08 -0500] conn=7 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:34:08 -0500] conn=7 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:34:08 -0500] conn=7 op=1 ADD dn=\"cn=import_2011_2_15_16_34_8,cn=\nimport,cn=tasks,cn=config\"\n[15/Feb/2011:16:34:08 -0500] conn=7 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:34:08 -0500] conn=7 op=2 UNBIND\n[15/Feb/2011:16:34:08 -0500] conn=7 op=2 fd=64 closed - U1\n[15/Feb/2011:16:34:14 -0500] conn=8 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:34:14 -0500] conn=8 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:34:14 -0500] conn=8 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:34:14 -0500] conn=8 op=1 ADD dn=\"cn=import_2011_2_15_16_34_14,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:34:14 -0500] conn=8 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:34:14 -0500] conn=8 op=2 UNBIND\n[15/Feb/2011:16:34:14 -0500] conn=8 op=2 fd=64 closed - U1\n[15/Feb/2011:16:34:49 -0500] conn=9 fd=64 slot=64 connection from 10.227.6.53 to\n 10.227.6.53\n[15/Feb/2011:16:34:49 -0500] conn=9 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\nversion=3\n[15/Feb/2011:16:34:49 -0500] conn=9 op=0 RESULT err=0 tag=97 nentries=0 etime=0\ndn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:34:49 -0500] conn=9 op=1 ADD dn=\"cn=import_2011_2_15_16_34_49,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:34:49 -0500] conn=9 op=1 RESULT err=0 tag=105 nentries=0 etime=0\n[15/Feb/2011:16:34:49 -0500] conn=9 op=2 UNBIND\n[15/Feb/2011:16:34:49 -0500] conn=9 op=2 fd=64 closed - U1\n[15/Feb/2011:16:34:57 -0500] conn=10 fd=64 slot=64 connection from 10.227.6.53 t\no 10.227.6.53\n[15/Feb/2011:16:34:57 -0500] conn=10 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\n version=3\n[15/Feb/2011:16:34:57 -0500] conn=10 op=0 RESULT err=0 tag=97 nentries=0 etime=0\n dn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:34:57 -0500] conn=10 op=1 ADD dn=\"cn=import_2011_2_15_16_34_58,c\nn=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:34:57 -0500] conn=10 op=1 RESULT err=0 tag=105 nentries=0 etime=\n0\n[15/Feb/2011:16:34:57 -0500] conn=10 op=2 UNBIND\n[15/Feb/2011:16:34:57 -0500] conn=10 op=2 fd=64 closed - U1\n[15/Feb/2011:16:35:07 -0500] conn=11 fd=64 slot=64 connection from 10.227.6.53 t\no 10.227.6.53\n[15/Feb/2011:16:35:07 -0500] conn=11 op=0 BIND dn=\"cn=umcadmin,o=umc\" method=128\n version=3\n[15/Feb/2011:16:35:07 -0500] conn=11 op=0 RESULT err=0 tag=97 nentries=0 etime=0\n dn=\"cn=umcadmin,o=umc\"\n[15/Feb/2011:16:35:07 -0500] conn=11 op=1 ADD dn=\"cn=import_2011_2_15_16_35_7,cn\n=import,cn=tasks,cn=config\"\n[15/Feb/2011:16:35:07 -0500] conn=11 op=2 UNBIND\n[15/Feb/2011:16:35:07 -0500] conn=11 op=2 fd=64 closed - U1\n[15/Feb/2011:16:35:07 -0500] conn=11 op=1 RESULT err=0 tag=105 nentries=0 etime=\n0"
					},
					{
						"isprivate": "0",
						"commentid": "3539936",
						"comment_count": "32",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-15 22:59:49 +0000",
						"thetext": "> Hope, this helps\nThanks A LOT, Reinhard.  It did!\n\nI could reproduce the assertion failure after running some VLV searches.  This is not confirmed yet, but most likely VLV is has some culprit...\nThread 1 (Thread 18773):\n#0  0x00007f29a382f69b in cache_remove (cache=0x2081728, ptr=0x7f2934007e60)\n    at ldap/servers/slapd/back-ldbm/cache.c:922\n#1  0x00007f29a385599e in import_foreman (param=0x7f291c1cc900)\n    at ldap/servers/slapd/back-ldbm/import-threads.c:2334\n#2  0x00000034f6229593 in _pt_root (arg=0x7f291c001490)\n    at ../../../mozilla/nsprpub/pr/src/pthreads/ptthread.c:228\n#3  0x00000034e7207761 in start_thread (arg=0x7f29853f4710)\n    at pthread_create.c:301"
					},
					{
						"isprivate": "0",
						"commentid": "3540205",
						"comment_count": "33",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-16 02:49:20 +0000",
						"thetext": "Created attachment 479007\ngit patch file (master)\n\nDescription: When a search request with VLV and/or SORT control\nfails, it did not returning an entry to the entry cache.  The\nentry has positive refcnt and won't be cleared even by cache_clear.\nThis patch adds CACHE_RETURN call for the error cases."
					},
					{
						"isprivate": "0",
						"commentid": "3540207",
						"comment_count": "34",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-16 02:52:10 +0000",
						"thetext": "Hi Reinhard,\n\nI've attached the third patch around this bug...  I hope this solves the problem you are facing...  Thank you sooooo much for your help and patience.\n--noriko"
					},
					{
						"isprivate": "0",
						"commentid": "3541687",
						"comment_count": "35",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-16 14:59:29 +0000",
						"thetext": "(In reply to comment #34)\n> Hi Reinhard,\n> \n> I've attached the third patch around this bug...  I hope this solves the\n> problem you are facing...  Thank you sooooo much for your help and patience.\n> --noriko\n\nHi Noriko,\nI am really sorry to disappoint you. I still see the issue :(\n[16/Feb/2011:09:54:15 -0500] - Bringing userRoot offline...\n[16/Feb/2011:09:54:15 -0500] - entrycache_clear_int: there are still 15 entries\nin the entry cache. :/\n[16/Feb/2011:09:54:15 -0500] - ID(s) in entry cache:\n[16/Feb/2011:09:54:15 -0500] - 1\n[16/Feb/2011:09:54:15 -0500] - WARNING: Import is running with nsslapd-db-privat\ne-import-mem on; No other process is allowed to access the database\n[16/Feb/2011:09:54:15 -0500] - import userRoot: Beginning import job...\n[16/Feb/2011:09:54:15 -0500] - import userRoot: Index buffering is disabled.\n[16/Feb/2011:09:54:15 -0500] - import userRoot: Processing file \"/tmp/db_Febr16.\nldif\"\n[16/Feb/2011:09:54:15 -0500] - BAD CACHE ASSERTION at ../ldap/servers/slapd/back\n-ldbm/cache.c/922: e->ep_refcnt > 0\n\nI am pretty sure that we are on the right track. I gather all the info from my last attempt, zip them up and add it as an attachment."
					},
					{
						"isprivate": "0",
						"commentid": "3541741",
						"comment_count": "36",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-16 15:16:06 +0000",
						"thetext": "Created attachment 479128\naccess, errors and core info file\n\nas promised, attached is the info\n-Reinhard"
					},
					{
						"isprivate": "0",
						"commentid": "3542459",
						"comment_count": "37",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-16 17:21:51 +0000",
						"thetext": "(In reply to comment #35)\n> (In reply to comment #34)\n> Hi Noriko,\n> I am really sorry to disappoint you. I still see the issue :(\n\nOh, rather, I'd say big \"Thank you!\" to you.  This is an excellent report.  There were lots of bugs hidden around this point.  I agree with you that we are on the right track.  Once again, thank you so much for your help!\n--noriko"
					},
					{
						"isprivate": "0",
						"commentid": "3542580",
						"comment_count": "38",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-16 18:29:17 +0000",
						"thetext": "(In reply to comment #37)\n> (In reply to comment #35)\n> > (In reply to comment #34)\n> > Hi Noriko,\n> > I am really sorry to disappoint you. I still see the issue :(\n> \n> Oh, rather, I'd say big \"Thank you!\" to you.  This is an excellent report. \n> There were lots of bugs hidden around this point.  I agree with you that we are\n> on the right track.  Once again, thank you so much for your help!\n> --noriko\n\nLet me know if you need more data...."
					},
					{
						"isprivate": "0",
						"commentid": "3543161",
						"comment_count": "39",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-17 00:54:06 +0000",
						"thetext": "Created attachment 479245\ngit patch file (master)\n\nThanks to Rich for his comments.  I've updated ldbm_back_search_cleanup following his suggestions.\n\nAnd thanks to Reinhard for his testing and reports.  I've found 2 more places entries are not released.\n\nDescription: There were 3 places where an entry was not released\nby CACHE_RETURN (not decrimenting refcnt).  If an entry has positive\nrefcnt in the entry cache, it won't be released even if the entry\nnever be accessed.\n1. When a search request with VLV and/or SORT control fails.\n2. When comparing entries in compare_entries_sv, and the second\nentry is not found, the first entry is not released.\n3. vlv_trim_candidates_byvalue retrieves entries for performing\nbinary search over the candidate list and put them into the cache.\nThey are not released.\n\nThis patch adds CACHE_RETURN call for the above cases."
					},
					{
						"isprivate": "0",
						"commentid": "3543199",
						"comment_count": "40",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-17 01:47:08 +0000",
						"thetext": "Reviewed by Rich (Thank you!!!)\n\nPushed to master.\n\n$ git merge 676053\nUpdating 79a3fae..da14d3c\nFast-forward\n ldap/servers/slapd/back-ldbm/cache.c       |   43 ++++++++++++-\n ldap/servers/slapd/back-ldbm/id2entry.c    |    3 +-\n ldap/servers/slapd/back-ldbm/ldbm_search.c |   95 ++++++++++++++++++++++------\n ldap/servers/slapd/back-ldbm/ldif2ldbm.c   |   10 +--\n ldap/servers/slapd/back-ldbm/sort.c        |    1 +\n ldap/servers/slapd/back-ldbm/vlv.c         |   10 ++-\n ldap/servers/slapd/dse.c                   |   14 ++---\n 7 files changed, 133 insertions(+), 43 deletions(-)\n\n$ git push\nCounting objects: 39, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (27/27), done.\nWriting objects: 100% (27/27), 5.18 KiB, done.\nTotal 27 (delta 21), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   79a3fae..da14d3c  master -> master\n\nCherry picking 3 patches on 389-ds-base-1.2.8\ncommit f68c9e5ad8f8bff536a30e4fcdf089fd9d3c412e\ncommit 00a13794271527c7c474cd4d61f8ace5e7e7da32\ncommit da14d3c8a14b015d17f8b8bbcb16f9aa7d6ccd86\n\nPushed to 389-ds-base-1.2.8, as well.\n\n$ git push origin ds128-local:389-ds-base-1.2.8\nCounting objects: 39, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (27/27), done.\nWriting objects: 100% (27/27), 5.18 KiB, done.\nTotal 27 (delta 21), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   b339ee0..7205ca0  ds128-local -> 389-ds-base-1.2.8\n\nI leave the status of this bug NEW until it is verified that the original bug is fixed by Reinhard on his system.  Thanks in advance, Reinhard."
					},
					{
						"isprivate": "0",
						"commentid": "3544425",
						"comment_count": "42",
						"who": {
							"text": "rnappert",
							"name": "reinhard nappert"
						},
						"bug_when": "2011-02-17 15:52:47 +0000",
						"thetext": "Noriko,\n\nthanks for fixing the bug. I did apply the patch and re-compiled 1.2.7.5. I was able to import our sample database and a larger database, while our components were running. I performed those imports at least 20 times and all of them worked. Of course, I could write a test client, performing vlv searches (I still may do this at a later time), but it looks to me that you nailed it, since I was not able to do it that often before. I only tested it in a stand-alone mode. I will run some tests in  MMR environment as well.\n\nAnyway, for now I am happy :)\n\nThanks, again\n-Reinhard"
					},
					{
						"isprivate": "0",
						"commentid": "3544708",
						"comment_count": "43",
						"who": {
							"text": "nhosoi",
							"name": "Noriko Hosoi"
						},
						"bug_when": "2011-02-17 17:30:12 +0000",
						"thetext": "Thank YOU so much, Reinhard.  Without your detailed bug reports/analysis and quick patch testings, I believe we never have been able to figure out what was the real cause.  Besides, your bug was very prolific.  We found multiple culprits, in addition!\n\nPlease keep us informed how you are doing and what kind of difficulties you are facing.  That'll be a big help to improve the 389 product!\n\nWarmest regards,\n--noriko"
					},
					{
						"isprivate": "0",
						"commentid": "3800363",
						"comment_count": "44",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-06-08 12:53:18 +0000",
						"thetext": "https://bugzilla.redhat.com/show_bug.cgi?id=677483 - Duplicate."
					}
				]
			}
		},
		{
			"bug_id": 676689,
			"title": "crash while adding a new user to be synced to windows",
			"bugzilla": {
				"bug_id": "676689",
				"creation_ts": "2011-02-10 19:34:30 +0000",
				"short_desc": "crash while adding a new user to be synced to windows",
				"delta_ts": "2015-12-07 16:41:17 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "676733",
						"creation_ts": "2011-02-10 23:37:29 +0000",
						"short_desc": "crash while adding a new user to be synced to windows",
						"delta_ts": "2015-01-04 23:46:18 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"676689"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3532113",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-10 23:37:29 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #676689 +++\n\nDescription of problem:\n\nI set up windows sync (2008 R2).  Initial sync went ok.  I added an ntUser to the DS side - when it went to sync it crashed with an assertion abort in ldap_next_entry() in windows_search_entry_ext().  It seems that openldap ldap_next_entry(LDAP *, LDAPMessage *entry) does not like entry == NULL - it asserts and aborts, while mozldap ldap_next_entry will just return NULL in that case.\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-10 17:28:04 EST ---\n\nCreated attachment 478135\n0001-Bug-676689-crash-while-adding-a-new-user-to-be-synce.patch"
							},
							{
								"isprivate": "0",
								"commentid": "3710113",
								"comment_count": "3",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-05-02 15:36:40 +0000",
								"thetext": "to reproduce:\n1) setup windows sync and a sync agreement\n2) add a user to the DS side like this\ndn: cn=testuser,ou=people,<your suffix>\nobjectclass: person\nobjectclass: ntUser\nsn: User\ngivenName: Test\nntUserDomainId: testuser\nntUserCreateNewAccount: TRUE\n\n3) verify that the user entry is created in AD\n4) verify the directory server did not crash"
							},
							{
								"isprivate": "0",
								"commentid": "3711575",
								"comment_count": "4",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-05-03 06:24:32 +0000",
								"thetext": "[root@rheltest etc]# ldapadd -x -D \"cn=Directory Manager\" -w abc -h localhost -p 389 << EOF\n> dn: cn=testuser,ou=users,ou=unix,dc=corp,dc=example,dc=com\n> objectclass: person\n> objectClass: inetorgperson\n> objectclass: ntUser\n> sn: User\n> givenName: Test\n> ntUserDomainId: testuser\n> ntUserCreateNewAccount: TRUE\n> EOF\nadding new entry \"cn=testuser,ou=users,ou=unix,dc=corp,dc=example,dc=com\"\n\n- Entry replicated to AD and no crash found.\nhence verified."
							},
							{
								"isprivate": "0",
								"commentid": "3744596",
								"comment_count": "5",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:34 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3531703",
						"comment_count": "0",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-10 19:34:30 +0000",
						"thetext": "Description of problem:\n\nI set up windows sync (2008 R2).  Initial sync went ok.  I added an ntUser to the DS side - when it went to sync it crashed with an assertion abort in ldap_next_entry() in windows_search_entry_ext().  It seems that openldap ldap_next_entry(LDAP *, LDAPMessage *entry) does not like entry == NULL - it asserts and aborts, while mozldap ldap_next_entry will just return NULL in that case."
					},
					{
						"isprivate": "0",
						"commentid": "3532004",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-10 22:28:04 +0000",
						"thetext": "Created attachment 478135\n0001-Bug-676689-crash-while-adding-a-new-user-to-be-synce.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3532116",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-10 23:40:08 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   96bb64a..8a15fd4  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit 8a15fd460396e7d04a7907d4948493afba2b8083\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 10 15:23:20 2011 -0700\n    Reviewed by: nkinder (Thanks!)\n    Branch: 389-ds-base-1.2.8\n    Fix Description: The OpenLDAP ldap_next_entry() function will assert and\n    abort if passed a NULL message.  Mozldap ldap_next_entry() will just return\n    NULL.  Fix the server to not pass NULL to ldap_next_entry().\n    Platforms tested: RHEL6 x86_64\n    Flag Day: no\n    Doc impact: no\n    (cherry picked from commit 82b362176a8874ace0fd53e69ca6838d33a4881a)\ncommit 82b362176a8874ace0fd53e69ca6838d33a4881a\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Thu Feb 10 15:23:20 2011 -0700\n    Branch: master"
					},
					{
						"isprivate": "0",
						"commentid": "3711577",
						"comment_count": "3",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-03 06:25:33 +0000",
						"thetext": "[root@rheltest etc]# ldapadd -x -D \"cn=Directory Manager\" -w abc -h localhost\n-p 389 << EOF\n> dn: cn=testuser,ou=users,ou=unix,dc=corp,dc=example,dc=com\n> objectclass: person\n> objectClass: inetorgperson\n> objectclass: ntUser\n> sn: User\n> givenName: Test\n> ntUserDomainId: testuser\n> ntUserCreateNewAccount: TRUE\n> EOF\nadding new entry \"cn=testuser,ou=users,ou=unix,dc=corp,dc=example,dc=com\"\n\n- Entry replicated to AD and no crash found.\nhence verified."
					}
				]
			}
		},
		{
			"bug_id": 677440,
			"title": "clean up compiler warnings in 389-ds-base 1.2.8",
			"bugzilla": {
				"bug_id": "677440",
				"creation_ts": "2011-02-14 19:41:03 +0000",
				"short_desc": "clean up compiler warnings in 389-ds-base 1.2.8",
				"delta_ts": "2015-12-07 16:50:10 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "high",
				"bug_severity": "high",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "677464",
						"creation_ts": "2011-02-14 21:57:33 +0000",
						"short_desc": "clean up compiler warnings in 389-ds-base 1.2.8",
						"delta_ts": "2015-01-04 23:46:26 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "high",
						"bug_severity": "high",
						"depends_on": [
							"677440"
						],
						"blocked": [
							{
								"bug_id": "639035",
								"error": "NotPermitted"
							},
							{
								"bug_id": "656390",
								"alias": "389_1.2.8",
								"creation_ts": "2010-11-23 16:17:56 +0000",
								"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
								"delta_ts": "2015-01-04 23:44:59 +0000",
								"bug_status": "CLOSED",
								"resolution": "CURRENTRELEASE",
								"priority": "high",
								"bug_severity": "medium",
								"depends_on": [
									"182507",
									"197886",
									"201652",
									"252249",
									"430321",
									"450016",
									"481195",
									"505722",
									"509897",
									"514190",
									"515329",
									"518890",
									"527912",
									"543633",
									"555577",
									"567282",
									"576534",
									"588480",
									"588791",
									"604881",
									"622907",
									"624485",
									"624547",
									"638511",
									"641944",
									"642046",
									"644784",
									"646381",
									"653007",
									"654054",
									"654057",
									"656734",
									"659131",
									"659776",
									"661102",
									"663191",
									"667935",
									"668385",
									"668862",
									"668909",
									"669205",
									"670616",
									"671033",
									"672313",
									"674430",
									"674852",
									"675113",
									"675265",
									"675320",
									"675853",
									"676053",
									"676407",
									"676655",
									"676666",
									"676689",
									"676729",
									"676733",
									"677440",
									"677464",
									"677465",
									"677467",
									"677483",
									"677705",
									"677774",
									"678369",
									"678646",
									"679542",
									"679978",
									"680284",
									"680305",
									"680555",
									"680558",
									"681015",
									"681332",
									"681351",
									"681379",
									"681550",
									"681611",
									"681720",
									"681726",
									"683250",
									"684349",
									"684996",
									"689866",
									"689889",
									"689952",
									"690526",
									"690955",
									"691486",
									"692331",
									"692937",
									"692991",
									"693451",
									"693455",
									"693466",
									"693473",
									"693503",
									"693516",
									"693519",
									"693520",
									"693522",
									"693523",
									"693597",
									"693598",
									"693868",
									"693962",
									"694927",
									"695779",
									"696407",
									"700145",
									"701057"
								],
								"long_desc": [
									{
										"isprivate": "0",
										"commentid": "3369423",
										"comment_count": "0",
										"who": {
											"text": "nkinder",
											"name": "Nathan Kinder"
										},
										"bug_when": "2010-11-23 16:17:56 +0000",
										"thetext": "Tracking bug for 389 1.2.8 release."
									}
								]
							},
							{
								"bug_id": "676871",
								"error": "NotPermitted"
							}
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3537099",
								"comment_count": "0",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-02-14 21:57:33 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #677440 +++\n\nBuilding on RHEL6 x86_64 with\nCFLAGS=\"-g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic\" and configure --enable-debug\n\nThere are several compiler warnings in 1.2.8\n../ds.git/ldap/servers/slapd/attrsyntax.c: In function 'slapi_attr_is_dn_syntax_attr':\n../ds.git/ldap/servers/slapd/attrsyntax.c:829: warning: suggest parentheses around assignment used as truth value\n../ds.git/ldap/servers/slapd/libglobs.c: In function 'config_get_anon_access_switch':\n../ds.git/ldap/servers/slapd/libglobs.c:4623: warning: assignment makes pointer from integer without a cast\n../ds.git/ldap/servers/slapd/libglobs.c:4625: warning: return makes integer from pointer without a cast\n../ds.git/ldap/servers/slapd/result.c:1699: warning: format '%u' expects type 'unsigned int', but argument 6 has type 'ber_tag_t'\n... several of these ...\n../ds.git/ldap/servers/plugins/acl/aclparse.c: In function 'acl_check_for_target_macro':\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1644: warning: initialization makes integer from pointer without a cast\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1649: warning: assignment makes integer from pointer without a cast\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1650: warning: comparison between pointer and integer\n../ds.git/ldap/servers/slapd/back-ldbm/archive.c: In function 'ldbm_back_ldbm2archive':\n../ds.git/ldap/servers/slapd/back-ldbm/archive.c:432: warning: implicit declaration of function 'is_slapd_running'\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c: In function 'dblayer_sys_pages':\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c:927: warning: format '%u' expects type 'unsigned int *', but argument 3 has type 'size_t *'\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c: In function 'commit_good_database':\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c:4217: warning: format '%u' expects type 'unsigned int', but argument 4 has type 'size_t'\n../ds.git/ldap/servers/slapd/back-ldbm/import-threads.c:726: warning: format '%u' expects type 'unsigned int', but argument 3 has type 'size_t'\n... several of these ...\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c: In function '_back_crypt_crypto_op':\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c:1513: warning: format '%d' expects type 'int', but argument 5 has type 'size_t'\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c:1516: warning: format '%d' expects type 'int', but argument 4 has type 'size_t'\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c: In function 'cb_sasl_bind_once_s':\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c:186: warning: pointer type mismatch in conditional expression\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c:188: warning: format '%s' expects type 'char *', but argument 4 has type 'void * const'\n../ds.git/ldap/servers/plugins/chainingdb/cb_conn_stateless.c: In function 'cb_get_connection':\n../ds.git/ldap/servers/plugins/chainingdb/cb_conn_stateless.c:174: warning: unused variable 'error2'\n../ds.git/ldap/servers/plugins/mep/mep.c: In function 'mep_modrdn_post_op':\n../ds.git/ldap/servers/plugins/mep/mep.c:2374: warning: label 'bail' defined but not used\n../ds.git/ldap/servers/plugins/replication/cl5_api.c: In function '_cl5AppInit':\n../ds.git/ldap/servers/plugins/replication/cl5_api.c:1973: warning: format '%u' expects type 'unsigned int', but argument 5 has type 'size_t'\n../ds.git/ldap/servers/plugins/replication/cl5_api.c: In function 'cl5WriteRUV':\n../ds.git/ldap/servers/plugins/replication/cl5_api.c:6250: warning: implicit declaration of function 'is_slapd_running'\n../ds.git/ldap/servers/slapd/connection.c:2702: warning: format ‘%u’ expects type ‘unsigned int’, but argument 6 has type ‘ber_len_t’\n../ds.git/ldap/servers/slapd/connection.c:2702: warning: format ‘%u’ expects type ‘unsigned int’, but argument 7 has type ‘ber_len_t’\n../ds.git/ldap/servers/slapd/main.c: In function ‘slapd_exemode_db2ldif’:\n../ds.git/ldap/servers/slapd/main.c:2329: warning: implicit declaration of function ‘is_slapd_running’\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-14 14:54:24 EST ---\n\nCreated attachment 478695\n0001-Bug-677440-clean-up-compiler-warnings-in-389-ds-base.patch\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-14 14:59:40 EST ---\n\nCreated attachment 478698\n0001-Bug-677440-clean-up-compiler-warnings-in-389-ds-base.patch\n\nfix formatting problems in previous patch\n\n--- Additional comment from rmeggins@redhat.com on 2011-02-14 15:58:53 EST ---\n\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   cee5f05..79a3fae  master -> master\ncommit 79a3fae13fd3ae772b2a37343ef78a1d1e0cb24d\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Feb 8 11:28:31 2011 -0700\n    * added is_slapd_running to shared header file\n    * added parentheses around assignment used as truth value\n    * added printf format string for ber_tag_t and ber_len_t\n    * fixed type usage in config_get_anon_access_switch\n    * fixed variable declaration in acl_check_for_target_macro\n    * use %lu for size_t in scanf and printf\n    * fixed usage of matcheddnp in cb_sasl_bind_once_s\n    Reviewed by: nkinder (Thanks!)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   b6871e9..b339ee0  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit b339ee0e211b31abe038bb25e8abbf2314161f0f\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Feb 8 11:28:31 2011 -0700"
							},
							{
								"isprivate": "0",
								"commentid": "3675631",
								"comment_count": "3",
								"who": {
									"text": "jgalipea",
									"name": "Jenny Severance"
								},
								"bug_when": "2011-04-14 18:44:53 +0000",
								"thetext": "could you please add steps to verify.  I am still seeing a slew of warnings in the build logs from tps tests."
							},
							{
								"isprivate": "0",
								"commentid": "3675773",
								"comment_count": "4",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-04-14 19:48:42 +0000",
								"thetext": "I reviewed the logs - all of the ones that we planned to fix are fixed - the others are not serious - looks like tps uses a different set of build flags than regular rpm --eval %optflags - we need to fix these too (but it can wait until the next release)"
							},
							{
								"isprivate": "0",
								"commentid": "3676950",
								"comment_count": "5",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-04-15 08:55:11 +0000",
								"thetext": "I request dev to please verify this."
							},
							{
								"isprivate": "0",
								"commentid": "3677580",
								"comment_count": "6",
								"who": {
									"text": "rmeggins",
									"name": "Rich Megginson"
								},
								"bug_when": "2011-04-15 14:20:14 +0000",
								"thetext": "verified"
							},
							{
								"isprivate": "0",
								"commentid": "3744600",
								"comment_count": "7",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:40 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3536839",
						"comment_count": "0",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-14 19:41:03 +0000",
						"thetext": "Building on RHEL6 x86_64 with\nCFLAGS=\"-g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic\" and configure --enable-debug\n\nThere are several compiler warnings in 1.2.8\n../ds.git/ldap/servers/slapd/attrsyntax.c: In function 'slapi_attr_is_dn_syntax_attr':\n../ds.git/ldap/servers/slapd/attrsyntax.c:829: warning: suggest parentheses around assignment used as truth value\n../ds.git/ldap/servers/slapd/libglobs.c: In function 'config_get_anon_access_switch':\n../ds.git/ldap/servers/slapd/libglobs.c:4623: warning: assignment makes pointer from integer without a cast\n../ds.git/ldap/servers/slapd/libglobs.c:4625: warning: return makes integer from pointer without a cast\n../ds.git/ldap/servers/slapd/result.c:1699: warning: format '%u' expects type 'unsigned int', but argument 6 has type 'ber_tag_t'\n... several of these ...\n../ds.git/ldap/servers/plugins/acl/aclparse.c: In function 'acl_check_for_target_macro':\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1644: warning: initialization makes integer from pointer without a cast\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1649: warning: assignment makes integer from pointer without a cast\n../ds.git/ldap/servers/plugins/acl/aclparse.c:1650: warning: comparison between pointer and integer\n../ds.git/ldap/servers/slapd/back-ldbm/archive.c: In function 'ldbm_back_ldbm2archive':\n../ds.git/ldap/servers/slapd/back-ldbm/archive.c:432: warning: implicit declaration of function 'is_slapd_running'\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c: In function 'dblayer_sys_pages':\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c:927: warning: format '%u' expects type 'unsigned int *', but argument 3 has type 'size_t *'\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c: In function 'commit_good_database':\n../ds.git/ldap/servers/slapd/back-ldbm/dblayer.c:4217: warning: format '%u' expects type 'unsigned int', but argument 4 has type 'size_t'\n../ds.git/ldap/servers/slapd/back-ldbm/import-threads.c:726: warning: format '%u' expects type 'unsigned int', but argument 3 has type 'size_t'\n... several of these ...\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c: In function '_back_crypt_crypto_op':\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c:1513: warning: format '%d' expects type 'int', but argument 5 has type 'size_t'\n../ds.git/ldap/servers/slapd/back-ldbm/ldbm_attrcrypt.c:1516: warning: format '%d' expects type 'int', but argument 4 has type 'size_t'\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c: In function 'cb_sasl_bind_once_s':\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c:186: warning: pointer type mismatch in conditional expression\n../ds.git/ldap/servers/plugins/chainingdb/cb_bind.c:188: warning: format '%s' expects type 'char *', but argument 4 has type 'void * const'\n../ds.git/ldap/servers/plugins/chainingdb/cb_conn_stateless.c: In function 'cb_get_connection':\n../ds.git/ldap/servers/plugins/chainingdb/cb_conn_stateless.c:174: warning: unused variable 'error2'\n../ds.git/ldap/servers/plugins/mep/mep.c: In function 'mep_modrdn_post_op':\n../ds.git/ldap/servers/plugins/mep/mep.c:2374: warning: label 'bail' defined but not used\n../ds.git/ldap/servers/plugins/replication/cl5_api.c: In function '_cl5AppInit':\n../ds.git/ldap/servers/plugins/replication/cl5_api.c:1973: warning: format '%u' expects type 'unsigned int', but argument 5 has type 'size_t'\n../ds.git/ldap/servers/plugins/replication/cl5_api.c: In function 'cl5WriteRUV':\n../ds.git/ldap/servers/plugins/replication/cl5_api.c:6250: warning: implicit declaration of function 'is_slapd_running'\n../ds.git/ldap/servers/slapd/connection.c:2702: warning: format ‘%u’ expects type ‘unsigned int’, but argument 6 has type ‘ber_len_t’\n../ds.git/ldap/servers/slapd/connection.c:2702: warning: format ‘%u’ expects type ‘unsigned int’, but argument 7 has type ‘ber_len_t’\n../ds.git/ldap/servers/slapd/main.c: In function ‘slapd_exemode_db2ldif’:\n../ds.git/ldap/servers/slapd/main.c:2329: warning: implicit declaration of function ‘is_slapd_running’"
					},
					{
						"isprivate": "0",
						"commentid": "3536863",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-14 19:54:24 +0000",
						"thetext": "Created attachment 478695\n0001-Bug-677440-clean-up-compiler-warnings-in-389-ds-base.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3536872",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-14 19:59:40 +0000",
						"thetext": "Created attachment 478698\n0001-Bug-677440-clean-up-compiler-warnings-in-389-ds-base.patch\n\nfix formatting problems in previous patch"
					},
					{
						"isprivate": "0",
						"commentid": "3536986",
						"comment_count": "3",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-14 20:58:53 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   cee5f05..79a3fae  master -> master\ncommit 79a3fae13fd3ae772b2a37343ef78a1d1e0cb24d\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Feb 8 11:28:31 2011 -0700\n    * added is_slapd_running to shared header file\n    * added parentheses around assignment used as truth value\n    * added printf format string for ber_tag_t and ber_len_t\n    * fixed type usage in config_get_anon_access_switch\n    * fixed variable declaration in acl_check_for_target_macro\n    * use %lu for size_t in scanf and printf\n    * fixed usage of matcheddnp in cb_sasl_bind_once_s\n    Reviewed by: nkinder (Thanks!)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   b6871e9..b339ee0  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit b339ee0e211b31abe038bb25e8abbf2314161f0f\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Tue Feb 8 11:28:31 2011 -0700"
					},
					{
						"isprivate": "0",
						"commentid": "3732096",
						"comment_count": "4",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-05-13 06:49:53 +0000",
						"thetext": "Requesting Dev to test this issue please."
					},
					{
						"isprivate": "0",
						"commentid": "3733492",
						"comment_count": "5",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-05-13 20:36:28 +0000",
						"thetext": "the above issues in 79a3fae13fd3ae772b2a37343ef78a1d1e0cb24d are fixed.  You can mark this as VERIFIED."
					},
					{
						"isprivate": "0",
						"commentid": "3736615",
						"comment_count": "6",
						"who": {
							"text": "jgalipea",
							"name": "Jenny Severance"
						},
						"bug_when": "2011-05-16 16:53:23 +0000",
						"thetext": "based on comment #5 - marking bug verified."
					}
				]
			}
		},
		{
			"bug_id": 677774,
			"title": "DS fails to start after reboot",
			"bugzilla": {
				"bug_id": "677774",
				"creation_ts": "2011-02-15 20:09:06 +0000",
				"short_desc": "DS fails to start after reboot",
				"delta_ts": "2014-10-30 18:41:33 +0000",
				"bug_status": "CLOSED",
				"resolution": "WORKSFORME",
				"keywords": "screened",
				"priority": "urgent",
				"bug_severity": "urgent",
				"blocked": [
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3539418",
						"comment_count": "0",
						"who": {
							"text": "ssorce",
							"name": "Simo Sorce"
						},
						"bug_when": "2011-02-15 20:09:06 +0000",
						"thetext": "Due to: https://fedoraproject.org/wiki/Features/var-run-tmpfs\n\nthe /var/lock/dirsrv is removed at reboot\n\nmissing the /var/lock/dirsrv/slapd-INSTANCE-NAME directory with the right ownership and selinux context the startup scripts fails to create the lock file and dirsrv aborts."
					},
					{
						"isprivate": "0",
						"commentid": "3539428",
						"comment_count": "1",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-15 20:12:02 +0000",
						"thetext": "Affects fedora 15 and rawhide"
					},
					{
						"isprivate": "0",
						"commentid": "3539433",
						"comment_count": "2",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-15 20:13:16 +0000",
						"thetext": "See also https://fedoraproject.org/wiki/Features/systemd and http://0pointer.de/public/systemd-man/tmpfiles.d.html"
					},
					{
						"isprivate": "0",
						"commentid": "3546858",
						"comment_count": "3",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-18 16:34:38 +0000",
						"thetext": "Created attachment 479564\n0001-Bug-677774-DS-fails-to-start-after-reboot.patch"
					},
					{
						"isprivate": "0",
						"commentid": "3547028",
						"comment_count": "4",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2011-02-18 17:53:49 +0000",
						"thetext": "To ssh://git.fedorahosted.org/git/389/ds.git\n   da14d3c..1b5ff01  master -> master\ncommit 1b5ff01a852ba28814cb4d3481d4e12642db8e85\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Wed Feb 16 15:20:35 2011 -0700\n    Reviewed by: nkinder (Thanks!)\n    Branch: master\n    Fix Description: Added a new configure switch --with-tmpfiles-d - this is the\n    path to the tmpfiles.d directory.  If this is set, ds create/update/migration\n    will create the appropriate instance specific tmpfiles.d file.\n    Platforms tested: Fedora 15 x86_64\n    Flag Day: no\n    Doc impact: no\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   7205ca0..171691c  389-ds-base-1.2.8 -> 389-ds-base-1.2.8\ncommit 171691cb65425d9c6fe3799c5940fbc335346b4d\nAuthor: Rich Megginson <rmeggins@redhat.com>\nDate:   Wed Feb 16 15:20:35 2011 -0700"
					},
					{
						"isprivate": "0",
						"commentid": "3557040",
						"comment_count": "5",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2011-02-24 02:42:09 +0000",
						"thetext": "389-ds-base-1.2.8-0.3.a3.fc15 has been submitted as an update for Fedora 15.\nhttps://admin.fedoraproject.org/updates/389-ds-base-1.2.8-0.3.a3.fc15"
					},
					{
						"isprivate": "0",
						"commentid": "3557046",
						"comment_count": "6",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2011-02-24 02:47:59 +0000",
						"thetext": "389-ds-base-1.2.8-0.3.a3.fc14 has been submitted as an update for Fedora 14.\nhttps://admin.fedoraproject.org/updates/389-ds-base-1.2.8-0.3.a3.fc14"
					},
					{
						"isprivate": "0",
						"commentid": "3557051",
						"comment_count": "7",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2011-02-24 02:51:07 +0000",
						"thetext": "389-ds-base-1.2.8-0.3.a3.fc13 has been submitted as an update for Fedora 13.\nhttps://admin.fedoraproject.org/updates/389-ds-base-1.2.8-0.3.a3.fc13"
					},
					{
						"isprivate": "0",
						"commentid": "3557053",
						"comment_count": "8",
						"who": {
							"text": "updates",
							"name": "Fedora Update System"
						},
						"bug_when": "2011-02-24 02:54:11 +0000",
						"thetext": "389-ds-base-1.2.8-0.3.a3.el5 has been submitted as an update for Fedora EPEL 5.\nhttps://admin.fedoraproject.org/updates/389-ds-base-1.2.8-0.3.a3.el5"
					},
					{
						"isprivate": "0",
						"commentid": "5799010",
						"comment_count": "9",
						"who": {
							"text": "bcotton",
							"name": "Fedora End Of Life"
						},
						"bug_when": "2013-04-03 20:32:04 +0000",
						"thetext": "This bug appears to have been reported against 'rawhide' during the Fedora 19 development cycle.\nChanging version to '19'.\n\n(As we did not run this process for some time, it could affect also pre-Fedora 19 development\ncycle bugs. We are very sorry. It will help us with cleanup during Fedora 19 End Of Life. Thank you.)\n\nMore information and reason for this action is here:\nhttps://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora19"
					},
					{
						"isprivate": "0",
						"commentid": "6200744",
						"comment_count": "10",
						"who": {
							"text": "ayersmj",
							"name": "Michael J. Ayers"
						},
						"bug_when": "2013-08-10 20:36:58 +0000",
						"thetext": "This bug is still apparent in the current release of Fedora (19).\n\nI tested and verified this today on a completely clean system with a brand new install."
					},
					{
						"isprivate": "0",
						"commentid": "6204723",
						"comment_count": "11",
						"who": {
							"text": "rmeggins",
							"name": "Rich Megginson"
						},
						"bug_when": "2013-08-12 17:23:24 +0000",
						"thetext": "(In reply to Michael J. Ayers from comment #10)\n> This bug is still apparent in the current release of Fedora (19).\n> \n> I tested and verified this today on a completely clean system with a brand\n> new install.\n\nI just tried this on a clean, up-to-date F-19 x86_64 VM system.\n\n1) yum install 389-ds-base\n2) setup-ds.pl\n3) following the directions at http://port389.org/wiki/Howto:systemd#How_do_I_make_it_start_at_boot_time.3F\n\nsystemctl start dirsrv.target\n\n4) reboot\n5) ps -ef|grep slapd\n\nthe process is running"
					}
				]
			}
		},
		{
			"bug_id": 678646,
			"title": "Managed entry plug-in needs to ignore tombstone deletion",
			"bugzilla": {
				"bug_id": "678646",
				"creation_ts": "2011-02-18 18:23:44 +0000",
				"short_desc": "Managed entry plug-in needs to ignore tombstone deletion",
				"delta_ts": "2015-12-07 17:10:20 +0000",
				"bug_status": "CLOSED",
				"resolution": "CURRENTRELEASE",
				"priority": "unspecified",
				"bug_severity": "unspecified",
				"blocked": [
					{
						"bug_id": "639035",
						"error": "NotPermitted"
					},
					{
						"bug_id": "656390",
						"alias": "389_1.2.8",
						"creation_ts": "2010-11-23 16:17:56 +0000",
						"short_desc": "(389_1.2.8) Tracking bug for 389 Directory Server 1.2.8",
						"delta_ts": "2015-01-04 23:44:59 +0000",
						"bug_status": "CLOSED",
						"resolution": "CURRENTRELEASE",
						"priority": "high",
						"bug_severity": "medium",
						"depends_on": [
							"182507",
							"197886",
							"201652",
							"252249",
							"430321",
							"450016",
							"481195",
							"505722",
							"509897",
							"514190",
							"515329",
							"518890",
							"527912",
							"543633",
							"555577",
							"567282",
							"576534",
							"588480",
							"588791",
							"604881",
							"622907",
							"624485",
							"624547",
							"638511",
							"641944",
							"642046",
							"644784",
							"646381",
							"653007",
							"654054",
							"654057",
							"656734",
							"659131",
							"659776",
							"661102",
							"663191",
							"667935",
							"668385",
							"668862",
							"668909",
							"669205",
							"670616",
							"671033",
							"672313",
							"674430",
							"674852",
							"675113",
							"675265",
							"675320",
							"675853",
							"676053",
							"676407",
							"676655",
							"676666",
							"676689",
							"676729",
							"676733",
							"677440",
							"677464",
							"677465",
							"677467",
							"677483",
							"677705",
							"677774",
							"678369",
							"678646",
							"679542",
							"679978",
							"680284",
							"680305",
							"680555",
							"680558",
							"681015",
							"681332",
							"681351",
							"681379",
							"681550",
							"681611",
							"681720",
							"681726",
							"683250",
							"684349",
							"684996",
							"689866",
							"689889",
							"689952",
							"690526",
							"690955",
							"691486",
							"692331",
							"692937",
							"692991",
							"693451",
							"693455",
							"693466",
							"693473",
							"693503",
							"693516",
							"693519",
							"693520",
							"693522",
							"693523",
							"693597",
							"693598",
							"693868",
							"693962",
							"694927",
							"695779",
							"696407",
							"700145",
							"701057"
						],
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3369423",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2010-11-23 16:17:56 +0000",
								"thetext": "Tracking bug for 389 1.2.8 release."
							}
						]
					},
					{
						"bug_id": "679210",
						"creation_ts": "2011-02-21 22:14:16 +0000",
						"short_desc": "Managed entry plug-in needs to ignore tombstone deletion",
						"delta_ts": "2015-01-04 23:46:36 +0000",
						"bug_status": "CLOSED",
						"resolution": "ERRATA",
						"keywords": "screened",
						"priority": "unspecified",
						"bug_severity": "unspecified",
						"depends_on": [
							"674852",
							"678646",
							"681351"
						],
						"external_bugs": {
							"text": "RHEA-2011:0533",
							"name": "Red Hat Product Errata"
						},
						"long_desc": [
							{
								"isprivate": "0",
								"commentid": "3551316",
								"comment_count": "0",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2011-02-21 22:14:16 +0000",
								"thetext": "+++ This bug was initially created as a clone of Bug #678646 +++\n\nThe managed entry plug-in currently doesn't ignore operations tombstone entries.  If one is using replication and deletes an origin entry, then re-adds an origin entry with the same name, the associated managed entry will be deleted when the tombstone is cleaned up.  This results in an origin entry with no associated managed entry.\n\nWe need to make the managed entry delete post-op skip processing for tombstone entries."
							},
							{
								"isprivate": "0",
								"commentid": "3551599",
								"comment_count": "1",
								"who": {
									"text": "nkinder",
									"name": "Nathan Kinder"
								},
								"bug_when": "2011-02-22 01:28:59 +0000",
								"thetext": "Pushed to the 389-ds-base-1.2.8 branch.\n\nCounting objects: 13, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (7/7), done.\nWriting objects: 100% (7/7), 1016 bytes, done.\nTotal 7 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   171691c..42fd02c  128-local -> 389-ds-base-1.2.8"
							},
							{
								"isprivate": "0",
								"commentid": "3706029",
								"comment_count": "3",
								"who": {
									"text": "amsharma",
									"name": "Amita Sharma"
								},
								"bug_when": "2011-04-29 08:27:41 +0000",
								"thetext": "1. Add an entry in master and check it should be replicated to slave.\nldapmodify -x -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 << EOF\ndn: uid=amita,ou=people,dc=replsuffix,dc=com\nchangetype: add\nobjectClass: top\nobjectClass: person\nobjectClass: inetorgperson\nsn: testkrbuser\ncn: kkk testkrbuser\nuserPassword: redhat\nEOF\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20102 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n\n2. Delete the entry from master and chk the slave\n\nldapdelete -x -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 \"uid=amita,ou=people,dc=replsuffix,dc=com\"\nldapsearch -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\nldapsearch -h localhost -p 20102 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n\n3. Repeat Step first.\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapmodify -x -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 << EOF\n> dn: uid=amita,ou=people,dc=replsuffix,dc=com\n> changetype: add\n> objectClass: top\n> objectClass: person\n> objectClass: inetorgperson\n> sn: testkrbuser\n> cn: kkk testkrbuser\n> userPassword: redhat\n> EOF\nadding new entry \"uid=amita,ou=people,dc=replsuffix,dc=com\"\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20102 -D \"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n\nBug is successfully VERIFIED."
							},
							{
								"isprivate": "0",
								"commentid": "3744608",
								"comment_count": "4",
								"who": {
									"text": "errata-xmlrpc",
									"name": "errata-xmlrpc"
								},
								"bug_when": "2011-05-19 12:41:54 +0000",
								"thetext": "An advisory has been issued which should help the problem\ndescribed in this bug report. This report is therefore being\nclosed with a resolution of ERRATA. For more information\non therefore solution and/or where to find the updated files,\nplease follow the link below. You may reopen this bug report\nif the solution does not work for you.\n\nhttp://rhn.redhat.com/errata/RHEA-2011-0533.html"
							}
						]
					}
				],
				"long_desc": [
					{
						"isprivate": "0",
						"commentid": "3547080",
						"comment_count": "0",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-18 18:23:44 +0000",
						"thetext": "The managed entry plug-in currently doesn't ignore operations tombstone entries.  If one is using replication and deletes an origin entry, then re-adds an origin entry with the same name, the associated managed entry will be deleted when the tombstone is cleaned up.  This results in an origin entry with no associated managed entry.\n\nWe need to make the managed entry delete post-op skip processing for tombstone entries."
					},
					{
						"isprivate": "0",
						"commentid": "3551408",
						"comment_count": "1",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-21 22:52:45 +0000",
						"thetext": "Created attachment 480016\nPatch"
					},
					{
						"isprivate": "0",
						"commentid": "3551596",
						"comment_count": "2",
						"who": {
							"text": "nkinder",
							"name": "Nathan Kinder"
						},
						"bug_when": "2011-02-22 01:24:40 +0000",
						"thetext": "Pushed to master.  Thanks to Noriko for her review!\n\nCounting objects: 13, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (7/7), done.\nWriting objects: 100% (7/7), 1010 bytes, done.\nTotal 7 (delta 4), reused 0 (delta 0)\nTo ssh://git.fedorahosted.org/git/389/ds.git\n   1b5ff01..59209af  master -> master"
					},
					{
						"isprivate": "0",
						"commentid": "3706031",
						"comment_count": "3",
						"who": {
							"text": "amsharma",
							"name": "Amita Sharma"
						},
						"bug_when": "2011-04-29 08:28:11 +0000",
						"thetext": "1. Add an entry in master and check it should be replicated to slave.\nldapmodify -x -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 <<\nEOF\ndn: uid=amita,ou=people,dc=replsuffix,dc=com\nchangetype: add\nobjectClass: top\nobjectClass: person\nobjectClass: inetorgperson\nsn: testkrbuser\ncn: kkk testkrbuser\nuserPassword: redhat\nEOF\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20100 -D\n\"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20102 -D\n\"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n\n2. Delete the entry from master and chk the slave\n\nldapdelete -x -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123\n\"uid=amita,ou=people,dc=replsuffix,dc=com\"\nldapsearch -h localhost -p 20100 -D \"cn=Directory Manager\" -w Secret123 -b\n\"dc=replsuffix,dc=com\" | grep amita\nldapsearch -h localhost -p 20102 -D \"cn=Directory Manager\" -w Secret123 -b\n\"dc=replsuffix,dc=com\" | grep amita\n\n3. Repeat Step first.\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapmodify -x -h localhost -p 20100 -D\n\"cn=Directory Manager\" -w Secret123 << EOF\n> dn: uid=amita,ou=people,dc=replsuffix,dc=com\n> changetype: add\n> objectClass: top\n> objectClass: person\n> objectClass: inetorgperson\n> sn: testkrbuser\n> cn: kkk testkrbuser\n> userPassword: redhat\n> EOF\nadding new entry \"uid=amita,ou=people,dc=replsuffix,dc=com\"\n\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20100 -D\n\"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n[amsharma@rhel61-ds90-amita scripts]$ ldapsearch -h localhost -p 20102 -D\n\"cn=Directory Manager\" -w Secret123 -b \"dc=replsuffix,dc=com\" | grep amita\n# amita, People, replsuffix.com\ndn: uid=amita,ou=People,dc=replsuffix,dc=com\nuid: amita\n\nBug is successfully VERIFIED."
					}
				]
			}
		}
	],
	"builds": [
		{
			"nvr": "389-ds-base-1.2.8-0.3.a3.el5",
			"signed": true,
			"type": "rpm",
			"package": {
				"i386": [
					{
						"name": "389-ds-base",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "i386"
					},
					{
						"name": "389-ds-base-debuginfo",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "i386"
					},
					{
						"name": "389-ds-base-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "i386"
					},
					{
						"name": "389-ds-base-selinux-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "i386"
					}
				],
				"ppc": [
					{
						"name": "389-ds-base-debuginfo",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "ppc"
					},
					{
						"name": "389-ds-base",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "ppc"
					},
					{
						"name": "389-ds-base-selinux-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "ppc"
					},
					{
						"name": "389-ds-base-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "ppc"
					}
				],
				"src": [
					{
						"name": "389-ds-base",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "src"
					}
				],
				"x86_64": [
					{
						"name": "389-ds-base",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "x86_64"
					},
					{
						"name": "389-ds-base-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "x86_64"
					},
					{
						"name": "389-ds-base-selinux-devel",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "x86_64"
					},
					{
						"name": "389-ds-base-debuginfo",
						"version": "1.2.8",
						"release": "0.3.a3.el5",
						"arch": "x86_64"
					}
				]
			}
		}
	],
	"close_bugs": true,
	"comments": [
		{
			"id": 40601,
			"text": "This update has been submitted for testing by rmeggins. ",
			"timestamp": "2011-02-24 02:55:23",
			"update_id": 5758,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 40602,
			"text": "This update has been pushed to testing",
			"timestamp": "2011-02-24 19:53:35",
			"update_id": 5758,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		},
		{
			"id": 40603,
			"text": "This update has been obsoleted by https://admin.fedoraproject.org/updates/389-ds-base-1.2.8-0.5.a3.el5",
			"timestamp": "2011-03-01 03:02:50",
			"update_id": 5758,
			"user": {
				"avatar": "https://apps.fedoraproject.org/img/icons/bodhi-24.png",
				"id": 91,
				"name": "bodhi",
				"openid": "bodhi.id.fedoraproject.org"
			},
			"user_id": 91
		}
	],
	"content_type": "rpm",
	"date_pushed": "2011-02-24 19:53:35",
	"date_submitted": "2011-02-24 02:54:01",
	"date_testing": "2011-02-24 19:53:35",
	"notes": "1.2.8.a3 release - git tag 389-ds-base-1.2.8.a3\nsee bugs for a list of bugs fixed\nThis is the 1.2.8 alpha 2 release - many bug fixes\n389-ds-base 1.2.8 alpha 1\ncontains many bug fixes",
	"pushed": true,
	"release": {
		"branch": "el5",
		"candidate_tag": "dist-5E-epel-testing-candidate",
		"composed_by_bodhi": true,
		"dist_tag": "dist-5E-epel",
		"id_prefix": "FEDORA-EPEL",
		"long_name": "Fedora EPEL 5",
		"mail_template": "fedora_epel_legacy_errata_template",
		"name": "EL-5",
		"override_tag": "dist-5E-epel-override",
		"package_manager": "unspecified",
		"stable_tag": "dist-5E-epel",
		"state": "archived",
		"testing_tag": "dist-5E-epel-testing",
		"version": "5"
	},
	"severity": "unspecified",
	"stable_karma": 3,
	"status": "obsolete",
	"suggest": "unspecified",
	"test_cases": [
		{
			"id": 142,
			"name": "QA:Testcase 389 ds base setup testcase"
		},
		{
			"id": 143,
			"name": "QA:Testcase Create normalized dn cache testcase"
		},
		{
			"id": 144,
			"name": "QA:Testcase Create normalized dn cache testcase2"
		}
	],
	"title": "389-ds-base-1.2.8-0.3.a3.el5",
	"type": "security",
	"url": "https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2011-0470",
	"unstable_karma": -3,
	"updateid": "FEDORA-EPEL-2011-0470",
	"user": {
		"avatar": "https://seccdn.libravatar.org/avatar/fe25890db2fabf330eba3ad1f7ec7b97331cabf8af3625bae2f59d9f8e03cf4c?s=24&d=retro",
		"email": "rmeggins@redhat.com",
		"groups": [
			{
				"name": "packager"
			},
			{
				"name": "ipausers"
			},
			{
				"name": "fedora-contributor"
			},
			{
				"name": "signed_fpca"
			},
			{
				"name": "fedorabugs"
			},
			{
				"name": "summer-coding"
			}
		],
		"id": 314,
		"name": "rmeggins",
		"openid": "rmeggins.id.fedoraproject.org"
	},
	"version_hash": "012ff96a49419406c3e792ce9b2434f0c455bae5"
}
